const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-B5l0aet7.js","assets/index-B4rgPNHe.js","assets/index-DRUAldav.css"])))=>i.map(i=>d[i]);
import{aL as Re,aM as Hs,aN as js,aO as Ds,ae as L,aP as st,aQ as Vr,aR as qe,aS as sr,ar as Ge,aT as Dt,aq as vt,ao as T,aU as Vt,aV as q,aK as oe,aG as Ae,aW as Ki,ag as ce,aF as $e,aI as ze,aX as Pt,aY as Vs,aZ as qs,a_ as Yi,a$ as Zs,b0 as Ji,aD as ht,b1 as or,b2 as Ws,au as we,b3 as Xi,b4 as Qi,as as ye,b5 as ea,b6 as ta,b7 as ir,b8 as na,ax as pt,ah as Ue,b9 as Ks,ai as be,ba as Ct,bb as nt,bc as qr,bd as Zr,be as Wr,bf as Kr,bg as Yr,bh as Jr,bi as Xr,bj as Qr,bk as Ot,bl as Et,aj as ie,ak as ue,bm as es,bn as Ys,bo as mn,bp as _t,bq as Js,br as Xs,bs as ra,bt as Lt,bu as sa,bv as pe,bw as Qs,at as he,bx as oa,by as eo,bz as qt,bA as mt,bB as Mt,bC as to,bD as ia,bE as ts,bF as aa,bG as Gt,bH as ns,bI as rs,bJ as no,bK as Rn,bL as ca,bM as ua,bN as ss,bO as fa,bP as da,bQ as On,aE as bt,am as ro,bR as os,bS as so,bT as is,bU as la,bV as ba,an as yn,aH as ha,bW as pa,bX as ma,bY as ya,bZ as ga,b_ as wa,b$ as xa,c0 as oo,c1 as va,c2 as Pa,c3 as Ea,c4 as Ba,c5 as Ia,c6 as Aa,c7 as _n,c8 as io,c9 as as,ca as $a,aC as ao,ap as Sa}from"./index-B4rgPNHe.js";const Ta="1.1.0";let Q=class Ln extends Error{constructor(t,n={}){var i;const r=n.cause instanceof Ln?n.cause.details:(i=n.cause)!=null&&i.message?n.cause.message:n.details,s=n.cause instanceof Ln&&n.cause.docsPath||n.docsPath,o=[t||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: https://abitype.dev${s}`]:[],...r?[`Details: ${r}`]:[],`Version: abitype@${Ta}`].join(`
`);super(o),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=t}};const co=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function Na(e){return co.test(e)}function ka(e){return Re(co,e)}const uo=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function Fa(e){return uo.test(e)}function Ca(e){return Re(uo,e)}const fo=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function za(e){return fo.test(e)}function Ra(e){return Re(fo,e)}const lo=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function Zt(e){return lo.test(e)}function Oa(e){return Re(lo,e)}const bo=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function _a(e){return bo.test(e)}function La(e){return Re(bo,e)}const ho=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function Ma(e){return ho.test(e)}function Ga(e){return Re(ho,e)}const Ua=/^receive\(\) external payable$/;function Ha(e){return Ua.test(e)}const cs=new Set(["memory","indexed","storage","calldata"]),ja=new Set(["indexed"]),Mn=new Set(["calldata","memory","storage"]);class Da extends Q{constructor({signature:t}){super("Failed to parse ABI item.",{details:`parseAbiItem(${JSON.stringify(t,null,2)})`,docsPath:"/api/human#parseabiitem-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiItemError"})}}class Va extends Q{constructor({type:t}){super("Unknown type.",{metaMessages:[`Type "${t}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class qa extends Q{constructor({type:t}){super("Unknown type.",{metaMessages:[`Type "${t}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class Za extends Q{constructor({params:t}){super("Failed to parse ABI parameters.",{details:`parseAbiParameters(${JSON.stringify(t,null,2)})`,docsPath:"/api/human#parseabiparameters-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiParametersError"})}}class Wa extends Q{constructor({param:t}){super("Invalid ABI parameter.",{details:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class Ka extends Q{constructor({param:t,name:n}){super("Invalid ABI parameter.",{details:t,metaMessages:[`"${n}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class Ya extends Q{constructor({param:t,type:n,modifier:r}){super("Invalid ABI parameter.",{details:t,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class Ja extends Q{constructor({param:t,type:n,modifier:r}){super("Invalid ABI parameter.",{details:t,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${r}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class Xa extends Q{constructor({abiParameter:t}){super("Invalid ABI parameter.",{details:JSON.stringify(t,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}class ot extends Q{constructor({signature:t,type:n}){super(`Invalid ${n} signature.`,{details:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class Qa extends Q{constructor({signature:t}){super("Unknown signature.",{details:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class e0 extends Q{constructor({signature:t}){super("Invalid struct signature.",{details:t,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class t0 extends Q{constructor({type:t}){super("Circular reference detected.",{metaMessages:[`Struct "${t}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class n0 extends Q{constructor({current:t,depth:n}){super("Unbalanced parentheses.",{metaMessages:[`"${t.trim()}" has too many ${n>0?"opening":"closing"} parentheses.`],details:`Depth "${n}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}function r0(e,t,n){let r="";if(n)for(const s of Object.entries(n)){if(!s)continue;let o="";for(const i of s[1])o+=`[${i.type}${i.name?`:${i.name}`:""}]`;r+=`(${s[0]}{${o}})`}return t?`${t}:${e}${r}`:e}const gn=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function Gn(e,t={}){if(za(e))return s0(e,t);if(Fa(e))return o0(e,t);if(Na(e))return i0(e,t);if(_a(e))return a0(e,t);if(Ma(e))return c0(e);if(Ha(e))return{type:"receive",stateMutability:"payable"};throw new Qa({signature:e})}function s0(e,t={}){const n=Ra(e);if(!n)throw new ot({signature:e,type:"function"});const r=ee(n.parameters),s=[],o=r.length;for(let c=0;c<o;c++)s.push(Se(r[c],{modifiers:Mn,structs:t,type:"function"}));const i=[];if(n.returns){const c=ee(n.returns),a=c.length;for(let u=0;u<a;u++)i.push(Se(c[u],{modifiers:Mn,structs:t,type:"function"}))}return{name:n.name,type:"function",stateMutability:n.stateMutability??"nonpayable",inputs:s,outputs:i}}function o0(e,t={}){const n=Ca(e);if(!n)throw new ot({signature:e,type:"event"});const r=ee(n.parameters),s=[],o=r.length;for(let i=0;i<o;i++)s.push(Se(r[i],{modifiers:ja,structs:t,type:"event"}));return{name:n.name,type:"event",inputs:s}}function i0(e,t={}){const n=ka(e);if(!n)throw new ot({signature:e,type:"error"});const r=ee(n.parameters),s=[],o=r.length;for(let i=0;i<o;i++)s.push(Se(r[i],{structs:t,type:"error"}));return{name:n.name,type:"error",inputs:s}}function a0(e,t={}){const n=La(e);if(!n)throw new ot({signature:e,type:"constructor"});const r=ee(n.parameters),s=[],o=r.length;for(let i=0;i<o;i++)s.push(Se(r[i],{structs:t,type:"constructor"}));return{type:"constructor",stateMutability:n.stateMutability??"nonpayable",inputs:s}}function c0(e){const t=Ga(e);if(!t)throw new ot({signature:e,type:"fallback"});return{type:"fallback",stateMutability:t.stateMutability??"nonpayable"}}const u0=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*(?:\spayable)?)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,f0=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,d0=/^u?int$/;function Se(e,t){var d,l;const n=r0(e,t==null?void 0:t.type,t==null?void 0:t.structs);if(gn.has(n))return gn.get(n);const r=Ds.test(e),s=Re(r?f0:u0,e);if(!s)throw new Wa({param:e});if(s.name&&b0(s.name))throw new Ka({param:e,name:s.name});const o=s.name?{name:s.name}:{},i=s.modifier==="indexed"?{indexed:!0}:{},c=(t==null?void 0:t.structs)??{};let a,u={};if(r){a="tuple";const b=ee(s.type),p=[],h=b.length;for(let y=0;y<h;y++)p.push(Se(b[y],{structs:c}));u={components:p}}else if(s.type in c)a="tuple",u={components:c[s.type]};else if(d0.test(s.type))a=`${s.type}256`;else if(s.type==="address payable")a="address";else if(a=s.type,(t==null?void 0:t.type)!=="struct"&&!po(a))throw new qa({type:a});if(s.modifier){if(!((l=(d=t==null?void 0:t.modifiers)==null?void 0:d.has)!=null&&l.call(d,s.modifier)))throw new Ya({param:e,type:t==null?void 0:t.type,modifier:s.modifier});if(Mn.has(s.modifier)&&!h0(a,!!s.array))throw new Ja({param:e,type:t==null?void 0:t.type,modifier:s.modifier})}const f={type:`${a}${s.array??""}`,...o,...i,...u};return gn.set(n,f),f}function ee(e,t=[],n="",r=0){const s=e.trim().length;for(let o=0;o<s;o++){const i=e[o],c=e.slice(o+1);switch(i){case",":return r===0?ee(c,[...t,n.trim()]):ee(c,t,`${n}${i}`,r);case"(":return ee(c,t,`${n}${i}`,r+1);case")":return ee(c,t,`${n}${i}`,r-1);default:return ee(c,t,`${n}${i}`,r)}}if(n==="")return t;if(r!==0)throw new n0({current:n,depth:r});return t.push(n.trim()),t}function po(e){return e==="address"||e==="bool"||e==="function"||e==="string"||Hs.test(e)||js.test(e)}const l0=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function b0(e){return e==="address"||e==="bool"||e==="function"||e==="string"||e==="tuple"||Hs.test(e)||js.test(e)||l0.test(e)}function h0(e,t){return t||e==="bytes"||e==="string"||e==="tuple"}function ar(e){const t={},n=e.length;for(let i=0;i<n;i++){const c=e[i];if(!Zt(c))continue;const a=Oa(c);if(!a)throw new ot({signature:c,type:"struct"});const u=a.properties.split(";"),f=[],d=u.length;for(let l=0;l<d;l++){const p=u[l].trim();if(!p)continue;const h=Se(p,{type:"struct"});f.push(h)}if(!f.length)throw new e0({signature:c});t[a.name]=f}const r={},s=Object.entries(t),o=s.length;for(let i=0;i<o;i++){const[c,a]=s[i];r[c]=mo(a,t)}return r}const p0=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function mo(e,t,n=new Set){const r=[],s=e.length;for(let o=0;o<s;o++){const i=e[o];if(Ds.test(i.type))r.push(i);else{const a=Re(p0,i.type);if(!(a!=null&&a.type))throw new Xa({abiParameter:i});const{array:u,type:f}=a;if(f in t){if(n.has(f))throw new t0({type:f});r.push({...i,type:`tuple${u??""}`,components:mo(t[f]??[],t,new Set([...n,f]))})}else if(po(f))r.push(i);else throw new Va({type:f})}}return r}function yo(e){const t=ar(e),n=[],r=e.length;for(let s=0;s<r;s++){const o=e[s];Zt(o)||n.push(Gn(o,t))}return n}function us(e){let t;if(typeof e=="string")t=Gn(e);else{const n=ar(e),r=e.length;for(let s=0;s<r;s++){const o=e[s];if(!Zt(o)){t=Gn(o,n);break}}}if(!t)throw new Da({signature:e});return t}function fs(e){const t=[];if(typeof e=="string"){const n=ee(e),r=n.length;for(let s=0;s<r;s++)t.push(Se(n[s],{modifiers:cs}))}else{const n=ar(e),r=e.length;for(let s=0;s<r;s++){const o=e[s];if(Zt(o))continue;const i=ee(o),c=i.length;for(let a=0;a<c;a++)t.push(Se(i[a],{modifiers:cs,structs:n}))}}if(t.length===0)throw new Za({params:e});return t}function _(e,t,n){const r=e[t.name];if(typeof r=="function")return r;const s=e[n];return typeof s=="function"?s:o=>t(e,o)}class m0 extends L{constructor(t){super(`Filter type "${t}" is not supported.`,{name:"FilterTypeNotSupportedError"})}}const ds="/docs/contract/encodeEventTopics";function Bt(e){var a;const{abi:t,eventName:n,args:r}=e;let s=t[0];if(n){const u=st({abi:t,name:n});if(!u)throw new Vr(n,{docsPath:ds});s=u}if(s.type!=="event")throw new Vr(void 0,{docsPath:ds});const o=qe(s),i=sr(o);let c=[];if(r&&"inputs"in s){const u=(a=s.inputs)==null?void 0:a.filter(d=>"indexed"in d&&d.indexed),f=Array.isArray(r)?r:Object.values(r).length>0?(u==null?void 0:u.map(d=>r[d.name]))??[]:[];f.length>0&&(c=(u==null?void 0:u.map((d,l)=>Array.isArray(f[l])?f[l].map((b,p)=>ls({param:d,value:f[l][p]})):typeof f[l]<"u"&&f[l]!==null?ls({param:d,value:f[l]}):null))??[])}return[i,...c]}function ls({param:e,value:t}){if(e.type==="string"||e.type==="bytes")return Ge(Dt(t));if(e.type==="tuple"||e.type.match(/^(.*)\[(\d+)?\]$/))throw new m0(e.type);return vt([e],[t])}function Wt(e,{method:t}){var r,s;const n={};return e.transport.type==="fallback"&&((s=(r=e.transport).onResponse)==null||s.call(r,({method:o,response:i,status:c,transport:a})=>{c==="success"&&t===o&&(n[i]=a.request)})),o=>n[o]||e.request}async function go(e,t){const{address:n,abi:r,args:s,eventName:o,fromBlock:i,strict:c,toBlock:a}=t,u=Wt(e,{method:"eth_newFilter"}),f=o?Bt({abi:r,args:s,eventName:o}):void 0,d=await e.request({method:"eth_newFilter",params:[{address:n,fromBlock:typeof i=="bigint"?T(i):i,toBlock:typeof a=="bigint"?T(a):a,topics:f}]});return{abi:r,args:s,eventName:o,id:d,request:u(d),strict:!!c,type:"event"}}function te(e){return typeof e=="string"?{address:e,type:"json-rpc"}:e}const y0={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},wo={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},g0={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};let bs=class extends L{constructor({offset:t}){super(`Offset \`${t}\` cannot be negative.`,{name:"NegativeOffsetError"})}},xo=class extends L{constructor({length:t,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${t}\`).`,{name:"PositionOutOfBoundsError"})}},w0=class extends L{constructor({count:t,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${t}\`).`,{name:"RecursiveReadLimitExceededError"})}};const x0={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new w0({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(e){if(e<0||e>this.bytes.length-1)throw new xo({length:this.bytes.length,position:e})},decrementPosition(e){if(e<0)throw new bs({offset:e});const t=this.position-e;this.assertPosition(t),this.position=t},getReadCount(e){return this.positionReadCount.get(e||this.position)||0},incrementPosition(e){if(e<0)throw new bs({offset:e});const t=this.position+e;this.assertPosition(t),this.position=t},inspectByte(e){const t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectBytes(e,t){const n=t??this.position;return this.assertPosition(n+e-1),this.bytes.subarray(n,n+e)},inspectUint8(e){const t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectUint16(e){const t=e??this.position;return this.assertPosition(t+1),this.dataView.getUint16(t)},inspectUint24(e){const t=e??this.position;return this.assertPosition(t+2),(this.dataView.getUint16(t)<<8)+this.dataView.getUint8(t+2)},inspectUint32(e){const t=e??this.position;return this.assertPosition(t+3),this.dataView.getUint32(t)},pushByte(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushBytes(e){this.assertPosition(this.position+e.length-1),this.bytes.set(e,this.position),this.position+=e.length},pushUint8(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushUint16(e){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,e),this.position+=2},pushUint24(e){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,e>>8),this.dataView.setUint8(this.position+2,e&255),this.position+=3},pushUint32(e){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,e),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const e=this.inspectByte();return this.position++,e},readBytes(e,t){this.assertReadLimit(),this._touch();const n=this.inspectBytes(e);return this.position+=t??e,n},readUint8(){this.assertReadLimit(),this._touch();const e=this.inspectUint8();return this.position+=1,e},readUint16(){this.assertReadLimit(),this._touch();const e=this.inspectUint16();return this.position+=2,e},readUint24(){this.assertReadLimit(),this._touch();const e=this.inspectUint24();return this.position+=3,e},readUint32(){this.assertReadLimit(),this._touch();const e=this.inspectUint32();return this.position+=4,e},get remaining(){return this.bytes.length-this.position},setPosition(e){const t=this.position;return this.assertPosition(e),this.position=e,()=>this.position=t},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const e=this.getReadCount();this.positionReadCount.set(this.position,e+1),e>0&&this.recursiveReadCount++}};function cr(e,{recursiveReadLimit:t=8192}={}){const n=Object.create(x0);return n.bytes=e,n.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=t,n}function v0(e,t={}){typeof t.size<"u"&&Vt(e,{size:t.size});const n=q(e,t);return ce(n,t)}function P0(e,t={}){let n=e;if(typeof t.size<"u"&&(Vt(n,{size:t.size}),n=Ae(n)),n.length>1||n[0]>1)throw new Ki(n);return!!n[0]}function Be(e,t={}){typeof t.size<"u"&&Vt(e,{size:t.size});const n=q(e,t);return oe(n,t)}function E0(e,t={}){let n=e;return typeof t.size<"u"&&(Vt(n,{size:t.size}),n=Ae(n,{dir:"right"})),new TextDecoder().decode(n)}function It(e,t){const n=typeof t=="string"?$e(t):t,r=cr(n);if(ze(n)===0&&e.length>0)throw new Pt;if(ze(t)&&ze(t)<32)throw new Vs({data:typeof t=="string"?t:q(t),params:e,size:ze(t)});let s=0;const o=[];for(let i=0;i<e.length;++i){const c=e[i];r.setPosition(s);const[a,u]=Qe(r,c,{staticPosition:0});s+=u,o.push(a)}return o}function Qe(e,t,{staticPosition:n}){const r=qs(t.type);if(r){const[s,o]=r;return I0(e,{...t,type:o},{length:s,staticPosition:n})}if(t.type==="tuple")return T0(e,t,{staticPosition:n});if(t.type==="address")return B0(e);if(t.type==="bool")return A0(e);if(t.type.startsWith("bytes"))return $0(e,t,{staticPosition:n});if(t.type.startsWith("uint")||t.type.startsWith("int"))return S0(e,t);if(t.type==="string")return N0(e,{staticPosition:n});throw new Yi(t.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const hs=32,Un=32;function B0(e){const t=e.readBytes(32);return[Zs(q(Ji(t,-20))),32]}function I0(e,t,{length:n,staticPosition:r}){if(!n){const i=Be(e.readBytes(Un)),c=r+i,a=c+hs;e.setPosition(c);const u=Be(e.readBytes(hs)),f=yt(t);let d=0;const l=[];for(let b=0;b<u;++b){e.setPosition(a+(f?b*32:d));const[p,h]=Qe(e,t,{staticPosition:a});d+=h,l.push(p)}return e.setPosition(r+32),[l,32]}if(yt(t)){const i=Be(e.readBytes(Un)),c=r+i,a=[];for(let u=0;u<n;++u){e.setPosition(c+u*32);const[f]=Qe(e,t,{staticPosition:c});a.push(f)}return e.setPosition(r+32),[a,32]}let s=0;const o=[];for(let i=0;i<n;++i){const[c,a]=Qe(e,t,{staticPosition:r+s});s+=a,o.push(c)}return[o,s]}function A0(e){return[P0(e.readBytes(32),{size:32}),32]}function $0(e,t,{staticPosition:n}){const[r,s]=t.type.split("bytes");if(!s){const i=Be(e.readBytes(32));e.setPosition(n+i);const c=Be(e.readBytes(32));if(c===0)return e.setPosition(n+32),["0x",32];const a=e.readBytes(c);return e.setPosition(n+32),[q(a),32]}return[q(e.readBytes(Number.parseInt(s,10),32)),32]}function S0(e,t){const n=t.type.startsWith("int"),r=Number.parseInt(t.type.split("int")[1]||"256",10),s=e.readBytes(32);return[r>48?v0(s,{signed:n}):Be(s,{signed:n}),32]}function T0(e,t,{staticPosition:n}){const r=t.components.length===0||t.components.some(({name:i})=>!i),s=r?[]:{};let o=0;if(yt(t)){const i=Be(e.readBytes(Un)),c=n+i;for(let a=0;a<t.components.length;++a){const u=t.components[a];e.setPosition(c+o);const[f,d]=Qe(e,u,{staticPosition:c});o+=d,s[r?a:u==null?void 0:u.name]=f}return e.setPosition(n+32),[s,32]}for(let i=0;i<t.components.length;++i){const c=t.components[i],[a,u]=Qe(e,c,{staticPosition:n});s[r?i:c==null?void 0:c.name]=a,o+=u}return[s,o]}function N0(e,{staticPosition:t}){const n=Be(e.readBytes(32)),r=t+n;e.setPosition(r);const s=Be(e.readBytes(32));if(s===0)return e.setPosition(t+32),["",32];const o=e.readBytes(s,32),i=E0(Ae(o));return e.setPosition(t+32),[i,32]}function yt(e){var r;const{type:t}=e;if(t==="string"||t==="bytes"||t.endsWith("[]"))return!0;if(t==="tuple")return(r=e.components)==null?void 0:r.some(yt);const n=qs(e.type);return!!(n&&yt({...e,type:n[1]}))}function k0(e){const{abi:t,data:n}=e,r=ht(n,0,4);if(r==="0x")throw new Pt;const o=[...t||[],wo,g0].find(i=>i.type==="error"&&r===or(qe(i)));if(!o)throw new Ws(r,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:o,args:"inputs"in o&&o.inputs&&o.inputs.length>0?It(o.inputs,ht(n,4)):void 0,errorName:o.name}}function vo({abiItem:e,args:t,includeFunctionName:n=!0,includeName:r=!1}){if("name"in e&&"inputs"in e&&e.inputs)return`${n?e.name:""}(${e.inputs.map((s,o)=>`${r&&s.name?`${s.name}: `:""}${typeof t[o]=="object"?we(t[o]):t[o]}`).join(", ")})`}function ur(e,t="wei"){return Xi(e,Qi[t])}class F0 extends L{constructor({address:t}){super(`State for account "${t}" is set multiple times.`,{name:"AccountStateConflictError"})}}class C0 extends L{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function ps(e){return e.reduce((t,{slot:n,value:r})=>`${t}        ${n}: ${r}
`,"")}function z0(e){return e.reduce((t,{address:n,...r})=>{let s=`${t}    ${n}:
`;return r.nonce&&(s+=`      nonce: ${r.nonce}
`),r.balance&&(s+=`      balance: ${r.balance}
`),r.code&&(s+=`      code: ${r.code}
`),r.state&&(s+=`      state:
`,s+=ps(r.state)),r.stateDiff&&(s+=`      stateDiff:
`,s+=ps(r.stateDiff)),s},`  State Override:
`).slice(0,-1)}function At(e){const t=Object.entries(e).map(([r,s])=>s===void 0||s===!1?null:[r,s]).filter(Boolean),n=t.reduce((r,[s])=>Math.max(r,s.length),0);return t.map(([r,s])=>`  ${`${r}:`.padEnd(n+1)}  ${s}`).join(`
`)}class R0 extends L{constructor({v:t}){super(`Invalid \`v\` value "${t}". Expected 27 or 28.`,{name:"InvalidLegacyVError"})}}class O0 extends L{constructor({transaction:t}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",At(t),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class _0 extends L{constructor({storageKey:t}){super(`Size for storage key "${t}" is invalid. Expected 32 bytes. Got ${Math.floor((t.length-2)/2)} bytes.`,{name:"InvalidStorageKeySizeError"})}}class L0 extends L{constructor(t,{account:n,docsPath:r,chain:s,data:o,gas:i,gasPrice:c,maxFeePerGas:a,maxPriorityFeePerGas:u,nonce:f,to:d,value:l}){var p;const b=At({chain:s&&`${s==null?void 0:s.name} (id: ${s==null?void 0:s.id})`,from:n==null?void 0:n.address,to:d,value:typeof l<"u"&&`${ur(l)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:o,gas:i,gasPrice:typeof c<"u"&&`${ye(c)} gwei`,maxFeePerGas:typeof a<"u"&&`${ye(a)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${ye(u)} gwei`,nonce:f});super(t.shortMessage,{cause:t,docsPath:r,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],"Request Arguments:",b].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=t}}class Po extends L{constructor({blockHash:t,blockNumber:n,blockTag:r,hash:s,index:o}){let i="Transaction";r&&o!==void 0&&(i=`Transaction at block time "${r}" at index "${o}"`),t&&o!==void 0&&(i=`Transaction at block hash "${t}" at index "${o}"`),n&&o!==void 0&&(i=`Transaction at block number "${n}" at index "${o}"`),s&&(i=`Transaction with hash "${s}"`),super(`${i} could not be found.`,{name:"TransactionNotFoundError"})}}class Eo extends L{constructor({hash:t}){super(`Transaction receipt with hash "${t}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}}class M0 extends L{constructor({receipt:t}){super(`Transaction with hash "${t.transactionHash}" reverted.`,{metaMessages:['The receipt marked the transaction as "reverted". This could mean that the function on the contract you are trying to call threw an error.'," ","You can attempt to extract the revert reason by:","- calling the `simulateContract` or `simulateCalls` Action with the `abi` and `functionName` of the contract","- using the `call` Action with raw `data`"],name:"TransactionReceiptRevertedError"}),Object.defineProperty(this,"receipt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.receipt=t}}class G0 extends L{constructor({hash:t}){super(`Timed out while waiting for transaction with hash "${t}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}class Bo extends L{constructor(t,{account:n,docsPath:r,chain:s,data:o,gas:i,gasPrice:c,maxFeePerGas:a,maxPriorityFeePerGas:u,nonce:f,to:d,value:l,stateOverride:b}){var y;const p=n?te(n):void 0;let h=At({from:p==null?void 0:p.address,to:d,value:typeof l<"u"&&`${ur(l)} ${((y=s==null?void 0:s.nativeCurrency)==null?void 0:y.symbol)||"ETH"}`,data:o,gas:i,gasPrice:typeof c<"u"&&`${ye(c)} gwei`,maxFeePerGas:typeof a<"u"&&`${ye(a)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${ye(u)} gwei`,nonce:f});b&&(h+=`
${z0(b)}`),super(t.shortMessage,{cause:t,docsPath:r,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],"Raw Call Arguments:",h].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=t}}class Io extends L{constructor(t,{abi:n,args:r,contractAddress:s,docsPath:o,functionName:i,sender:c}){const a=st({abi:n,args:r,name:i}),u=a?vo({abiItem:a,args:r,includeFunctionName:!1,includeName:!1}):void 0,f=a?qe(a,{includeName:!0}):void 0,d=At({address:s&&ea(s),function:f,args:u&&u!=="()"&&`${[...Array((i==null?void 0:i.length)??0).keys()].map(()=>" ").join("")}${u}`,sender:c});super(t.shortMessage||`An unknown error occurred while executing the contract function "${i}".`,{cause:t,docsPath:o,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],d&&"Contract Call:",d].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=n,this.args=r,this.cause=t,this.contractAddress=s,this.functionName=i,this.sender=c}}class Hn extends L{constructor({abi:t,data:n,functionName:r,message:s}){let o,i,c,a;if(n&&n!=="0x")try{i=k0({abi:t,data:n});const{abiItem:f,errorName:d,args:l}=i;if(d==="Error")a=l[0];else if(d==="Panic"){const[b]=l;a=y0[b]}else{const b=f?qe(f,{includeName:!0}):void 0,p=f&&l?vo({abiItem:f,args:l,includeFunctionName:!1,includeName:!1}):void 0;c=[b?`Error: ${b}`:"",p&&p!=="()"?`       ${[...Array((d==null?void 0:d.length)??0).keys()].map(()=>" ").join("")}${p}`:""]}}catch(f){o=f}else s&&(a=s);let u;o instanceof Ws&&(u=o.signature,c=[`Unable to decode signature "${u}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${u}.`]),super(a&&a!=="execution reverted"||u?[`The contract function "${r}" reverted with the following ${u?"signature":"reason"}:`,a||u].join(`
`):`The contract function "${r}" reverted.`,{cause:o,metaMessages:c,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=i,this.raw=n,this.reason=a,this.signature=u}}class U0 extends L{constructor({functionName:t}){super(`The contract function "${t}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${t}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class H0 extends L{constructor({factory:t}){super(`Deployment for counterfactual contract call failed${t?` for factory "${t}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}class Kt extends L{constructor({data:t,message:n}){super(n||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t}}const j0=3;function rt(e,{abi:t,address:n,args:r,docsPath:s,functionName:o,sender:i}){const c=e instanceof Kt?e:e instanceof L?e.walk(p=>"data"in p)||e.walk():{},{code:a,data:u,details:f,message:d,shortMessage:l}=c,b=e instanceof Pt?new U0({functionName:o}):[j0,ta.code].includes(a)&&(u||f||d||l)||a===ir.code&&f==="execution reverted"&&u?new Hn({abi:t,data:typeof u=="object"?u.data:u,functionName:o,message:c instanceof na?f:l??d}):e;return new Io(b,{abi:t,args:r,contractAddress:n,docsPath:s,functionName:o,sender:i})}function D0(e){const t=Ge(`0x${e.substring(4)}`).substring(26);return Zs(`0x${t}`)}async function V0({hash:e,signature:t}){const n=pt(e)?e:Ue(e),{secp256k1:r}=await Ks(async()=>{const{secp256k1:i}=await Promise.resolve().then(()=>bd);return{secp256k1:i}},void 0);return`0x${(()=>{if(typeof t=="object"&&"r"in t&&"s"in t){const{r:u,s:f,v:d,yParity:l}=t,b=Number(l??d),p=ms(b);return new r.Signature(ce(u),ce(f)).addRecoveryBit(p)}const i=pt(t)?t:Ue(t);if(ze(i)!==65)throw new Error("invalid signature length");const c=oe(`0x${i.slice(130)}`),a=ms(c);return r.Signature.fromCompact(i.substring(2,130)).addRecoveryBit(a)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function ms(e){if(e===0||e===1)return e;if(e===27)return 0;if(e===28)return 1;throw new Error("Invalid yParityOrV value")}async function Ao({hash:e,signature:t}){return D0(await V0({hash:e,signature:t}))}function He(e,t="hex"){const n=$o(e),r=cr(new Uint8Array(n.length));return n.encode(r),t==="hex"?q(r.bytes):r.bytes}function $o(e){return Array.isArray(e)?q0(e.map(t=>$o(t))):Z0(e)}function q0(e){const t=e.reduce((s,o)=>s+o.length,0),n=So(t);return{length:t<=55?1+t:1+n+t,encode(s){t<=55?s.pushByte(192+t):(s.pushByte(247+n),n===1?s.pushUint8(t):n===2?s.pushUint16(t):n===3?s.pushUint24(t):s.pushUint32(t));for(const{encode:o}of e)o(s)}}}function Z0(e){const t=typeof e=="string"?$e(e):e,n=So(t.length);return{length:t.length===1&&t[0]<128?1:t.length<=55?1+t.length:1+n+t.length,encode(s){t.length===1&&t[0]<128?s.pushBytes(t):t.length<=55?(s.pushByte(128+t.length),s.pushBytes(t)):(s.pushByte(183+n),n===1?s.pushUint8(t.length):n===2?s.pushUint16(t.length):n===3?s.pushUint24(t.length):s.pushUint32(t.length),s.pushBytes(t))}}}function So(e){if(e<2**8)return 1;if(e<2**16)return 2;if(e<2**24)return 3;if(e<2**32)return 4;throw new L("Length is too large.")}function W0(e){const{chainId:t,nonce:n,to:r}=e,s=e.contractAddress??e.address,o=Ge(be(["0x05",He([t?T(t):"0x",s,n?T(n):"0x"])]));return r==="bytes"?$e(o):o}async function To(e){const{authorization:t,signature:n}=e;return Ao({hash:W0(t),signature:n??t})}class K0 extends L{constructor(t,{account:n,docsPath:r,chain:s,data:o,gas:i,gasPrice:c,maxFeePerGas:a,maxPriorityFeePerGas:u,nonce:f,to:d,value:l}){var p;const b=At({from:n==null?void 0:n.address,to:d,value:typeof l<"u"&&`${ur(l)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:o,gas:i,gasPrice:typeof c<"u"&&`${ye(c)} gwei`,maxFeePerGas:typeof a<"u"&&`${ye(a)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${ye(u)} gwei`,nonce:f});super(t.shortMessage,{cause:t,docsPath:r,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],"Estimate Gas Arguments:",b].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=t}}function Yt(e,t){const n=(e.details||"").toLowerCase(),r=e instanceof L?e.walk(s=>(s==null?void 0:s.code)===Ct.code):e;return r instanceof L?new Ct({cause:e,message:r.details}):Ct.nodeMessage.test(n)?new Ct({cause:e,message:e.details}):nt.nodeMessage.test(n)?new nt({cause:e,maxFeePerGas:t==null?void 0:t.maxFeePerGas}):qr.nodeMessage.test(n)?new qr({cause:e,maxFeePerGas:t==null?void 0:t.maxFeePerGas}):Zr.nodeMessage.test(n)?new Zr({cause:e,nonce:t==null?void 0:t.nonce}):Wr.nodeMessage.test(n)?new Wr({cause:e,nonce:t==null?void 0:t.nonce}):Kr.nodeMessage.test(n)?new Kr({cause:e,nonce:t==null?void 0:t.nonce}):Yr.nodeMessage.test(n)?new Yr({cause:e}):Jr.nodeMessage.test(n)?new Jr({cause:e,gas:t==null?void 0:t.gas}):Xr.nodeMessage.test(n)?new Xr({cause:e,gas:t==null?void 0:t.gas}):Qr.nodeMessage.test(n)?new Qr({cause:e}):Ot.nodeMessage.test(n)?new Ot({cause:e,maxFeePerGas:t==null?void 0:t.maxFeePerGas,maxPriorityFeePerGas:t==null?void 0:t.maxPriorityFeePerGas}):new Et({cause:e})}function Y0(e,{docsPath:t,...n}){const r=(()=>{const s=Yt(e,n);return s instanceof Et?e:s})();return new K0(r,{docsPath:t,...n})}function Jt(e,{format:t}){if(!t)return{};const n={};function r(o){const i=Object.keys(o);for(const c of i)c in e&&(n[c]=e[c]),o[c]&&typeof o[c]=="object"&&!Array.isArray(o[c])&&r(o[c])}const s=t(e||{});return r(s),n}function fr(e,t){return({exclude:n,format:r})=>({exclude:n,format:(s,o)=>{const i=t(s,o);if(n)for(const c of n)delete i[c];return{...i,...r(s,o)}},type:e})}const J0={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function $t(e,t){const n={};return typeof e.authorizationList<"u"&&(n.authorizationList=X0(e.authorizationList)),typeof e.accessList<"u"&&(n.accessList=e.accessList),typeof e.blobVersionedHashes<"u"&&(n.blobVersionedHashes=e.blobVersionedHashes),typeof e.blobs<"u"&&(typeof e.blobs[0]!="string"?n.blobs=e.blobs.map(r=>q(r)):n.blobs=e.blobs),typeof e.data<"u"&&(n.data=e.data),e.account&&(n.from=e.account.address),typeof e.from<"u"&&(n.from=e.from),typeof e.gas<"u"&&(n.gas=T(e.gas)),typeof e.gasPrice<"u"&&(n.gasPrice=T(e.gasPrice)),typeof e.maxFeePerBlobGas<"u"&&(n.maxFeePerBlobGas=T(e.maxFeePerBlobGas)),typeof e.maxFeePerGas<"u"&&(n.maxFeePerGas=T(e.maxFeePerGas)),typeof e.maxPriorityFeePerGas<"u"&&(n.maxPriorityFeePerGas=T(e.maxPriorityFeePerGas)),typeof e.nonce<"u"&&(n.nonce=T(e.nonce)),typeof e.to<"u"&&(n.to=e.to),typeof e.type<"u"&&(n.type=J0[e.type]),typeof e.value<"u"&&(n.value=T(e.value)),n}function X0(e){return e.map(t=>({address:t.address,r:t.r?T(BigInt(t.r)):t.r,s:t.s?T(BigInt(t.s)):t.s,chainId:T(t.chainId),nonce:T(t.nonce),...typeof t.yParity<"u"?{yParity:T(t.yParity)}:{},...typeof t.v<"u"&&typeof t.yParity>"u"?{v:T(t.v)}:{}}))}function ys(e){if(!(!e||e.length===0))return e.reduce((t,{slot:n,value:r})=>{if(n.length!==66)throw new es({size:n.length,targetSize:66,type:"hex"});if(r.length!==66)throw new es({size:r.length,targetSize:66,type:"hex"});return t[n]=r,t},{})}function Q0(e){const{balance:t,nonce:n,state:r,stateDiff:s,code:o}=e,i={};if(o!==void 0&&(i.code=o),t!==void 0&&(i.balance=T(t)),n!==void 0&&(i.nonce=T(n)),r!==void 0&&(i.state=ys(r)),s!==void 0){if(i.state)throw new C0;i.stateDiff=ys(s)}return i}function dr(e){if(!e)return;const t={};for(const{address:n,...r}of e){if(!ie(n,{strict:!1}))throw new ue({address:n});if(t[n])throw new F0({address:n});t[n]=Q0(r)}return t}const Xt=2n**256n-1n;function it(e){const{account:t,maxFeePerGas:n,maxPriorityFeePerGas:r,to:s}=e,o=t?te(t):void 0;if(o&&!ie(o.address))throw new ue({address:o.address});if(s&&!ie(s))throw new ue({address:s});if(n&&n>Xt)throw new nt({maxFeePerGas:n});if(r&&n&&r>n)throw new Ot({maxFeePerGas:n,maxPriorityFeePerGas:r})}class No extends L{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class lr extends L{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class ec extends L{constructor({maxPriorityFeePerGas:t}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${ye(t)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class ko extends L{constructor({blockHash:t,blockNumber:n}){let r="Block";t&&(r=`Block at hash "${t}"`),n&&(r=`Block at number "${n}"`),super(`${r} could not be found.`,{name:"BlockNotFoundError"})}}const Fo={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function Qt(e,t){const n={...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,chainId:e.chainId?oe(e.chainId):void 0,gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,maxFeePerBlobGas:e.maxFeePerBlobGas?BigInt(e.maxFeePerBlobGas):void 0,maxFeePerGas:e.maxFeePerGas?BigInt(e.maxFeePerGas):void 0,maxPriorityFeePerGas:e.maxPriorityFeePerGas?BigInt(e.maxPriorityFeePerGas):void 0,nonce:e.nonce?oe(e.nonce):void 0,to:e.to?e.to:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,type:e.type?Fo[e.type]:void 0,typeHex:e.type?e.type:void 0,value:e.value?BigInt(e.value):void 0,v:e.v?BigInt(e.v):void 0};return e.authorizationList&&(n.authorizationList=tc(e.authorizationList)),n.yParity=(()=>{if(e.yParity)return Number(e.yParity);if(typeof n.v=="bigint"){if(n.v===0n||n.v===27n)return 0;if(n.v===1n||n.v===28n)return 1;if(n.v>=35n)return n.v%2n===0n?1:0}})(),n.type==="legacy"&&(delete n.accessList,delete n.maxFeePerBlobGas,delete n.maxFeePerGas,delete n.maxPriorityFeePerGas,delete n.yParity),n.type==="eip2930"&&(delete n.maxFeePerBlobGas,delete n.maxFeePerGas,delete n.maxPriorityFeePerGas),n.type==="eip1559"&&delete n.maxFeePerBlobGas,n}const yl=fr("transaction",Qt);function tc(e){return e.map(t=>({address:t.address,chainId:Number(t.chainId),nonce:Number(t.nonce),r:t.r,s:t.s,yParity:Number(t.yParity)}))}function br(e,t){const n=(e.transactions??[]).map(r=>typeof r=="string"?r:Qt(r));return{...e,baseFeePerGas:e.baseFeePerGas?BigInt(e.baseFeePerGas):null,blobGasUsed:e.blobGasUsed?BigInt(e.blobGasUsed):void 0,difficulty:e.difficulty?BigInt(e.difficulty):void 0,excessBlobGas:e.excessBlobGas?BigInt(e.excessBlobGas):void 0,gasLimit:e.gasLimit?BigInt(e.gasLimit):void 0,gasUsed:e.gasUsed?BigInt(e.gasUsed):void 0,hash:e.hash?e.hash:null,logsBloom:e.logsBloom?e.logsBloom:null,nonce:e.nonce?e.nonce:null,number:e.number?BigInt(e.number):null,size:e.size?BigInt(e.size):void 0,timestamp:e.timestamp?BigInt(e.timestamp):void 0,transactions:n,totalDifficulty:e.totalDifficulty?BigInt(e.totalDifficulty):null}}const gl=fr("block",br);async function ae(e,{blockHash:t,blockNumber:n,blockTag:r=e.experimental_blockTag??"latest",includeTransactions:s}={}){var u,f,d;const o=s??!1,i=n!==void 0?T(n):void 0;let c=null;if(t?c=await e.request({method:"eth_getBlockByHash",params:[t,o]},{dedupe:!0}):c=await e.request({method:"eth_getBlockByNumber",params:[i||r,o]},{dedupe:!!i}),!c)throw new ko({blockHash:t,blockNumber:n});return(((d=(f=(u=e.chain)==null?void 0:u.formatters)==null?void 0:f.block)==null?void 0:d.format)||br)(c,"getBlock")}async function hr(e){const t=await e.request({method:"eth_gasPrice"});return BigInt(t)}async function nc(e,t){return Co(e,t)}async function Co(e,t){var o,i;const{block:n,chain:r=e.chain,request:s}=t||{};try{const c=((o=r==null?void 0:r.fees)==null?void 0:o.maxPriorityFeePerGas)??((i=r==null?void 0:r.fees)==null?void 0:i.defaultPriorityFee);if(typeof c=="function"){const u=n||await _(e,ae,"getBlock")({}),f=await c({block:u,client:e,request:s});if(f===null)throw new Error;return f}if(typeof c<"u")return c;const a=await e.request({method:"eth_maxPriorityFeePerGas"});return ce(a)}catch{const[c,a]=await Promise.all([n?Promise.resolve(n):_(e,ae,"getBlock")({}),_(e,hr,"getGasPrice")({})]);if(typeof c.baseFeePerGas!="bigint")throw new lr;const u=a-c.baseFeePerGas;return u<0n?0n:u}}async function rc(e,t){return jn(e,t)}async function jn(e,t){var l,b;const{block:n,chain:r=e.chain,request:s,type:o="eip1559"}=t||{},i=await(async()=>{var p,h;return typeof((p=r==null?void 0:r.fees)==null?void 0:p.baseFeeMultiplier)=="function"?r.fees.baseFeeMultiplier({block:n,client:e,request:s}):((h=r==null?void 0:r.fees)==null?void 0:h.baseFeeMultiplier)??1.2})();if(i<1)throw new No;const a=10**(((l=i.toString().split(".")[1])==null?void 0:l.length)??0),u=p=>p*BigInt(Math.ceil(i*a))/BigInt(a),f=n||await _(e,ae,"getBlock")({});if(typeof((b=r==null?void 0:r.fees)==null?void 0:b.estimateFeesPerGas)=="function"){const p=await r.fees.estimateFeesPerGas({block:n,client:e,multiply:u,request:s,type:o});if(p!==null)return p}if(o==="eip1559"){if(typeof f.baseFeePerGas!="bigint")throw new lr;const p=typeof(s==null?void 0:s.maxPriorityFeePerGas)=="bigint"?s.maxPriorityFeePerGas:await Co(e,{block:f,chain:r,request:s}),h=u(f.baseFeePerGas);return{maxFeePerGas:(s==null?void 0:s.maxFeePerGas)??h+p,maxPriorityFeePerGas:p}}return{gasPrice:(s==null?void 0:s.gasPrice)??u(await _(e,hr,"getGasPrice")({}))}}async function zo(e,{address:t,blockTag:n="latest",blockNumber:r}){const s=await e.request({method:"eth_getTransactionCount",params:[t,typeof r=="bigint"?T(r):n]},{dedupe:!!r});return oe(s)}function pr(e){const{kzg:t}=e,n=e.to??(typeof e.blobs[0]=="string"?"hex":"bytes"),r=typeof e.blobs[0]=="string"?e.blobs.map(o=>$e(o)):e.blobs,s=[];for(const o of r)s.push(Uint8Array.from(t.blobToKzgCommitment(o)));return n==="bytes"?s:s.map(o=>q(o))}function mr(e){const{kzg:t}=e,n=e.to??(typeof e.blobs[0]=="string"?"hex":"bytes"),r=typeof e.blobs[0]=="string"?e.blobs.map(i=>$e(i)):e.blobs,s=typeof e.commitments[0]=="string"?e.commitments.map(i=>$e(i)):e.commitments,o=[];for(let i=0;i<r.length;i++){const c=r[i],a=s[i];o.push(Uint8Array.from(t.computeBlobKzgProof(c,a)))}return n==="bytes"?o:o.map(i=>q(i))}function sc(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const s=BigInt(32),o=BigInt(4294967295),i=Number(n>>s&o),c=Number(n&o),a=r?4:0,u=r?0:4;e.setUint32(t+a,i,r),e.setUint32(t+u,c,r)}function oc(e,t,n){return e&t^~e&n}function ic(e,t,n){return e&t^e&n^t&n}class ac extends Ys{constructor(t,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(t),this.view=mn(this.buffer)}update(t){_t(this),t=Js(t),Xs(t);const{view:n,buffer:r,blockLen:s}=this,o=t.length;for(let i=0;i<o;){const c=Math.min(s-this.pos,o-i);if(c===s){const a=mn(t);for(;s<=o-i;i+=s)this.process(a,i);continue}r.set(t.subarray(i,i+c),this.pos),this.pos+=c,i+=c,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){_t(this),ra(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:o}=this;let{pos:i}=this;n[i++]=128,Lt(this.buffer.subarray(i)),this.padOffset>s-i&&(this.process(r,0),i=0);for(let d=i;d<s;d++)n[d]=0;sc(r,s-8,BigInt(this.length*8),o),this.process(r,0);const c=mn(t),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=a/4,f=this.get();if(u>f.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<u;d++)c.setUint32(4*d,f[d],o)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:o,destroyed:i,pos:c}=this;return t.destroyed=i,t.finished=o,t.length=s,t.pos=c,s%n&&t.buffer.set(r),t}clone(){return this._cloneInto()}}const Fe=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),cc=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ce=new Uint32Array(64);class uc extends ac{constructor(t=32){super(64,t,8,!1),this.A=Fe[0]|0,this.B=Fe[1]|0,this.C=Fe[2]|0,this.D=Fe[3]|0,this.E=Fe[4]|0,this.F=Fe[5]|0,this.G=Fe[6]|0,this.H=Fe[7]|0}get(){const{A:t,B:n,C:r,D:s,E:o,F:i,G:c,H:a}=this;return[t,n,r,s,o,i,c,a]}set(t,n,r,s,o,i,c,a){this.A=t|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=o|0,this.F=i|0,this.G=c|0,this.H=a|0}process(t,n){for(let d=0;d<16;d++,n+=4)Ce[d]=t.getUint32(n,!1);for(let d=16;d<64;d++){const l=Ce[d-15],b=Ce[d-2],p=pe(l,7)^pe(l,18)^l>>>3,h=pe(b,17)^pe(b,19)^b>>>10;Ce[d]=h+Ce[d-7]+p+Ce[d-16]|0}let{A:r,B:s,C:o,D:i,E:c,F:a,G:u,H:f}=this;for(let d=0;d<64;d++){const l=pe(c,6)^pe(c,11)^pe(c,25),b=f+l+oc(c,a,u)+cc[d]+Ce[d]|0,h=(pe(r,2)^pe(r,13)^pe(r,22))+ic(r,s,o)|0;f=u,u=a,a=c,c=i+b|0,i=o,o=s,s=r,r=b+h|0}r=r+this.A|0,s=s+this.B|0,o=o+this.C|0,i=i+this.D|0,c=c+this.E|0,a=a+this.F|0,u=u+this.G|0,f=f+this.H|0,this.set(r,s,o,i,c,a,u,f)}roundClean(){Lt(Ce)}destroy(){this.set(0,0,0,0,0,0,0,0),Lt(this.buffer)}}const Ro=sa(()=>new uc),fc=Ro;function dc(e,t){return fc(pt(e,{strict:!1})?Dt(e):e)}function lc(e){const{commitment:t,version:n=1}=e,r=e.to??(typeof t=="string"?"hex":"bytes"),s=dc(t);return s.set([n],0),r==="bytes"?s:q(s)}function Oo(e){const{commitments:t,version:n}=e,r=e.to??(typeof t[0]=="string"?"hex":"bytes"),s=[];for(const o of t)s.push(lc({commitment:o,to:r,version:n}));return s}const gs=6,_o=32,yr=4096,Lo=_o*yr,ws=Lo*gs-1-1*yr*gs,Mo=1;class bc extends L{constructor({maxSize:t,size:n}){super("Blob size is too large.",{metaMessages:[`Max: ${t} bytes`,`Given: ${n} bytes`],name:"BlobSizeTooLargeError"})}}class Go extends L{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}class hc extends L{constructor({hash:t,size:n}){super(`Versioned hash "${t}" size is invalid.`,{metaMessages:["Expected: 32",`Received: ${n}`],name:"InvalidVersionedHashSizeError"})}}class pc extends L{constructor({hash:t,version:n}){super(`Versioned hash "${t}" version is invalid.`,{metaMessages:[`Expected: ${Mo}`,`Received: ${n}`],name:"InvalidVersionedHashVersionError"})}}function mc(e){const t=e.to??(typeof e.data=="string"?"hex":"bytes"),n=typeof e.data=="string"?$e(e.data):e.data,r=ze(n);if(!r)throw new Go;if(r>ws)throw new bc({maxSize:ws,size:r});const s=[];let o=!0,i=0;for(;o;){const c=cr(new Uint8Array(Lo));let a=0;for(;a<yr;){const u=n.slice(i,i+(_o-1));if(c.pushByte(0),c.pushBytes(u),u.length<31){c.pushByte(128),o=!1;break}a++,i+=31}s.push(c)}return t==="bytes"?s.map(c=>c.bytes):s.map(c=>q(c.bytes))}function Uo(e){const{data:t,kzg:n,to:r}=e,s=e.blobs??mc({data:t,to:r}),o=e.commitments??pr({blobs:s,kzg:n,to:r}),i=e.proofs??mr({blobs:s,commitments:o,kzg:n,to:r}),c=[];for(let a=0;a<s.length;a++)c.push({blob:s[a],commitment:o[a],proof:i[a]});return c}function Ho(e){if(e.type)return e.type;if(typeof e.authorizationList<"u")return"eip7702";if(typeof e.blobs<"u"||typeof e.blobVersionedHashes<"u"||typeof e.maxFeePerBlobGas<"u"||typeof e.sidecars<"u")return"eip4844";if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")return"eip1559";if(typeof e.gasPrice<"u")return typeof e.accessList<"u"?"eip2930":"legacy";throw new O0({transaction:e})}function yc(e,{docsPath:t,...n}){const r=(()=>{const s=Yt(e,n);return s instanceof Et?e:s})();return new L0(r,{docsPath:t,...n})}async function gr(e){const t=await e.request({method:"eth_chainId"},{dedupe:!0});return oe(t)}async function jo(e,t){var A,k,z,S,F;const{account:n=e.account,accessList:r,authorizationList:s,chain:o=e.chain,blobVersionedHashes:i,blobs:c,data:a,gas:u,gasPrice:f,maxFeePerBlobGas:d,maxFeePerGas:l,maxPriorityFeePerGas:b,nonce:p,nonceManager:h,to:y,type:v,value:B,...g}=t,m=await(async()=>{if(!n||!h||typeof p<"u")return p;const N=te(n),U=o?o.id:await _(e,gr,"getChainId")({});return await h.consume({address:N.address,chainId:U,client:e})})();it(t);const w=(k=(A=o==null?void 0:o.formatters)==null?void 0:A.transactionRequest)==null?void 0:k.format,P=(w||$t)({...Jt(g,{format:w}),account:n?te(n):void 0,accessList:r,authorizationList:s,blobs:c,blobVersionedHashes:i,data:a,gas:u,gasPrice:f,maxFeePerBlobGas:d,maxFeePerGas:l,maxPriorityFeePerGas:b,nonce:m,to:y,type:v,value:B},"fillTransaction");try{const N=await e.request({method:"eth_fillTransaction",params:[P]}),x=(((S=(z=o==null?void 0:o.formatters)==null?void 0:z.transaction)==null?void 0:S.format)||Qt)(N.tx);delete x.blockHash,delete x.blockNumber,delete x.r,delete x.s,delete x.transactionIndex,delete x.v,delete x.yParity,x.data=x.input,x.gas&&(x.gas=t.gas??x.gas),x.gasPrice&&(x.gasPrice=t.gasPrice??x.gasPrice),x.maxFeePerBlobGas&&(x.maxFeePerBlobGas=t.maxFeePerBlobGas??x.maxFeePerBlobGas),x.maxFeePerGas&&(x.maxFeePerGas=t.maxFeePerGas??x.maxFeePerGas),x.maxPriorityFeePerGas&&(x.maxPriorityFeePerGas=t.maxPriorityFeePerGas??x.maxPriorityFeePerGas),x.nonce&&(x.nonce=t.nonce??x.nonce);const $=await(async()=>{var O,M;if(typeof((O=o==null?void 0:o.fees)==null?void 0:O.baseFeeMultiplier)=="function"){const H=await _(e,ae,"getBlock")({});return o.fees.baseFeeMultiplier({block:H,client:e,request:t})}return((M=o==null?void 0:o.fees)==null?void 0:M.baseFeeMultiplier)??1.2})();if($<1)throw new No;const I=10**(((F=$.toString().split(".")[1])==null?void 0:F.length)??0),C=O=>O*BigInt(Math.ceil($*I))/BigInt(I);return x.maxFeePerGas&&!t.maxFeePerGas&&(x.maxFeePerGas=C(x.maxFeePerGas)),x.gasPrice&&!t.gasPrice&&(x.gasPrice=C(x.gasPrice)),{raw:N.raw,transaction:{from:P.from,...x}}}catch(N){throw yc(N,{...t,chain:e.chain})}}const gc=["blobVersionedHashes","chainId","fees","gas","nonce","type"],xs=new Map,wn=new Qs(128);async function Do(e,t){const{account:n=e.account,chain:r,nonceManager:s,parameters:o=gc}=t;let i;async function c(){return i||(r?r.id:typeof t.chainId<"u"?t.chainId:(i=await _(e,gr,"getChainId")({}),i))}const a=n&&te(n);let u=t.nonce;if(o.includes("nonce")&&typeof u>"u"&&a&&s){const g=await c();u=await s.consume({address:a.address,chainId:g,client:e})}const d=wn.get(e.uid)!==!1&&["fees","gas"].some(g=>{var m;return(m=t.parameters)==null?void 0:m.includes(g)})?await _(e,jo,"fillTransaction")({...t,nonce:u}).then(g=>{const{chainId:m,from:w,gas:E,gasPrice:P,nonce:A,maxFeePerBlobGas:k,maxFeePerGas:z,maxPriorityFeePerGas:S,type:F}=g.transaction;return wn.set(e.uid,!0),{...t,...m?{chainId:m}:{},...w?{from:w}:{},...E?{gas:E}:{},...P?{gasPrice:P}:{},...A?{nonce:A}:{},...k?{maxFeePerBlobGas:k}:{},...z?{maxFeePerGas:z}:{},...S?{maxPriorityFeePerGas:S}:{},...F?{type:F}:{}}}).catch(g=>(g.walk(E=>{const P=E;return P.name==="MethodNotFoundRpcError"||P.name==="MethodNotSupportedRpcError"})&&wn.set(e.uid,!1),t)):t,{blobs:l,gas:b,kzg:p,type:h}=d;u??(u=d.nonce);const y={...d,...a?{from:a==null?void 0:a.address}:{},...u?{nonce:u}:{}};let v;async function B(){return v||(v=await _(e,ae,"getBlock")({blockTag:"latest"}),v)}if(o.includes("nonce")&&typeof u>"u"&&a&&!s&&(y.nonce=await _(e,zo,"getTransactionCount")({address:a.address,blockTag:"pending"})),(o.includes("blobVersionedHashes")||o.includes("sidecars"))&&l&&p){const g=pr({blobs:l,kzg:p});if(o.includes("blobVersionedHashes")){const m=Oo({commitments:g,to:"hex"});y.blobVersionedHashes=m}if(o.includes("sidecars")){const m=mr({blobs:l,commitments:g,kzg:p}),w=Uo({blobs:l,commitments:g,proofs:m,to:"hex"});y.sidecars=w}}if(o.includes("chainId")&&(y.chainId=await c()),(o.includes("fees")||o.includes("type"))&&typeof h>"u")try{y.type=Ho(y)}catch{let g=xs.get(e.uid);if(typeof g>"u"){const m=await B();g=typeof(m==null?void 0:m.baseFeePerGas)=="bigint",xs.set(e.uid,g)}y.type=g?"eip1559":"legacy"}if(o.includes("fees"))if(y.type!=="legacy"&&y.type!=="eip2930"){if(typeof y.maxFeePerGas>"u"||typeof y.maxPriorityFeePerGas>"u"){const g=await B(),{maxFeePerGas:m,maxPriorityFeePerGas:w}=await jn(e,{block:g,chain:r,request:y});if(typeof y.maxPriorityFeePerGas>"u"&&y.maxFeePerGas&&y.maxFeePerGas<w)throw new ec({maxPriorityFeePerGas:w});y.maxPriorityFeePerGas=w,y.maxFeePerGas=m}}else{if(typeof y.maxFeePerGas<"u"||typeof y.maxPriorityFeePerGas<"u")throw new lr;if(typeof y.gasPrice>"u"){const g=await B(),{gasPrice:m}=await jn(e,{block:g,chain:r,request:y,type:"legacy"});y.gasPrice=m}}return o.includes("gas")&&typeof b>"u"&&(y.gas=await _(e,wr,"estimateGas")({...y,account:a,prepare:(a==null?void 0:a.type)==="local"?[]:["blobVersionedHashes"]})),it(y),delete y.parameters,y}async function wr(e,t){var i,c,a;const{account:n=e.account,prepare:r=!0}=t,s=n?te(n):void 0,o=(()=>{if(Array.isArray(r))return r;if((s==null?void 0:s.type)!=="local")return["blobVersionedHashes"]})();try{const{accessList:u,authorizationList:f,blobs:d,blobVersionedHashes:l,blockNumber:b,blockTag:p,data:h,gas:y,gasPrice:v,maxFeePerBlobGas:B,maxFeePerGas:g,maxPriorityFeePerGas:m,nonce:w,value:E,stateOverride:P,...A}=r?await Do(e,{...t,parameters:o}):t,z=(typeof b=="bigint"?T(b):void 0)||p,S=dr(P),F=await(async()=>{if(A.to)return A.to;if(f&&f.length>0)return await To({authorization:f[0]}).catch(()=>{throw new L("`to` is required. Could not infer from `authorizationList`")})})();it(t);const N=(a=(c=(i=e.chain)==null?void 0:i.formatters)==null?void 0:c.transactionRequest)==null?void 0:a.format,x=(N||$t)({...Jt(A,{format:N}),account:s,accessList:u,authorizationList:f,blobs:d,blobVersionedHashes:l,data:h,gas:y,gasPrice:v,maxFeePerBlobGas:B,maxFeePerGas:g,maxPriorityFeePerGas:m,nonce:w,to:F,value:E},"estimateGas");return BigInt(await e.request({method:"eth_estimateGas",params:S?[x,z??e.experimental_blockTag??"latest",S]:z?[x,z]:[x]}))}catch(u){throw Y0(u,{...t,account:s,chain:e.chain})}}async function wc(e,t){const{abi:n,address:r,args:s,functionName:o,dataSuffix:i,...c}=t,a=he({abi:n,args:s,functionName:o});try{return await _(e,wr,"estimateGas")({data:`${a}${i?i.replace("0x",""):""}`,to:r,...c})}catch(u){const f=c.account?te(c.account):void 0;throw rt(u,{abi:n,address:r,args:s,docsPath:"/docs/contract/estimateContractGas",functionName:o,sender:f==null?void 0:f.address})}}function en(e,t){if(!ie(e,{strict:!1}))throw new ue({address:e});if(!ie(t,{strict:!1}))throw new ue({address:t});return e.toLowerCase()===t.toLowerCase()}const vs="/docs/contract/decodeEventLog";function xr(e){const{abi:t,data:n,strict:r,topics:s}=e,o=r??!0,[i,...c]=s;if(!i)throw new oa({docsPath:vs});const a=t.find(h=>h.type==="event"&&i===sr(qe(h)));if(!(a&&"name"in a)||a.type!=="event")throw new eo(i,{docsPath:vs});const{name:u,inputs:f}=a,d=f==null?void 0:f.some(h=>!("name"in h&&h.name)),l=d?[]:{},b=f.map((h,y)=>[h,y]).filter(([h])=>"indexed"in h&&h.indexed);for(let h=0;h<b.length;h++){const[y,v]=b[h],B=c[h];if(!B)throw new qt({abiItem:a,param:y});l[d?v:y.name||v]=xc({param:y,value:B})}const p=f.filter(h=>!("indexed"in h&&h.indexed));if(p.length>0){if(n&&n!=="0x")try{const h=It(p,n);if(h)if(d)for(let y=0;y<f.length;y++)l[y]=l[y]??h.shift();else for(let y=0;y<p.length;y++)l[p[y].name]=h[y]}catch(h){if(o)throw h instanceof Vs||h instanceof xo?new mt({abiItem:a,data:n,params:p,size:ze(n)}):h}else if(o)throw new mt({abiItem:a,data:"0x",params:p,size:0})}return{eventName:u,args:Object.values(l).length>0?l:void 0}}function xc({param:e,value:t}){return e.type==="string"||e.type==="bytes"||e.type==="tuple"||e.type.match(/^(.*)\[(\d+)?\]$/)?t:(It([e],t)||[])[0]}function vr(e){const{abi:t,args:n,logs:r,strict:s=!0}=e,o=(()=>{if(e.eventName)return Array.isArray(e.eventName)?e.eventName:[e.eventName]})();return r.map(i=>{var c;try{const a=t.find(f=>f.type==="event"&&i.topics[0]===sr(f));if(!a)return null;const u=xr({...i,abi:[a],strict:s});return o&&!o.includes(u.eventName)||!vc({args:u.args,inputs:a.inputs,matchArgs:n})?null:{...u,...i}}catch(a){let u,f;if(a instanceof eo)return null;if(a instanceof mt||a instanceof qt){if(s)return null;u=a.abiItem.name,f=(c=a.abiItem.inputs)==null?void 0:c.some(d=>!("name"in d&&d.name))}return{...i,args:f?[]:{},eventName:u}}}).filter(Boolean)}function vc(e){const{args:t,inputs:n,matchArgs:r}=e;if(!r)return!0;if(!t)return!1;function s(o,i,c){try{return o.type==="address"?en(i,c):o.type==="string"||o.type==="bytes"?Ge(Dt(i))===c:i===c}catch{return!1}}return Array.isArray(t)&&Array.isArray(r)?r.every((o,i)=>{if(o==null)return!0;const c=n[i];return c?(Array.isArray(o)?o:[o]).some(u=>s(c,u,t[i])):!1}):typeof t=="object"&&!Array.isArray(t)&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).every(([o,i])=>{if(i==null)return!0;const c=n.find(u=>u.name===o);return c?(Array.isArray(i)?i:[i]).some(u=>s(c,u,t[o])):!1}):!1}function Te(e,{args:t,eventName:n}={}){return{...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,logIndex:e.logIndex?Number(e.logIndex):null,transactionHash:e.transactionHash?e.transactionHash:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,...n?{args:t,eventName:n}:{}}}async function Pr(e,{address:t,blockHash:n,fromBlock:r,toBlock:s,event:o,events:i,args:c,strict:a}={}){const u=a??!1,f=i??(o?[o]:void 0);let d=[];f&&(d=[f.flatMap(h=>Bt({abi:[h],eventName:h.name,args:i?void 0:c}))],o&&(d=d[0]));let l;n?l=await e.request({method:"eth_getLogs",params:[{address:t,topics:d,blockHash:n}]}):l=await e.request({method:"eth_getLogs",params:[{address:t,topics:d,fromBlock:typeof r=="bigint"?T(r):r,toBlock:typeof s=="bigint"?T(s):s}]});const b=l.map(p=>Te(p));return f?vr({abi:f,args:c,logs:b,strict:u}):b}async function Vo(e,t){const{abi:n,address:r,args:s,blockHash:o,eventName:i,fromBlock:c,toBlock:a,strict:u}=t,f=i?st({abi:n,name:i}):void 0,d=f?void 0:n.filter(l=>l.type==="event");return _(e,Pr,"getLogs")({address:r,args:s,blockHash:o,event:f,events:d,fromBlock:c,toBlock:a,strict:u})}const xn="/docs/contract/decodeFunctionResult";function Ze(e){const{abi:t,args:n,functionName:r,data:s}=e;let o=t[0];if(r){const c=st({abi:t,args:n,name:r});if(!c)throw new Mt(r,{docsPath:xn});o=c}if(o.type!=="function")throw new Mt(void 0,{docsPath:xn});if(!o.outputs)throw new to(o.name,{docsPath:xn});const i=It(o.outputs,s);if(i&&i.length>1)return i;if(i&&i.length===1)return i[0]}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Er=BigInt(0),Dn=BigInt(1);function St(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function Br(e){if(!St(e))throw new Error("Uint8Array expected")}function gt(e,t){if(typeof t!="boolean")throw new Error(e+" boolean expected, got "+t)}function zt(e){const t=e.toString(16);return t.length&1?"0"+t:t}function qo(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?Er:BigInt("0x"+e)}const Zo=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",Pc=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function wt(e){if(Br(e),Zo)return e.toHex();let t="";for(let n=0;n<e.length;n++)t+=Pc[e[n]];return t}const xe={_0:48,_9:57,A:65,F:70,a:97,f:102};function Ps(e){if(e>=xe._0&&e<=xe._9)return e-xe._0;if(e>=xe.A&&e<=xe.F)return e-(xe.A-10);if(e>=xe.a&&e<=xe.f)return e-(xe.a-10)}function Ut(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);if(Zo)return Uint8Array.fromHex(e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let s=0,o=0;s<n;s++,o+=2){const i=Ps(e.charCodeAt(o)),c=Ps(e.charCodeAt(o+1));if(i===void 0||c===void 0){const a=e[o]+e[o+1];throw new Error('hex string expected, got non-hex character "'+a+'" at index '+o)}r[s]=i*16+c}return r}function Me(e){return qo(wt(e))}function Wo(e){return Br(e),qo(wt(Uint8Array.from(e).reverse()))}function Tt(e,t){return Ut(e.toString(16).padStart(t*2,"0"))}function Ko(e,t){return Tt(e,t).reverse()}function se(e,t,n){let r;if(typeof t=="string")try{r=Ut(t)}catch(o){throw new Error(e+" must be hex string or Uint8Array, cause: "+o)}else if(St(t))r=Uint8Array.from(t);else throw new Error(e+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(e+" of length "+n+" expected, got "+s);return r}function Ht(...e){let t=0;for(let r=0;r<e.length;r++){const s=e[r];Br(s),t+=s.length}const n=new Uint8Array(t);for(let r=0,s=0;r<e.length;r++){const o=e[r];n.set(o,s),s+=o.length}return n}const vn=e=>typeof e=="bigint"&&Er<=e;function Ir(e,t,n){return vn(e)&&vn(t)&&vn(n)&&t<=e&&e<n}function et(e,t,n,r){if(!Ir(t,n,r))throw new Error("expected valid "+e+": "+n+" <= n < "+r+", got "+t)}function Ec(e){let t;for(t=0;e>Er;e>>=Dn,t+=1);return t}const tn=e=>(Dn<<BigInt(e))-Dn,Pn=e=>new Uint8Array(e),Es=e=>Uint8Array.from(e);function Bc(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=Pn(e),s=Pn(e),o=0;const i=()=>{r.fill(1),s.fill(0),o=0},c=(...d)=>n(s,r,...d),a=(d=Pn(0))=>{s=c(Es([0]),d),r=c(),d.length!==0&&(s=c(Es([1]),d),r=c())},u=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const l=[];for(;d<t;){r=c();const b=r.slice();l.push(b),d+=r.length}return Ht(...l)};return(d,l)=>{i(),a(d);let b;for(;!(b=l(u()));)a();return i(),b}}const Ic={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||St(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function nn(e,t,n={}){const r=(s,o,i)=>{const c=Ic[o];if(typeof c!="function")throw new Error("invalid validator function");const a=e[s];if(!(i&&a===void 0)&&!c(a,e))throw new Error("param "+String(s)+" is invalid. Expected "+o+", got "+a)};for(const[s,o]of Object.entries(t))r(s,o,!1);for(const[s,o]of Object.entries(n))r(s,o,!0);return e}function Bs(e){const t=new WeakMap;return(n,...r)=>{const s=t.get(n);if(s!==void 0)return s;const o=e(n,...r);return t.set(n,o),o}}const Ac="0.1.1";function $c(){return Ac}class G extends Error{constructor(t,n={}){const r=(()=>{var a;if(n.cause instanceof G){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause&&"details"in n.cause&&typeof n.cause.details=="string"?n.cause.details:(a=n.cause)!=null&&a.message?n.cause.message:n.details})(),s=n.cause instanceof G&&n.cause.docsPath||n.docsPath,i=`https://oxlib.sh${s??""}`,c=[t||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||s?["",r?`Details: ${r}`:void 0,s?`See: ${i}`:void 0]:[]].filter(a=>typeof a=="string").join(`
`);super(c,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${$c()}`}),this.cause=n.cause,this.details=r,this.docs=i,this.docsPath=s,this.shortMessage=t}walk(t){return Yo(this,t)}}function Yo(e,t){return t!=null&&t(e)?e:e&&typeof e=="object"&&"cause"in e&&e.cause?Yo(e.cause,t):t?null:e}function Nt(e,t){if(Je(e)>t)throw new Dc({givenSize:Je(e),maxSize:t})}const ve={zero:48,nine:57,A:65,F:70,a:97,f:102};function Is(e){if(e>=ve.zero&&e<=ve.nine)return e-ve.zero;if(e>=ve.A&&e<=ve.F)return e-(ve.A-10);if(e>=ve.a&&e<=ve.f)return e-(ve.a-10)}function Sc(e,t={}){const{dir:n,size:r=32}=t;if(r===0)return e;if(e.length>r)throw new Vc({size:e.length,targetSize:r,type:"Bytes"});const s=new Uint8Array(r);for(let o=0;o<r;o++){const i=n==="right";s[i?o:r-o-1]=e[i?o:e.length-o-1]}return s}function Jo(e,t={}){const{dir:n="left"}=t;let r=e,s=0;for(let o=0;o<r.length-1&&r[n==="left"?o:r.length-o-1].toString()==="0";o++)s++;return r=n==="left"?r.slice(s):r.slice(0,r.length-s),r}function rn(e,t){if(ne(e)>t)throw new Jc({givenSize:ne(e),maxSize:t})}function Tc(e,t){if(typeof t=="number"&&t>0&&t>ne(e)-1)throw new ii({offset:t,position:"start",size:ne(e)})}function Nc(e,t,n){if(typeof t=="number"&&typeof n=="number"&&ne(e)!==n-t)throw new ii({offset:n,position:"end",size:ne(e)})}function Xo(e,t={}){const{dir:n,size:r=32}=t;if(r===0)return e;const s=e.replace("0x","");if(s.length>r*2)throw new Xc({size:Math.ceil(s.length/2),targetSize:r,type:"Hex"});return`0x${s[n==="right"?"padEnd":"padStart"](r*2,"0")}`}const kc="#__bigint";function Qo(e,t,n){return JSON.stringify(e,(r,s)=>typeof s=="bigint"?s.toString()+kc:s,n)}const Fc=new TextDecoder,Cc=new TextEncoder;function zc(e){return e instanceof Uint8Array?e:typeof e=="string"?ei(e):Rc(e)}function Rc(e){return e instanceof Uint8Array?e:new Uint8Array(e)}function ei(e,t={}){const{size:n}=t;let r=e;n&&(rn(e,n),r=De(e,n));let s=r.slice(2);s.length%2&&(s=`0${s}`);const o=s.length/2,i=new Uint8Array(o);for(let c=0,a=0;c<o;c++){const u=Is(s.charCodeAt(a++)),f=Is(s.charCodeAt(a++));if(u===void 0||f===void 0)throw new G(`Invalid byte sequence ("${s[a-2]}${s[a-1]}" in "${s}").`);i[c]=u*16+f}return i}function Oc(e,t={}){const{size:n}=t,r=Cc.encode(e);return typeof n=="number"?(Nt(r,n),_c(r,n)):r}function _c(e,t){return Sc(e,{dir:"right",size:t})}function Je(e){return e.length}function Lc(e,t,n,r={}){const{strict:s}=r;return e.slice(t,n)}function Mc(e,t={}){const{size:n}=t;typeof n<"u"&&Nt(e,n);const r=de(e,t);return ri(r,t)}function Gc(e,t={}){const{size:n}=t;let r=e;if(typeof n<"u"&&(Nt(r,n),r=ti(r)),r.length>1||r[0]>1)throw new jc(r);return!!r[0]}function Ie(e,t={}){const{size:n}=t;typeof n<"u"&&Nt(e,n);const r=de(e,t);return si(r,t)}function Uc(e,t={}){const{size:n}=t;let r=e;return typeof n<"u"&&(Nt(r,n),r=Hc(r)),Fc.decode(r)}function ti(e){return Jo(e,{dir:"left"})}function Hc(e){return Jo(e,{dir:"right"})}class jc extends G{constructor(t){super(`Bytes value \`${t}\` is not a valid boolean.`,{metaMessages:["The bytes array must contain a single byte of either a `0` or `1` value."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.InvalidBytesBooleanError"})}}let Dc=class extends G{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${t}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}},Vc=class extends G{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${t}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}};const qc=new TextEncoder,Zc=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Wc(e,t={}){const{strict:n=!1}=t;if(!e)throw new As(e);if(typeof e!="string")throw new As(e);if(n&&!/^0x[0-9a-fA-F]*$/.test(e))throw new $s(e);if(!e.startsWith("0x"))throw new $s(e)}function fe(...e){return`0x${e.reduce((t,n)=>t+n.replace("0x",""),"")}`}function Kc(e){return e instanceof Uint8Array?de(e):Array.isArray(e)?de(new Uint8Array(e)):e}function ni(e,t={}){const n=`0x${Number(e)}`;return typeof t.size=="number"?(rn(n,t.size),je(n,t.size)):n}function de(e,t={}){let n="";for(let s=0;s<e.length;s++)n+=Zc[e[s]];const r=`0x${n}`;return typeof t.size=="number"?(rn(r,t.size),De(r,t.size)):r}function K(e,t={}){const{signed:n,size:r}=t,s=BigInt(e);let o;r?n?o=(1n<<BigInt(r)*8n-1n)-1n:o=2n**(BigInt(r)*8n)-1n:typeof e=="number"&&(o=BigInt(Number.MAX_SAFE_INTEGER));const i=typeof o=="bigint"&&n?-o-1n:0;if(o&&s>o||s<i){const u=typeof e=="bigint"?"n":"";throw new oi({max:o?`${o}${u}`:void 0,min:`${i}${u}`,signed:n,size:r,value:`${e}${u}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?je(a,r):a}function Ar(e,t={}){return de(qc.encode(e),t)}function je(e,t){return Xo(e,{dir:"left",size:t})}function De(e,t){return Xo(e,{dir:"right",size:t})}function ge(e,t,n,r={}){const{strict:s}=r;Tc(e,t);const o=`0x${e.replace("0x","").slice((t??0)*2,(n??e.length)*2)}`;return s&&Nc(o,t,n),o}function ne(e){return Math.ceil((e.length-2)/2)}function ri(e,t={}){const{signed:n}=t;t.size&&rn(e,t.size);const r=BigInt(e);if(!n)return r;const s=(e.length-2)/2,o=(1n<<BigInt(s)*8n)-1n,i=o>>1n;return r<=i?r:r-o-1n}function si(e,t={}){const{signed:n,size:r}=t;return Number(!n&&!r?e:ri(e,t))}function Yc(e,t={}){const{strict:n=!1}=t;try{return Wc(e,{strict:n}),!0}catch{return!1}}class oi extends G{constructor({max:t,min:n,signed:r,size:s,value:o}){super(`Number \`${o}\` is not in safe${s?` ${s*8}-bit`:""}${r?" signed":" unsigned"} integer range ${t?`(\`${n}\` to \`${t}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}}class As extends G{constructor(t){super(`Value \`${typeof t=="object"?Qo(t):t}\` of type \`${typeof t}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}class $s extends G{constructor(t){super(`Value \`${t}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}class Jc extends G{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${t}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}}class ii extends G{constructor({offset:t,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${t}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}}class Xc extends G{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${t}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}}function Qc(e){return{address:e.address,amount:K(e.amount),index:K(e.index),validatorIndex:K(e.validatorIndex)}}function ai(e){return{...typeof e.baseFeePerGas=="bigint"&&{baseFeePerGas:K(e.baseFeePerGas)},...typeof e.blobBaseFee=="bigint"&&{blobBaseFee:K(e.blobBaseFee)},...typeof e.feeRecipient=="string"&&{feeRecipient:e.feeRecipient},...typeof e.gasLimit=="bigint"&&{gasLimit:K(e.gasLimit)},...typeof e.number=="bigint"&&{number:K(e.number)},...typeof e.prevRandao=="bigint"&&{prevRandao:K(e.prevRandao)},...typeof e.time=="bigint"&&{time:K(e.time)},...e.withdrawals&&{withdrawals:e.withdrawals.map(Qc)}}}const eu="0x82ad56cb",ci="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",tu="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe",nu="0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572",$r="0x608060405234801561001057600080fd5b506115b9806100206000396000f3fe6080604052600436106100f35760003560e01c80634d2301cc1161008a578063a8b0574e11610059578063a8b0574e14610325578063bce38bd714610350578063c3077fa914610380578063ee82ac5e146103b2576100f3565b80634d2301cc1461026257806372425d9d1461029f57806382ad56cb146102ca57806386d516e8146102fa576100f3565b80633408e470116100c65780633408e470146101af578063399542e9146101da5780633e64a6961461020c57806342cbb15c14610237576100f3565b80630f28c97d146100f8578063174dea7114610123578063252dba421461015357806327e86d6e14610184575b600080fd5b34801561010457600080fd5b5061010d6103ef565b60405161011a9190610c0a565b60405180910390f35b61013d60048036038101906101389190610c94565b6103f7565b60405161014a9190610e94565b60405180910390f35b61016d60048036038101906101689190610f0c565b610615565b60405161017b92919061101b565b60405180910390f35b34801561019057600080fd5b506101996107ab565b6040516101a69190611064565b60405180910390f35b3480156101bb57600080fd5b506101c46107b7565b6040516101d19190610c0a565b60405180910390f35b6101f460048036038101906101ef91906110ab565b6107bf565b6040516102039392919061110b565b60405180910390f35b34801561021857600080fd5b506102216107e1565b60405161022e9190610c0a565b60405180910390f35b34801561024357600080fd5b5061024c6107e9565b6040516102599190610c0a565b60405180910390f35b34801561026e57600080fd5b50610289600480360381019061028491906111a7565b6107f1565b6040516102969190610c0a565b60405180910390f35b3480156102ab57600080fd5b506102b4610812565b6040516102c19190610c0a565b60405180910390f35b6102e460048036038101906102df919061122a565b61081a565b6040516102f19190610e94565b60405180910390f35b34801561030657600080fd5b5061030f6109e4565b60405161031c9190610c0a565b60405180910390f35b34801561033157600080fd5b5061033a6109ec565b6040516103479190611286565b60405180910390f35b61036a600480360381019061036591906110ab565b6109f4565b6040516103779190610e94565b60405180910390f35b61039a60048036038101906103959190610f0c565b610ba6565b6040516103a99392919061110b565b60405180910390f35b3480156103be57600080fd5b506103d960048036038101906103d491906112cd565b610bca565b6040516103e69190611064565b60405180910390f35b600042905090565b60606000808484905090508067ffffffffffffffff81111561041c5761041b6112fa565b5b60405190808252806020026020018201604052801561045557816020015b610442610bd5565b81526020019060019003908161043a5790505b5092503660005b828110156105c957600085828151811061047957610478611329565b5b6020026020010151905087878381811061049657610495611329565b5b90506020028101906104a89190611367565b925060008360400135905080860195508360000160208101906104cb91906111a7565b73ffffffffffffffffffffffffffffffffffffffff16818580606001906104f2919061138f565b604051610500929190611431565b60006040518083038185875af1925050503d806000811461053d576040519150601f19603f3d011682016040523d82523d6000602084013e610542565b606091505b5083600001846020018290528215151515815250505081516020850135176105bc577f08c379a000000000000000000000000000000000000000000000000000000000600052602060045260176024527f4d756c746963616c6c333a2063616c6c206661696c656400000000000000000060445260846000fd5b826001019250505061045c565b5082341461060c576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610603906114a7565b60405180910390fd5b50505092915050565b6000606043915060008484905090508067ffffffffffffffff81111561063e5761063d6112fa565b5b60405190808252806020026020018201604052801561067157816020015b606081526020019060019003908161065c5790505b5091503660005b828110156107a157600087878381811061069557610694611329565b5b90506020028101906106a791906114c7565b92508260000160208101906106bc91906111a7565b73ffffffffffffffffffffffffffffffffffffffff168380602001906106e2919061138f565b6040516106f0929190611431565b6000604051808303816000865af19150503d806000811461072d576040519150601f19603f3d011682016040523d82523d6000602084013e610732565b606091505b5086848151811061074657610745611329565b5b60200260200101819052819250505080610795576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161078c9061153b565b60405180910390fd5b81600101915050610678565b5050509250929050565b60006001430340905090565b600046905090565b6000806060439250434091506107d68686866109f4565b905093509350939050565b600048905090565b600043905090565b60008173ffffffffffffffffffffffffffffffffffffffff16319050919050565b600044905090565b606060008383905090508067ffffffffffffffff81111561083e5761083d6112fa565b5b60405190808252806020026020018201604052801561087757816020015b610864610bd5565b81526020019060019003908161085c5790505b5091503660005b828110156109db57600084828151811061089b5761089a611329565b5b602002602001015190508686838181106108b8576108b7611329565b5b90506020028101906108ca919061155b565b92508260000160208101906108df91906111a7565b73ffffffffffffffffffffffffffffffffffffffff16838060400190610905919061138f565b604051610913929190611431565b6000604051808303816000865af19150503d8060008114610950576040519150601f19603f3d011682016040523d82523d6000602084013e610955565b606091505b5082600001836020018290528215151515815250505080516020840135176109cf577f08c379a000000000000000000000000000000000000000000000000000000000600052602060045260176024527f4d756c746963616c6c333a2063616c6c206661696c656400000000000000000060445260646000fd5b8160010191505061087e565b50505092915050565b600045905090565b600041905090565b606060008383905090508067ffffffffffffffff811115610a1857610a176112fa565b5b604051908082528060200260200182016040528015610a5157816020015b610a3e610bd5565b815260200190600190039081610a365790505b5091503660005b82811015610b9c576000848281518110610a7557610a74611329565b5b60200260200101519050868683818110610a9257610a91611329565b5b9050602002810190610aa491906114c7565b9250826000016020810190610ab991906111a7565b73ffffffffffffffffffffffffffffffffffffffff16838060200190610adf919061138f565b604051610aed929190611431565b6000604051808303816000865af19150503d8060008114610b2a576040519150601f19603f3d011682016040523d82523d6000602084013e610b2f565b606091505b508260000183602001829052821515151581525050508715610b90578060000151610b8f576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610b869061153b565b60405180910390fd5b5b81600101915050610a58565b5050509392505050565b6000806060610bb7600186866107bf565b8093508194508295505050509250925092565b600081409050919050565b6040518060400160405280600015158152602001606081525090565b6000819050919050565b610c0481610bf1565b82525050565b6000602082019050610c1f6000830184610bfb565b92915050565b600080fd5b600080fd5b600080fd5b600080fd5b600080fd5b60008083601f840112610c5457610c53610c2f565b5b8235905067ffffffffffffffff811115610c7157610c70610c34565b5b602083019150836020820283011115610c8d57610c8c610c39565b5b9250929050565b60008060208385031215610cab57610caa610c25565b5b600083013567ffffffffffffffff811115610cc957610cc8610c2a565b5b610cd585828601610c3e565b92509250509250929050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b60008115159050919050565b610d2281610d0d565b82525050565b600081519050919050565b600082825260208201905092915050565b60005b83811015610d62578082015181840152602081019050610d47565b83811115610d71576000848401525b50505050565b6000601f19601f8301169050919050565b6000610d9382610d28565b610d9d8185610d33565b9350610dad818560208601610d44565b610db681610d77565b840191505092915050565b6000604083016000830151610dd96000860182610d19565b5060208301518482036020860152610df18282610d88565b9150508091505092915050565b6000610e0a8383610dc1565b905092915050565b6000602082019050919050565b6000610e2a82610ce1565b610e348185610cec565b935083602082028501610e4685610cfd565b8060005b85811015610e825784840389528151610e638582610dfe565b9450610e6e83610e12565b925060208a01995050600181019050610e4a565b50829750879550505050505092915050565b60006020820190508181036000830152610eae8184610e1f565b905092915050565b60008083601f840112610ecc57610ecb610c2f565b5b8235905067ffffffffffffffff811115610ee957610ee8610c34565b5b602083019150836020820283011115610f0557610f04610c39565b5b9250929050565b60008060208385031215610f2357610f22610c25565b5b600083013567ffffffffffffffff811115610f4157610f40610c2a565b5b610f4d85828601610eb6565b92509250509250929050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b6000610f918383610d88565b905092915050565b6000602082019050919050565b6000610fb182610f59565b610fbb8185610f64565b935083602082028501610fcd85610f75565b8060005b858110156110095784840389528151610fea8582610f85565b9450610ff583610f99565b925060208a01995050600181019050610fd1565b50829750879550505050505092915050565b60006040820190506110306000830185610bfb565b81810360208301526110428184610fa6565b90509392505050565b6000819050919050565b61105e8161104b565b82525050565b60006020820190506110796000830184611055565b92915050565b61108881610d0d565b811461109357600080fd5b50565b6000813590506110a58161107f565b92915050565b6000806000604084860312156110c4576110c3610c25565b5b60006110d286828701611096565b935050602084013567ffffffffffffffff8111156110f3576110f2610c2a565b5b6110ff86828701610eb6565b92509250509250925092565b60006060820190506111206000830186610bfb565b61112d6020830185611055565b818103604083015261113f8184610e1f565b9050949350505050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b600061117482611149565b9050919050565b61118481611169565b811461118f57600080fd5b50565b6000813590506111a18161117b565b92915050565b6000602082840312156111bd576111bc610c25565b5b60006111cb84828501611192565b91505092915050565b60008083601f8401126111ea576111e9610c2f565b5b8235905067ffffffffffffffff81111561120757611206610c34565b5b60208301915083602082028301111561122357611222610c39565b5b9250929050565b6000806020838503121561124157611240610c25565b5b600083013567ffffffffffffffff81111561125f5761125e610c2a565b5b61126b858286016111d4565b92509250509250929050565b61128081611169565b82525050565b600060208201905061129b6000830184611277565b92915050565b6112aa81610bf1565b81146112b557600080fd5b50565b6000813590506112c7816112a1565b92915050565b6000602082840312156112e3576112e2610c25565b5b60006112f1848285016112b8565b91505092915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b600080fd5b600080fd5b600080fd5b60008235600160800383360303811261138357611382611358565b5b80830191505092915050565b600080833560016020038436030381126113ac576113ab611358565b5b80840192508235915067ffffffffffffffff8211156113ce576113cd61135d565b5b6020830192506001820236038313156113ea576113e9611362565b5b509250929050565b600081905092915050565b82818337600083830152505050565b600061141883856113f2565b93506114258385846113fd565b82840190509392505050565b600061143e82848661140c565b91508190509392505050565b600082825260208201905092915050565b7f4d756c746963616c6c333a2076616c7565206d69736d61746368000000000000600082015250565b6000611491601a8361144a565b915061149c8261145b565b602082019050919050565b600060208201905081810360008301526114c081611484565b9050919050565b6000823560016040038336030381126114e3576114e2611358565b5b80830191505092915050565b7f4d756c746963616c6c333a2063616c6c206661696c6564000000000000000000600082015250565b600061152560178361144a565b9150611530826114ef565b602082019050919050565b6000602082019050818103600083015261155481611518565b9050919050565b60008235600160600383360303811261157757611576611358565b5b8083019150509291505056fea264697066735822122020c1bc9aacf8e4a6507193432a895a8e77094f45a1395583f07b24e860ef06cd64736f6c634300080c0033";class Vn extends L{constructor({blockNumber:t,chain:n,contract:r}){super(`Chain "${n.name}" does not support contract "${r.name}".`,{metaMessages:["This could be due to any of the following:",...t&&r.blockCreated&&r.blockCreated>t?[`- The contract "${r.name}" was not deployed until block ${r.blockCreated} (current block ${t}).`]:[`- The chain does not have the contract "${r.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}class ui extends L{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}class sn extends L{constructor({chainId:t}){super(typeof t=="number"?`Chain ID "${t}" is invalid.`:"Chain ID is invalid.",{name:"InvalidChainIdError"})}}const En="/docs/contract/encodeDeployData";function Sr(e){const{abi:t,args:n,bytecode:r}=e;if(!n||n.length===0)return r;const s=t.find(i=>"type"in i&&i.type==="constructor");if(!s)throw new ia({docsPath:En});if(!("inputs"in s))throw new ts({docsPath:En});if(!s.inputs||s.inputs.length===0)throw new ts({docsPath:En});const o=vt(s.inputs,n);return be([r,o])}function at({blockNumber:e,chain:t,contract:n}){var s;const r=(s=t==null?void 0:t.contracts)==null?void 0:s[n];if(!r)throw new Vn({chain:t,contract:{name:n}});if(e&&r.blockCreated&&r.blockCreated>e)throw new Vn({blockNumber:e,chain:t,contract:{name:n,blockCreated:r.blockCreated}});return r.address}function fi(e,{docsPath:t,...n}){const r=(()=>{const s=Yt(e,n);return s instanceof Et?e:s})();return new Bo(r,{docsPath:t,...n})}async function on(e,t){var N,U,x,$;const{account:n=e.account,authorizationList:r,batch:s=!!((N=e.batch)!=null&&N.multicall),blockNumber:o,blockTag:i=e.experimental_blockTag??"latest",accessList:c,blobs:a,blockOverrides:u,code:f,data:d,factory:l,factoryData:b,gas:p,gasPrice:h,maxFeePerBlobGas:y,maxFeePerGas:v,maxPriorityFeePerGas:B,nonce:g,to:m,value:w,stateOverride:E,...P}=t,A=n?te(n):void 0;if(f&&(l||b))throw new L("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(f&&m)throw new L("Cannot provide both `code` & `to` as parameters.");const k=f&&d,z=l&&b&&m&&d,S=k||z,F=k?di({code:f,data:d}):z?ou({data:d,factory:l,factoryData:b,to:m}):d;try{it(t);const I=(typeof o=="bigint"?T(o):void 0)||i,C=u?ai(u):void 0,O=dr(E),M=($=(x=(U=e.chain)==null?void 0:U.formatters)==null?void 0:x.transactionRequest)==null?void 0:$.format,V=(M||$t)({...Jt(P,{format:M}),accessList:c,account:A,authorizationList:r,blobs:a,data:F,gas:p,gasPrice:h,maxFeePerBlobGas:y,maxFeePerGas:v,maxPriorityFeePerGas:B,nonce:g,to:S?void 0:m,value:w},"call");if(s&&ru({request:V})&&!O&&!C)try{return await su(e,{...V,blockNumber:o,blockTag:i})}catch(W){if(!(W instanceof ui)&&!(W instanceof Vn))throw W}const Z=(()=>{const W=[V,I];return O&&C?[...W,O,C]:O?[...W,O]:C?[...W,{},C]:W})(),j=await e.request({method:"eth_call",params:Z});return j==="0x"?{data:void 0}:{data:j}}catch(R){const I=iu(R),{offchainLookup:C,offchainLookupSignature:O}=await Ks(async()=>{const{offchainLookup:M,offchainLookupSignature:H}=await import("./index-B5l0aet7.js").then(V=>V.c);return{offchainLookup:M,offchainLookupSignature:H}},__vite__mapDeps([0,1,2]));if(e.ccipRead!==!1&&(I==null?void 0:I.slice(0,10))===O&&m)return{data:await C(e,{data:I,to:m})};throw S&&(I==null?void 0:I.slice(0,10))==="0x101bb98d"?new H0({factory:l}):fi(R,{...t,account:A,chain:e.chain})}}function ru({request:e}){const{data:t,to:n,...r}=e;return!(!t||t.startsWith(eu)||!n||Object.values(r).filter(s=>typeof s<"u").length>0)}async function su(e,t){var h;const{batchSize:n=1024,deployless:r=!1,wait:s=0}=typeof((h=e.batch)==null?void 0:h.multicall)=="object"?e.batch.multicall:{},{blockNumber:o,blockTag:i=e.experimental_blockTag??"latest",data:c,to:a}=t,u=(()=>{if(r)return null;if(t.multicallAddress)return t.multicallAddress;if(e.chain)return at({blockNumber:o,chain:e.chain,contract:"multicall3"});throw new ui})(),d=(typeof o=="bigint"?T(o):void 0)||i,{schedule:l}=aa({id:`${e.uid}.${d}`,wait:s,shouldSplitBatch(y){return y.reduce((B,{data:g})=>B+(g.length-2),0)>n*2},fn:async y=>{const v=y.map(m=>({allowFailure:!0,callData:m.data,target:m.to})),B=he({abi:Gt,args:[v],functionName:"aggregate3"}),g=await e.request({method:"eth_call",params:[{...u===null?{data:di({code:$r,data:B})}:{to:u,data:B}},d]});return Ze({abi:Gt,args:[v],functionName:"aggregate3",data:g||"0x"})}}),[{returnData:b,success:p}]=await l({data:c,to:a});if(!p)throw new Kt({data:b});return b==="0x"?{data:void 0}:{data:b}}function di(e){const{code:t,data:n}=e;return Sr({abi:yo(["constructor(bytes, bytes)"]),bytecode:ci,args:[t,n]})}function ou(e){const{data:t,factory:n,factoryData:r,to:s}=e;return Sr({abi:yo(["constructor(address, bytes, address, bytes)"]),bytecode:tu,args:[s,t,n,r]})}function iu(e){var n;if(!(e instanceof L))return;const t=e.walk();return typeof(t==null?void 0:t.data)=="object"?(n=t.data)==null?void 0:n.data:t.data}async function le(e,t){const{abi:n,address:r,args:s,functionName:o,...i}=t,c=he({abi:n,args:s,functionName:o});try{const{data:a}=await _(e,on,"call")({...i,data:c,to:r});return Ze({abi:n,args:s,functionName:o,data:a||"0x"})}catch(a){throw rt(a,{abi:n,address:r,args:s,docsPath:"/docs/contract/readContract",functionName:o})}}async function au(e,t){const{abi:n,address:r,args:s,dataSuffix:o,functionName:i,...c}=t,a=c.account?te(c.account):e.account,u=he({abi:n,args:s,functionName:i});try{const{data:f}=await _(e,on,"call")({batch:!1,data:`${u}${o?o.replace("0x",""):""}`,to:r,...c,account:a}),d=Ze({abi:n,args:s,functionName:i,data:f||"0x"}),l=n.filter(b=>"name"in b&&b.name===t.functionName);return{result:d,request:{abi:l,address:r,args:s,dataSuffix:o,functionName:i,...c,account:a}}}catch(f){throw rt(f,{abi:n,address:r,args:s,docsPath:"/docs/contract/simulateContract",functionName:i,sender:a==null?void 0:a.address})}}const Bn=new Map,Ss=new Map;let cu=0;function Ne(e,t,n){const r=++cu,s=()=>Bn.get(e)||[],o=()=>{const f=s();Bn.set(e,f.filter(d=>d.id!==r))},i=()=>{const f=s();if(!f.some(l=>l.id===r))return;const d=Ss.get(e);if(f.length===1&&d){const l=d();l instanceof Promise&&l.catch(()=>{})}o()},c=s();if(Bn.set(e,[...c,{id:r,fns:t}]),c&&c.length>0)return i;const a={};for(const f in t)a[f]=(...d)=>{var b,p;const l=s();if(l.length!==0)for(const h of l)(p=(b=h.fns)[f])==null||p.call(b,...d)};const u=n(a);return typeof u=="function"&&Ss.set(e,u),i}function ct(e,{emitOnBegin:t,initialWaitTime:n,interval:r}){let s=!0;const o=()=>s=!1;return(async()=>{let c;t&&(c=await e({unpoll:o}));const a=await(n==null?void 0:n(c))??r;await ns(a);const u=async()=>{s&&(await e({unpoll:o}),await ns(r),u())};u()})(),o}const uu=new Map,fu=new Map;function du(e){const t=(s,o)=>({clear:()=>o.delete(s),get:()=>o.get(s),set:i=>o.set(s,i)}),n=t(e,uu),r=t(e,fu);return{clear:()=>{n.clear(),r.clear()},promise:n,response:r}}async function lu(e,{cacheKey:t,cacheTime:n=Number.POSITIVE_INFINITY}){const r=du(t),s=r.response.get();if(s&&n>0&&Date.now()-s.created.getTime()<n)return s.data;let o=r.promise.get();o||(o=e(),r.promise.set(o));try{const i=await o;return r.response.set({created:new Date,data:i}),i}finally{r.promise.clear()}}const bu=e=>`blockNumber.${e}`;async function kt(e,{cacheTime:t=e.cacheTime}={}){const n=await lu(()=>e.request({method:"eth_blockNumber"}),{cacheKey:bu(e.uid),cacheTime:t});return BigInt(n)}async function an(e,{filter:t}){const n="strict"in t&&t.strict,r=await t.request({method:"eth_getFilterChanges",params:[t.id]});if(typeof r[0]=="string")return r;const s=r.map(o=>Te(o));return!("abi"in t)||!t.abi?s:vr({abi:t.abi,logs:s,strict:n})}async function cn(e,{filter:t}){return t.request({method:"eth_uninstallFilter",params:[t.id]})}function hu(e,t){const{abi:n,address:r,args:s,batch:o=!0,eventName:i,fromBlock:c,onError:a,onLogs:u,poll:f,pollingInterval:d=e.pollingInterval,strict:l}=t;return(typeof f<"u"?f:typeof c=="bigint"?!0:!(e.transport.type==="webSocket"||e.transport.type==="ipc"||e.transport.type==="fallback"&&(e.transport.transports[0].config.type==="webSocket"||e.transport.transports[0].config.type==="ipc")))?(()=>{const y=l??!1,v=we(["watchContractEvent",r,s,o,e.uid,i,d,y,c]);return Ne(v,{onLogs:u,onError:a},B=>{let g;c!==void 0&&(g=c-1n);let m,w=!1;const E=ct(async()=>{var P;if(!w){try{m=await _(e,go,"createContractEventFilter")({abi:n,address:r,args:s,eventName:i,strict:y,fromBlock:c})}catch{}w=!0;return}try{let A;if(m)A=await _(e,an,"getFilterChanges")({filter:m});else{const k=await _(e,kt,"getBlockNumber")({});g&&g<k?A=await _(e,Vo,"getContractEvents")({abi:n,address:r,args:s,eventName:i,fromBlock:g+1n,toBlock:k,strict:y}):A=[],g=k}if(A.length===0)return;if(o)B.onLogs(A);else for(const k of A)B.onLogs([k])}catch(A){m&&A instanceof ir&&(w=!1),(P=B.onError)==null||P.call(B,A)}},{emitOnBegin:!0,interval:d});return async()=>{m&&await _(e,cn,"uninstallFilter")({filter:m}),E()}})})():(()=>{const y=l??!1,v=we(["watchContractEvent",r,s,o,e.uid,i,d,y]);let B=!0,g=()=>B=!1;return Ne(v,{onLogs:u,onError:a},m=>((async()=>{try{const w=(()=>{if(e.transport.type==="fallback"){const A=e.transport.transports.find(k=>k.config.type==="webSocket"||k.config.type==="ipc");return A?A.value:e.transport}return e.transport})(),E=i?Bt({abi:n,eventName:i,args:s}):[],{unsubscribe:P}=await w.subscribe({params:["logs",{address:r,topics:E}],onData(A){var z;if(!B)return;const k=A.result;try{const{eventName:S,args:F}=xr({abi:n,data:k.data,topics:k.topics,strict:l}),N=Te(k,{args:F,eventName:S});m.onLogs([N])}catch(S){let F,N;if(S instanceof mt||S instanceof qt){if(l)return;F=S.abiItem.name,N=(z=S.abiItem.inputs)==null?void 0:z.some(x=>!("name"in x&&x.name))}const U=Te(k,{args:N?[]:{},eventName:F});m.onLogs([U])}},onError(A){var k;(k=m.onError)==null||k.call(m,A)}});g=P,B||g()}catch(w){a==null||a(w)}})(),()=>g()))})()}async function pu(e,{serializedTransaction:t}){return e.request({method:"eth_sendRawTransaction",params:[t]},{retryCount:0})}class mu extends L{constructor(t){super(`Call bundle failed with status: ${t.statusCode}`,{name:"BundleFailedError"}),Object.defineProperty(this,"result",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.result=t}}const li={"0x0":"reverted","0x1":"success"};function Tr(e,t){const n={...e,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,contractAddress:e.contractAddress?e.contractAddress:null,cumulativeGasUsed:e.cumulativeGasUsed?BigInt(e.cumulativeGasUsed):null,effectiveGasPrice:e.effectiveGasPrice?BigInt(e.effectiveGasPrice):null,gasUsed:e.gasUsed?BigInt(e.gasUsed):null,logs:e.logs?e.logs.map(r=>Te(r)):null,to:e.to?e.to:null,transactionIndex:e.transactionIndex?oe(e.transactionIndex):null,status:e.status?li[e.status]:null,type:e.type?Fo[e.type]||e.type:null};return e.blobGasPrice&&(n.blobGasPrice=BigInt(e.blobGasPrice)),e.blobGasUsed&&(n.blobGasUsed=BigInt(e.blobGasUsed)),n}const vl=fr("transactionReceipt",Tr),yu="0x5792579257925792579257925792579257925792579257925792579257925792",gu=T(0,{size:32});async function wu(e,t){async function n(f){if(f.endsWith(yu.slice(2))){const l=Ae(rs(f,-64,-32)),b=rs(f,0,-64).slice(2).match(/.{1,64}/g),p=await Promise.all(b.map(y=>gu.slice(2)!==y?e.request({method:"eth_getTransactionReceipt",params:[`0x${y}`]},{dedupe:!0}):void 0)),h=p.some(y=>y===null)?100:p.every(y=>(y==null?void 0:y.status)==="0x1")?200:p.every(y=>(y==null?void 0:y.status)==="0x0")?500:600;return{atomic:!1,chainId:oe(l),receipts:p.filter(Boolean),status:h,version:"2.0.0"}}return e.request({method:"wallet_getCallsStatus",params:[f]})}const{atomic:r=!1,chainId:s,receipts:o,version:i="2.0.0",...c}=await n(t.id),[a,u]=(()=>{const f=c.status;return f>=100&&f<200?["pending",f]:f>=200&&f<300?["success",f]:f>=300&&f<700?["failure",f]:f==="CONFIRMED"?["success",200]:f==="PENDING"?["pending",100]:[void 0,f]})();return{...c,atomic:r,chainId:s?oe(s):void 0,receipts:(o==null?void 0:o.map(f=>({...f,blockNumber:ce(f.blockNumber),gasUsed:ce(f.gasUsed),status:li[f.status]})))??[],statusCode:u,status:a,version:i}}async function Pl(e,t){const{id:n,pollingInterval:r=e.pollingInterval,status:s=({statusCode:h})=>h===200||h>=300,retryCount:o=4,retryDelay:i=({count:h})=>~~(1<<h)*200,timeout:c=6e4,throwOnFailure:a=!1}=t,u=we(["waitForCallsStatus",e.uid,n]),{promise:f,resolve:d,reject:l}=no();let b;const p=Ne(u,{resolve:d,reject:l},h=>{const y=ct(async()=>{const v=B=>{clearTimeout(b),y(),B(),p()};try{const B=await Rn(async()=>{const g=await _(e,wu,"getCallsStatus")({id:n});if(a&&g.status==="failure")throw new mu(g);return g},{retryCount:o,delay:i});if(!s(B))return;v(()=>h.resolve(B))}catch(B){v(()=>h.reject(B))}},{interval:r,emitOnBegin:!0});return y});return b=c?setTimeout(()=>{p(),clearTimeout(b),l(new xu({id:n}))},c):void 0,await f}class xu extends L{constructor({id:t}){super(`Timed out while waiting for call bundle with id "${t}" to be confirmed.`,{name:"WaitForCallsStatusTimeoutError"})}}function vu(e){const{batch:t,chain:n,ccipRead:r,key:s="base",name:o="Base Client",type:i="base"}=e,c=e.experimental_blockTag??(typeof(n==null?void 0:n.experimental_preconfirmationTime)=="number"?"pending":void 0),a=(n==null?void 0:n.blockTime)??12e3,u=Math.min(Math.max(Math.floor(a/2),500),4e3),f=e.pollingInterval??u,d=e.cacheTime??f,l=e.account?te(e.account):void 0,{config:b,request:p,value:h}=e.transport({account:l,chain:n,pollingInterval:f}),y={...b,...h},v={account:l,batch:t,cacheTime:d,ccipRead:r,chain:n,key:s,name:o,pollingInterval:f,request:p,transport:y,type:i,uid:ca(),...c?{experimental_blockTag:c}:{}};function B(g){return m=>{const w=m(g);for(const P in v)delete w[P];const E={...g,...w};return Object.assign(E,{extend:B(E)})}}return Object.assign(v,{extend:B(v)})}function Nr(e){var n,r,s,o,i,c;if(!(e instanceof L))return!1;const t=e.walk(a=>a instanceof Hn);return t instanceof Hn?((n=t.data)==null?void 0:n.errorName)==="HttpError"||((r=t.data)==null?void 0:r.errorName)==="ResolverError"||((s=t.data)==null?void 0:s.errorName)==="ResolverNotContract"||((o=t.data)==null?void 0:o.errorName)==="ResolverNotFound"||((i=t.data)==null?void 0:i.errorName)==="ReverseAddressMismatch"||((c=t.data)==null?void 0:c.errorName)==="UnsupportedResolverProfile":!1}function Pu(e){const{abi:t,data:n}=e,r=ht(n,0,4),s=t.find(o=>o.type==="function"&&r===or(qe(o)));if(!s)throw new ua(r,{docsPath:"/docs/contract/decodeFunctionData"});return{functionName:s.name,args:"inputs"in s&&s.inputs&&s.inputs.length>0?It(s.inputs,ht(n,4)):void 0}}const In="/docs/contract/encodeErrorResult";function Ts(e){const{abi:t,errorName:n,args:r}=e;let s=t[0];if(n){const a=st({abi:t,args:r,name:n});if(!a)throw new ss(n,{docsPath:In});s=a}if(s.type!=="error")throw new ss(void 0,{docsPath:In});const o=qe(s),i=or(o);let c="0x";if(r&&r.length>0){if(!s.inputs)throw new fa(s.name,{docsPath:In});c=vt(s.inputs,r)}return be([i,c])}const An="/docs/contract/encodeFunctionResult";function Eu(e){const{abi:t,functionName:n,result:r}=e;let s=t[0];if(n){const i=st({abi:t,name:n});if(!i)throw new Mt(n,{docsPath:An});s=i}if(s.type!=="function")throw new Mt(void 0,{docsPath:An});if(!s.outputs)throw new to(s.name,{docsPath:An});const o=(()=>{if(s.outputs.length===0)return[];if(s.outputs.length===1)return[r];if(Array.isArray(r))return r;throw new da(r)})();return vt(s.outputs,o)}const un="x-batch-gateway:true";async function Bu(e){const{data:t,ccipRequest:n}=e,{args:[r]}=Pu({abi:On,data:t}),s=[],o=[];return await Promise.all(r.map(async(i,c)=>{try{o[c]=i.urls.includes(un)?await Bu({data:i.data,ccipRequest:n}):await n(i),s[c]=!1}catch(a){s[c]=!0,o[c]=Iu(a)}})),Eu({abi:On,functionName:"query",result:[s,o]})}function Iu(e){return e.name==="HttpRequestError"&&e.status?Ts({abi:On,errorName:"HttpError",args:[e.status,e.shortMessage]}):Ts({abi:[wo],errorName:"Error",args:["shortMessage"in e?e.shortMessage:e.message]})}function bi(e){if(e.length!==66||e.indexOf("[")!==0||e.indexOf("]")!==65)return null;const t=`0x${e.slice(1,65)}`;return pt(t)?t:null}function qn(e){let t=new Uint8Array(32).fill(0);if(!e)return q(t);const n=e.split(".");for(let r=n.length-1;r>=0;r-=1){const s=bi(n[r]),o=s?Dt(s):Ge(bt(n[r]),"bytes");t=Ge(ro([t,o]),"bytes")}return q(t)}function Au(e){return`[${e.slice(2)}]`}function $u(e){const t=new Uint8Array(32).fill(0);return e?bi(e)||Ge(bt(e)):q(t)}function kr(e){const t=e.replace(/^\.|\.$/gm,"");if(t.length===0)return new Uint8Array(1);const n=new Uint8Array(bt(t).byteLength+2);let r=0;const s=t.split(".");for(let o=0;o<s.length;o++){let i=bt(s[o]);i.byteLength>255&&(i=bt(Au($u(s[o])))),n[r]=i.length,n.set(i,r+1),r+=i.length+1}return n.byteLength!==r+1?n.slice(0,r+1):n}async function Su(e,t){const{blockNumber:n,blockTag:r,coinType:s,name:o,gatewayUrls:i,strict:c}=t,{chain:a}=e,u=(()=>{if(t.universalResolverAddress)return t.universalResolverAddress;if(!a)throw new Error("client chain not configured. universalResolverAddress is required.");return at({blockNumber:n,chain:a,contract:"ensUniversalResolver"})})(),f=a==null?void 0:a.ensTlds;if(f&&!f.some(l=>o.endsWith(l)))return null;const d=s!=null?[qn(o),BigInt(s)]:[qn(o)];try{const l=he({abi:os,functionName:"addr",args:d}),b={address:u,abi:so,functionName:"resolveWithGateways",args:[Ue(kr(o)),l,i??[un]],blockNumber:n,blockTag:r},h=await _(e,le,"readContract")(b);if(h[0]==="0x")return null;const y=Ze({abi:os,args:d,functionName:"addr",data:h[0]});return y==="0x"||Ae(y)==="0x00"?null:y}catch(l){if(c)throw l;if(Nr(l))return null;throw l}}class Tu extends L{constructor({data:t}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(t)}`],name:"EnsAvatarInvalidMetadataError"})}}class lt extends L{constructor({reason:t}){super(`ENS NFT avatar URI is invalid. ${t}`,{name:"EnsAvatarInvalidNftUriError"})}}class Fr extends L{constructor({uri:t}){super(`Unable to resolve ENS avatar URI "${t}". The URI may be malformed, invalid, or does not respond with a valid image.`,{name:"EnsAvatarUriResolutionError"})}}class Nu extends L{constructor({namespace:t}){super(`ENS NFT avatar namespace "${t}" is not supported. Must be "erc721" or "erc1155".`,{name:"EnsAvatarUnsupportedNamespaceError"})}}const ku=/(?<protocol>https?:\/\/[^/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,Fu=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,Cu=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,zu=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function Ru(e){try{const t=await fetch(e,{method:"HEAD"});if(t.status===200){const n=t.headers.get("content-type");return n==null?void 0:n.startsWith("image/")}return!1}catch(t){return typeof t=="object"&&typeof t.response<"u"||!Object.hasOwn(globalThis,"Image")?!1:new Promise(n=>{const r=new Image;r.onload=()=>{n(!0)},r.onerror=()=>{n(!1)},r.src=e})}}function Ns(e,t){return e?e.endsWith("/")?e.slice(0,-1):e:t}function hi({uri:e,gatewayUrls:t}){const n=Cu.test(e);if(n)return{uri:e,isOnChain:!0,isEncoded:n};const r=Ns(t==null?void 0:t.ipfs,"https://ipfs.io"),s=Ns(t==null?void 0:t.arweave,"https://arweave.net"),o=e.match(ku),{protocol:i,subpath:c,target:a,subtarget:u=""}=(o==null?void 0:o.groups)||{},f=i==="ipns:/"||c==="ipns/",d=i==="ipfs:/"||c==="ipfs/"||Fu.test(e);if(e.startsWith("http")&&!f&&!d){let b=e;return t!=null&&t.arweave&&(b=e.replace(/https:\/\/arweave.net/g,t==null?void 0:t.arweave)),{uri:b,isOnChain:!1,isEncoded:!1}}if((f||d)&&a)return{uri:`${r}/${f?"ipns":"ipfs"}/${a}${u}`,isOnChain:!1,isEncoded:!1};if(i==="ar:/"&&a)return{uri:`${s}/${a}${u||""}`,isOnChain:!1,isEncoded:!1};let l=e.replace(zu,"");if(l.startsWith("<svg")&&(l=`data:image/svg+xml;base64,${btoa(l)}`),l.startsWith("data:")||l.startsWith("{"))return{uri:l,isOnChain:!0,isEncoded:!1};throw new Fr({uri:e})}function pi(e){if(typeof e!="object"||!("image"in e)&&!("image_url"in e)&&!("image_data"in e))throw new Tu({data:e});return e.image||e.image_url||e.image_data}async function Ou({gatewayUrls:e,uri:t}){try{const n=await fetch(t).then(s=>s.json());return await Cr({gatewayUrls:e,uri:pi(n)})}catch{throw new Fr({uri:t})}}async function Cr({gatewayUrls:e,uri:t}){const{uri:n,isOnChain:r}=hi({uri:t,gatewayUrls:e});if(r||await Ru(n))return n;throw new Fr({uri:t})}function _u(e){let t=e;t.startsWith("did:nft:")&&(t=t.replace("did:nft:","").replace(/_/g,"/"));const[n,r,s]=t.split("/"),[o,i]=n.split(":"),[c,a]=r.split(":");if(!o||o.toLowerCase()!=="eip155")throw new lt({reason:"Only EIP-155 supported"});if(!i)throw new lt({reason:"Chain ID not found"});if(!a)throw new lt({reason:"Contract address not found"});if(!s)throw new lt({reason:"Token ID not found"});if(!c)throw new lt({reason:"ERC namespace not found"});return{chainID:Number.parseInt(i,10),namespace:c.toLowerCase(),contractAddress:a,tokenID:s}}async function Lu(e,{nft:t}){if(t.namespace==="erc721")return le(e,{address:t.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(t.tokenID)]});if(t.namespace==="erc1155")return le(e,{address:t.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(t.tokenID)]});throw new Nu({namespace:t.namespace})}async function Mu(e,{gatewayUrls:t,record:n}){return/eip155:/i.test(n)?Gu(e,{gatewayUrls:t,record:n}):Cr({uri:n,gatewayUrls:t})}async function Gu(e,{gatewayUrls:t,record:n}){const r=_u(n),s=await Lu(e,{nft:r}),{uri:o,isOnChain:i,isEncoded:c}=hi({uri:s,gatewayUrls:t});if(i&&(o.includes("data:application/json;base64,")||o.startsWith("{"))){const u=c?atob(o.replace("data:application/json;base64,","")):o,f=JSON.parse(u);return Cr({uri:pi(f),gatewayUrls:t})}let a=r.tokenID;return r.namespace==="erc1155"&&(a=a.replace("0x","").padStart(64,"0")),Ou({gatewayUrls:t,uri:o.replace(/(?:0x)?{id}/,a)})}async function mi(e,t){const{blockNumber:n,blockTag:r,key:s,name:o,gatewayUrls:i,strict:c}=t,{chain:a}=e,u=(()=>{if(t.universalResolverAddress)return t.universalResolverAddress;if(!a)throw new Error("client chain not configured. universalResolverAddress is required.");return at({blockNumber:n,chain:a,contract:"ensUniversalResolver"})})(),f=a==null?void 0:a.ensTlds;if(f&&!f.some(d=>o.endsWith(d)))return null;try{const d={address:u,abi:so,args:[Ue(kr(o)),he({abi:is,functionName:"text",args:[qn(o),s]}),i??[un]],functionName:"resolveWithGateways",blockNumber:n,blockTag:r},b=await _(e,le,"readContract")(d);if(b[0]==="0x")return null;const p=Ze({abi:is,functionName:"text",data:b[0]});return p===""?null:p}catch(d){if(c)throw d;if(Nr(d))return null;throw d}}async function Uu(e,{blockNumber:t,blockTag:n,assetGatewayUrls:r,name:s,gatewayUrls:o,strict:i,universalResolverAddress:c}){const a=await _(e,mi,"getEnsText")({blockNumber:t,blockTag:n,key:"avatar",name:s,universalResolverAddress:c,gatewayUrls:o,strict:i});if(!a)return null;try{return await Mu(e,{record:a,gatewayUrls:r})}catch{return null}}async function Hu(e,t){const{address:n,blockNumber:r,blockTag:s,coinType:o=60n,gatewayUrls:i,strict:c}=t,{chain:a}=e,u=(()=>{if(t.universalResolverAddress)return t.universalResolverAddress;if(!a)throw new Error("client chain not configured. universalResolverAddress is required.");return at({blockNumber:r,chain:a,contract:"ensUniversalResolver"})})();try{const f={address:u,abi:la,args:[n,o,i??[un]],functionName:"reverseWithGateways",blockNumber:r,blockTag:s},d=_(e,le,"readContract"),[l]=await d(f);return l||null}catch(f){if(c)throw f;if(Nr(f))return null;throw f}}async function ju(e,t){const{blockNumber:n,blockTag:r,name:s}=t,{chain:o}=e,i=(()=>{if(t.universalResolverAddress)return t.universalResolverAddress;if(!o)throw new Error("client chain not configured. universalResolverAddress is required.");return at({blockNumber:n,chain:o,contract:"ensUniversalResolver"})})(),c=o==null?void 0:o.ensTlds;if(c&&!c.some(u=>s.endsWith(u)))throw new Error(`${s} is not a valid ENS TLD (${c==null?void 0:c.join(", ")}) for chain "${o.name}" (id: ${o.id}).`);const[a]=await _(e,le,"readContract")({address:i,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"},{type:"uint256"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[Ue(kr(s))],blockNumber:n,blockTag:r});return a}async function yi(e,t){var y,v,B;const{account:n=e.account,blockNumber:r,blockTag:s="latest",blobs:o,data:i,gas:c,gasPrice:a,maxFeePerBlobGas:u,maxFeePerGas:f,maxPriorityFeePerGas:d,to:l,value:b,...p}=t,h=n?te(n):void 0;try{it(t);const m=(typeof r=="bigint"?T(r):void 0)||s,w=(B=(v=(y=e.chain)==null?void 0:y.formatters)==null?void 0:v.transactionRequest)==null?void 0:B.format,P=(w||$t)({...Jt(p,{format:w}),account:h,blobs:o,data:i,gas:c,gasPrice:a,maxFeePerBlobGas:u,maxFeePerGas:f,maxPriorityFeePerGas:d,to:l,value:b},"createAccessList"),A=await e.request({method:"eth_createAccessList",params:[P,m]});return{accessList:A.accessList,gasUsed:BigInt(A.gasUsed)}}catch(g){throw fi(g,{...t,account:h,chain:e.chain})}}async function Du(e){const t=Wt(e,{method:"eth_newBlockFilter"}),n=await e.request({method:"eth_newBlockFilter"});return{id:n,request:t(n),type:"block"}}async function gi(e,{address:t,args:n,event:r,events:s,fromBlock:o,strict:i,toBlock:c}={}){const a=s??(r?[r]:void 0),u=Wt(e,{method:"eth_newFilter"});let f=[];a&&(f=[a.flatMap(b=>Bt({abi:[b],eventName:b.name,args:n}))],r&&(f=f[0]));const d=await e.request({method:"eth_newFilter",params:[{address:t,fromBlock:typeof o=="bigint"?T(o):o,toBlock:typeof c=="bigint"?T(c):c,...f.length?{topics:f}:{}}]});return{abi:a,args:n,eventName:r?r.name:void 0,fromBlock:o,id:d,request:u(d),strict:!!i,toBlock:c,type:"event"}}async function wi(e){const t=Wt(e,{method:"eth_newPendingTransactionFilter"}),n=await e.request({method:"eth_newPendingTransactionFilter"});return{id:n,request:t(n),type:"transaction"}}async function Vu(e,{address:t,blockNumber:n,blockTag:r=e.experimental_blockTag??"latest"}){const s=typeof n=="bigint"?T(n):void 0,o=await e.request({method:"eth_getBalance",params:[t,s||r]});return BigInt(o)}async function qu(e){const t=await e.request({method:"eth_blobBaseFee"});return BigInt(t)}async function Zu(e,{blockHash:t,blockNumber:n,blockTag:r="latest"}={}){const s=n!==void 0?T(n):void 0;let o;return t?o=await e.request({method:"eth_getBlockTransactionCountByHash",params:[t]},{dedupe:!0}):o=await e.request({method:"eth_getBlockTransactionCountByNumber",params:[s||r]},{dedupe:!!s}),oe(o)}async function Zn(e,{address:t,blockNumber:n,blockTag:r="latest"}){const s=n!==void 0?T(n):void 0,o=await e.request({method:"eth_getCode",params:[t,s||r]},{dedupe:!!s});if(o!=="0x")return o}class Wu extends L{constructor({address:t}){super(`No EIP-712 domain found on contract "${t}".`,{metaMessages:["Ensure that:",`- The contract is deployed at the address "${t}".`,"- `eip712Domain()` function exists on the contract.","- `eip712Domain()` function matches signature to ERC-5267 specification."],name:"Eip712DomainNotFoundError"})}}async function Ku(e,t){const{address:n,factory:r,factoryData:s}=t;try{const[o,i,c,a,u,f,d]=await _(e,le,"readContract")({abi:Yu,address:n,functionName:"eip712Domain",factory:r,factoryData:s});return{domain:{name:i,version:c,chainId:Number(a),verifyingContract:u,salt:f},extensions:d,fields:o}}catch(o){const i=o;throw i.name==="ContractFunctionExecutionError"&&i.cause.name==="ContractFunctionZeroDataError"?new Wu({address:n}):i}}const Yu=[{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"}];function Ju(e){var t;return{baseFeePerGas:e.baseFeePerGas.map(n=>BigInt(n)),gasUsedRatio:e.gasUsedRatio,oldestBlock:BigInt(e.oldestBlock),reward:(t=e.reward)==null?void 0:t.map(n=>n.map(r=>BigInt(r)))}}async function Xu(e,{blockCount:t,blockNumber:n,blockTag:r="latest",rewardPercentiles:s}){const o=typeof n=="bigint"?T(n):void 0,i=await e.request({method:"eth_feeHistory",params:[T(t),o||r,s]},{dedupe:!!o});return Ju(i)}async function Qu(e,{filter:t}){const n=t.strict??!1,s=(await t.request({method:"eth_getFilterLogs",params:[t.id]})).map(o=>Te(o));return t.abi?vr({abi:t.abi,logs:s,strict:n}):s}function El(e,t){if(e.length!==t.length)throw new ba({expectedLength:e.length,givenLength:t.length});const n=[];for(let r=0;r<e.length;r++){const s=e[r],o=t[r];n.push(xi(s,o))}return be(n)}function xi(e,t,n=!1){if(e==="address"){const i=t;if(!ie(i))throw new ue({address:i});return yn(i.toLowerCase(),{size:n?32:null})}if(e==="string")return ha(t);if(e==="bytes")return t;if(e==="bool")return yn(pa(t),{size:n?32:1});const r=e.match(ma);if(r){const[i,c,a="256"]=r,u=Number.parseInt(a,10)/8;return T(t,{size:n?32:u,signed:c==="int"})}const s=e.match(ya);if(s){const[i,c]=s;if(Number.parseInt(c,10)!==(t.length-2)/2)throw new ga({expectedSize:Number.parseInt(c,10),givenSize:(t.length-2)/2});return yn(t,{dir:"right",size:n?32:null})}const o=e.match(wa);if(o&&Array.isArray(t)){const[i,c]=o,a=[];for(let u=0;u<t.length;u++)a.push(xi(c,t[u],!0));return a.length===0?"0x":be(a)}throw new xa(e)}function ef(e){const{authorizationList:t}=e;if(t)for(const n of t){const{chainId:r}=n,s=n.address;if(!ie(s))throw new ue({address:s});if(r<0)throw new sn({chainId:r})}zr(e)}function tf(e){const{blobVersionedHashes:t}=e;if(t){if(t.length===0)throw new Go;for(const n of t){const r=ze(n),s=oe(ht(n,0,1));if(r!==32)throw new hc({hash:n,size:r});if(s!==Mo)throw new pc({hash:n,version:s})}}zr(e)}function zr(e){const{chainId:t,maxPriorityFeePerGas:n,maxFeePerGas:r,to:s}=e;if(t<=0)throw new sn({chainId:t});if(s&&!ie(s))throw new ue({address:s});if(r&&r>Xt)throw new nt({maxFeePerGas:r});if(n&&r&&n>r)throw new Ot({maxFeePerGas:r,maxPriorityFeePerGas:n})}function nf(e){const{chainId:t,maxPriorityFeePerGas:n,gasPrice:r,maxFeePerGas:s,to:o}=e;if(t<=0)throw new sn({chainId:t});if(o&&!ie(o))throw new ue({address:o});if(n||s)throw new L("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid EIP-2930 Transaction attribute.");if(r&&r>Xt)throw new nt({maxFeePerGas:r})}function rf(e){const{chainId:t,maxPriorityFeePerGas:n,gasPrice:r,maxFeePerGas:s,to:o}=e;if(o&&!ie(o))throw new ue({address:o});if(typeof t<"u"&&t<=0)throw new sn({chainId:t});if(n||s)throw new L("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid Legacy Transaction attribute.");if(r&&r>Xt)throw new nt({maxFeePerGas:r})}function fn(e){if(!e||e.length===0)return[];const t=[];for(let n=0;n<e.length;n++){const{address:r,storageKeys:s}=e[n];for(let o=0;o<s.length;o++)if(s[o].length-2!==64)throw new _0({storageKey:s[o]});if(!ie(r,{strict:!1}))throw new ue({address:r});t.push([r,s])}return t}function Bl(e,t){const n=Ho(e);return n==="eip1559"?af(e,t):n==="eip2930"?cf(e,t):n==="eip4844"?of(e,t):n==="eip7702"?sf(e,t):uf(e,t)}function sf(e,t){const{authorizationList:n,chainId:r,gas:s,nonce:o,to:i,value:c,maxFeePerGas:a,maxPriorityFeePerGas:u,accessList:f,data:d}=e;ef(e);const l=fn(f),b=ff(n);return be(["0x04",He([T(r),o?T(o):"0x",u?T(u):"0x",a?T(a):"0x",s?T(s):"0x",i??"0x",c?T(c):"0x",d??"0x",l,b,...Ft(e,t)])])}function of(e,t){const{chainId:n,gas:r,nonce:s,to:o,value:i,maxFeePerBlobGas:c,maxFeePerGas:a,maxPriorityFeePerGas:u,accessList:f,data:d}=e;tf(e);let l=e.blobVersionedHashes,b=e.sidecars;if(e.blobs&&(typeof l>"u"||typeof b>"u")){const g=typeof e.blobs[0]=="string"?e.blobs:e.blobs.map(E=>q(E)),m=e.kzg,w=pr({blobs:g,kzg:m});if(typeof l>"u"&&(l=Oo({commitments:w})),typeof b>"u"){const E=mr({blobs:g,commitments:w,kzg:m});b=Uo({blobs:g,commitments:w,proofs:E})}}const p=fn(f),h=[T(n),s?T(s):"0x",u?T(u):"0x",a?T(a):"0x",r?T(r):"0x",o??"0x",i?T(i):"0x",d??"0x",p,c?T(c):"0x",l??[],...Ft(e,t)],y=[],v=[],B=[];if(b)for(let g=0;g<b.length;g++){const{blob:m,commitment:w,proof:E}=b[g];y.push(m),v.push(w),B.push(E)}return be(["0x03",He(b?[h,y,v,B]:h)])}function af(e,t){const{chainId:n,gas:r,nonce:s,to:o,value:i,maxFeePerGas:c,maxPriorityFeePerGas:a,accessList:u,data:f}=e;zr(e);const d=fn(u),l=[T(n),s?T(s):"0x",a?T(a):"0x",c?T(c):"0x",r?T(r):"0x",o??"0x",i?T(i):"0x",f??"0x",d,...Ft(e,t)];return be(["0x02",He(l)])}function cf(e,t){const{chainId:n,gas:r,data:s,nonce:o,to:i,value:c,accessList:a,gasPrice:u}=e;nf(e);const f=fn(a),d=[T(n),o?T(o):"0x",u?T(u):"0x",r?T(r):"0x",i??"0x",c?T(c):"0x",s??"0x",f,...Ft(e,t)];return be(["0x01",He(d)])}function uf(e,t){const{chainId:n=0,gas:r,data:s,nonce:o,to:i,value:c,gasPrice:a}=e;rf(e);let u=[o?T(o):"0x",a?T(a):"0x",r?T(r):"0x",i??"0x",c?T(c):"0x",s??"0x"];if(t){const f=(()=>{if(t.v>=35n)return(t.v-35n)/2n>0?t.v:27n+(t.v===35n?0n:1n);if(n>0)return BigInt(n*2)+BigInt(35n+t.v-27n);const b=27n+(t.v===27n?0n:1n);if(t.v!==b)throw new R0({v:t.v});return b})(),d=Ae(t.r),l=Ae(t.s);u=[...u,T(f),d==="0x00"?"0x":d,l==="0x00"?"0x":l]}else n>0&&(u=[...u,T(n),"0x","0x"]);return He(u)}function Ft(e,t){const n=t??e,{v:r,yParity:s}=n;if(typeof n.r>"u")return[];if(typeof n.s>"u")return[];if(typeof r>"u"&&typeof s>"u")return[];const o=Ae(n.r),i=Ae(n.s);return[typeof s=="number"?s?T(1):"0x":r===0n?"0x":r===1n?T(1):r===27n?"0x":T(1),o==="0x00"?"0x":o,i==="0x00"?"0x":i]}function ff(e){if(!e||e.length===0)return[];const t=[];for(const n of e){const{chainId:r,nonce:s,...o}=n,i=n.address;t.push([r?Ue(r):"0x",i,s?Ue(s):"0x",...Ft({},o)])}return t}async function df({address:e,authorization:t,signature:n}){return en(oo(e),await To({authorization:t,signature:n}))}function Il(e){const{source:t}=e,n=new Map,r=new Qs(8192),s=new Map,o=({address:i,chainId:c})=>`${i}.${c}`;return{async consume({address:i,chainId:c,client:a}){const u=o({address:i,chainId:c}),f=this.get({address:i,chainId:c,client:a});this.increment({address:i,chainId:c});const d=await f;return await t.set({address:i,chainId:c},d),r.set(u,d),d},async increment({address:i,chainId:c}){const a=o({address:i,chainId:c}),u=n.get(a)??0;n.set(a,u+1)},async get({address:i,chainId:c,client:a}){const u=o({address:i,chainId:c});let f=s.get(u);return f||(f=(async()=>{try{const l=await t.get({address:i,chainId:c,client:a}),b=r.get(u)??0;return b>0&&l<=b?b+1:(r.delete(u),l)}finally{this.reset({address:i,chainId:c})}})(),s.set(u,f)),(n.get(u)??0)+await f},reset({address:i,chainId:c}){const a=o({address:i,chainId:c});n.delete(a),s.delete(a)}}}const lf="0x6492649264926492649264926492649264926492649264926492649264926492";class bf extends Map{constructor(t){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=t}get(t){const n=super.get(t);return super.has(t)&&n!==void 0&&(this.delete(t),super.set(t,n)),n}set(t,n){if(super.set(t,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const hf={checksum:new bf(8192)},$n=hf.checksum;function vi(e,t={}){const{as:n=typeof e=="string"?"Hex":"Bytes"}=t,r=va(zc(e));return n==="Bytes"?r:de(r)}const pf=/^0x[a-fA-F0-9]{40}$/;function dn(e,t={}){const{strict:n=!0}=t;if(!pf.test(e))throw new ks({address:e,cause:new mf});if(n){if(e.toLowerCase()===e)return;if(Pi(e)!==e)throw new ks({address:e,cause:new yf})}}function Pi(e){if($n.has(e))return $n.get(e);dn(e,{strict:!1});const t=e.substring(2).toLowerCase(),n=vi(Oc(t),{as:"Bytes"}),r=t.split("");for(let o=0;o<40;o+=2)n[o>>1]>>4>=8&&r[o]&&(r[o]=r[o].toUpperCase()),(n[o>>1]&15)>=8&&r[o+1]&&(r[o+1]=r[o+1].toUpperCase());const s=`0x${r.join("")}`;return $n.set(e,s),s}function Wn(e,t={}){const{strict:n=!0}=t??{};try{return dn(e,{strict:n}),!0}catch{return!1}}class ks extends G{constructor({address:t,cause:n}){super(`Address "${t}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class mf extends G{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class yf extends G{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}const gf=/^(.*)\[([0-9]*)\]$/,wf=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Ei=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,Fs=2n**256n-1n;function tt(e,t,n){const{checksumAddress:r,staticPosition:s}=n,o=_r(t.type);if(o){const[i,c]=o;return vf(e,{...t,type:c},{checksumAddress:r,length:i,staticPosition:s})}if(t.type==="tuple")return If(e,t,{checksumAddress:r,staticPosition:s});if(t.type==="address")return xf(e,{checksum:r});if(t.type==="bool")return Pf(e);if(t.type.startsWith("bytes"))return Ef(e,t,{staticPosition:s});if(t.type.startsWith("uint")||t.type.startsWith("int"))return Bf(e,t);if(t.type==="string")return Af(e,{staticPosition:s});throw new Mr(t.type)}const Cs=32,Kn=32;function xf(e,t={}){const{checksum:n=!1}=t,r=e.readBytes(32);return[(o=>n?Pi(o):o)(de(Lc(r,-20))),32]}function vf(e,t,n){const{checksumAddress:r,length:s,staticPosition:o}=n;if(!s){const a=Ie(e.readBytes(Kn)),u=o+a,f=u+Cs;e.setPosition(u);const d=Ie(e.readBytes(Cs)),l=xt(t);let b=0;const p=[];for(let h=0;h<d;++h){e.setPosition(f+(l?h*32:b));const[y,v]=tt(e,t,{checksumAddress:r,staticPosition:f});b+=v,p.push(y)}return e.setPosition(o+32),[p,32]}if(xt(t)){const a=Ie(e.readBytes(Kn)),u=o+a,f=[];for(let d=0;d<s;++d){e.setPosition(u+d*32);const[l]=tt(e,t,{checksumAddress:r,staticPosition:u});f.push(l)}return e.setPosition(o+32),[f,32]}let i=0;const c=[];for(let a=0;a<s;++a){const[u,f]=tt(e,t,{checksumAddress:r,staticPosition:o+i});i+=f,c.push(u)}return[c,i]}function Pf(e){return[Gc(e.readBytes(32),{size:32}),32]}function Ef(e,t,{staticPosition:n}){const[r,s]=t.type.split("bytes");if(!s){const i=Ie(e.readBytes(32));e.setPosition(n+i);const c=Ie(e.readBytes(32));if(c===0)return e.setPosition(n+32),["0x",32];const a=e.readBytes(c);return e.setPosition(n+32),[de(a),32]}return[de(e.readBytes(Number.parseInt(s,10),32)),32]}function Bf(e,t){const n=t.type.startsWith("int"),r=Number.parseInt(t.type.split("int")[1]||"256",10),s=e.readBytes(32);return[r>48?Mc(s,{signed:n}):Ie(s,{signed:n}),32]}function If(e,t,n){const{checksumAddress:r,staticPosition:s}=n,o=t.components.length===0||t.components.some(({name:a})=>!a),i=o?[]:{};let c=0;if(xt(t)){const a=Ie(e.readBytes(Kn)),u=s+a;for(let f=0;f<t.components.length;++f){const d=t.components[f];e.setPosition(u+c);const[l,b]=tt(e,d,{checksumAddress:r,staticPosition:u});c+=b,i[o?f:d==null?void 0:d.name]=l}return e.setPosition(s+32),[i,32]}for(let a=0;a<t.components.length;++a){const u=t.components[a],[f,d]=tt(e,u,{checksumAddress:r,staticPosition:s});i[o?a:u==null?void 0:u.name]=f,c+=d}return[i,c]}function Af(e,{staticPosition:t}){const n=Ie(e.readBytes(32)),r=t+n;e.setPosition(r);const s=Ie(e.readBytes(32));if(s===0)return e.setPosition(t+32),["",32];const o=e.readBytes(s,32),i=Uc(ti(o));return e.setPosition(t+32),[i,32]}function $f({checksumAddress:e,parameters:t,values:n}){const r=[];for(let s=0;s<t.length;s++)r.push(Rr({checksumAddress:e,parameter:t[s],value:n[s]}));return r}function Rr({checksumAddress:e=!1,parameter:t,value:n}){const r=t,s=_r(r.type);if(s){const[o,i]=s;return Tf(n,{checksumAddress:e,length:o,parameter:{...r,type:i}})}if(r.type==="tuple")return zf(n,{checksumAddress:e,parameter:r});if(r.type==="address")return Sf(n,{checksum:e});if(r.type==="bool")return kf(n);if(r.type.startsWith("uint")||r.type.startsWith("int")){const o=r.type.startsWith("int"),[,,i="256"]=Ei.exec(r.type)??[];return Ff(n,{signed:o,size:Number(i)})}if(r.type.startsWith("bytes"))return Nf(n,{type:r.type});if(r.type==="string")return Cf(n);throw new Mr(r.type)}function Or(e){let t=0;for(let o=0;o<e.length;o++){const{dynamic:i,encoded:c}=e[o];i?t+=32:t+=ne(c)}const n=[],r=[];let s=0;for(let o=0;o<e.length;o++){const{dynamic:i,encoded:c}=e[o];i?(n.push(K(t+s,{size:32})),r.push(c),s+=ne(c)):n.push(c)}return fe(...n,...r)}function Sf(e,t){const{checksum:n=!1}=t;return dn(e,{strict:n}),{dynamic:!1,encoded:je(e.toLowerCase())}}function Tf(e,t){const{checksumAddress:n,length:r,parameter:s}=t,o=r===null;if(!Array.isArray(e))throw new jf(e);if(!o&&e.length!==r)throw new Hf({expectedLength:r,givenLength:e.length,type:`${s.type}[${r}]`});let i=!1;const c=[];for(let a=0;a<e.length;a++){const u=Rr({checksumAddress:n,parameter:s,value:e[a]});u.dynamic&&(i=!0),c.push(u)}if(o||i){const a=Or(c);if(o){const u=K(c.length,{size:32});return{dynamic:!0,encoded:c.length>0?fe(u,a):u}}if(i)return{dynamic:!0,encoded:a}}return{dynamic:!1,encoded:fe(...c.map(({encoded:a})=>a))}}function Nf(e,{type:t}){const[,n]=t.split("bytes"),r=ne(e);if(!n){let s=e;return r%32!==0&&(s=De(s,Math.ceil((e.length-2)/2/32)*32)),{dynamic:!0,encoded:fe(je(K(r,{size:32})),s)}}if(r!==Number.parseInt(n,10))throw new Ii({expectedSize:Number.parseInt(n,10),value:e});return{dynamic:!1,encoded:De(e)}}function kf(e){if(typeof e!="boolean")throw new G(`Invalid boolean value: "${e}" (type: ${typeof e}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:je(ni(e))}}function Ff(e,{signed:t,size:n}){if(typeof n=="number"){const r=2n**(BigInt(n)-(t?1n:0n))-1n,s=t?-r-1n:0n;if(e>r||e<s)throw new oi({max:r.toString(),min:s.toString(),signed:t,size:n/8,value:e.toString()})}return{dynamic:!1,encoded:K(e,{size:32,signed:t})}}function Cf(e){const t=Ar(e),n=Math.ceil(ne(t)/32),r=[];for(let s=0;s<n;s++)r.push(De(ge(t,s*32,(s+1)*32)));return{dynamic:!0,encoded:fe(De(K(ne(t),{size:32})),...r)}}function zf(e,t){const{checksumAddress:n,parameter:r}=t;let s=!1;const o=[];for(let i=0;i<r.components.length;i++){const c=r.components[i],a=Array.isArray(e)?i:c.name,u=Rr({checksumAddress:n,parameter:c,value:e[a]});o.push(u),u.dynamic&&(s=!0)}return{dynamic:s,encoded:s?Or(o):fe(...o.map(({encoded:i})=>i))}}function _r(e){const t=e.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}function xt(e){var r;const{type:t}=e;if(t==="string"||t==="bytes"||t.endsWith("[]"))return!0;if(t==="tuple")return(r=e.components)==null?void 0:r.some(xt);const n=_r(e.type);return!!(n&&xt({...e,type:n[1]}))}const Rf={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new Lf({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(e){if(e<0||e>this.bytes.length-1)throw new _f({length:this.bytes.length,position:e})},decrementPosition(e){if(e<0)throw new zs({offset:e});const t=this.position-e;this.assertPosition(t),this.position=t},getReadCount(e){return this.positionReadCount.get(e||this.position)||0},incrementPosition(e){if(e<0)throw new zs({offset:e});const t=this.position+e;this.assertPosition(t),this.position=t},inspectByte(e){const t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectBytes(e,t){const n=t??this.position;return this.assertPosition(n+e-1),this.bytes.subarray(n,n+e)},inspectUint8(e){const t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectUint16(e){const t=e??this.position;return this.assertPosition(t+1),this.dataView.getUint16(t)},inspectUint24(e){const t=e??this.position;return this.assertPosition(t+2),(this.dataView.getUint16(t)<<8)+this.dataView.getUint8(t+2)},inspectUint32(e){const t=e??this.position;return this.assertPosition(t+3),this.dataView.getUint32(t)},pushByte(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushBytes(e){this.assertPosition(this.position+e.length-1),this.bytes.set(e,this.position),this.position+=e.length},pushUint8(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushUint16(e){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,e),this.position+=2},pushUint24(e){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,e>>8),this.dataView.setUint8(this.position+2,e&255),this.position+=3},pushUint32(e){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,e),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const e=this.inspectByte();return this.position++,e},readBytes(e,t){this.assertReadLimit(),this._touch();const n=this.inspectBytes(e);return this.position+=t??e,n},readUint8(){this.assertReadLimit(),this._touch();const e=this.inspectUint8();return this.position+=1,e},readUint16(){this.assertReadLimit(),this._touch();const e=this.inspectUint16();return this.position+=2,e},readUint24(){this.assertReadLimit(),this._touch();const e=this.inspectUint24();return this.position+=3,e},readUint32(){this.assertReadLimit(),this._touch();const e=this.inspectUint32();return this.position+=4,e},get remaining(){return this.bytes.length-this.position},setPosition(e){const t=this.position;return this.assertPosition(e),this.position=e,()=>this.position=t},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const e=this.getReadCount();this.positionReadCount.set(this.position,e+1),e>0&&this.recursiveReadCount++}};function Of(e,{recursiveReadLimit:t=8192}={}){const n=Object.create(Rf);return n.bytes=e,n.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=t,n}class zs extends G{constructor({offset:t}){super(`Offset \`${t}\` cannot be negative.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.NegativeOffsetError"})}}class _f extends G{constructor({length:t,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${t}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.PositionOutOfBoundsError"})}}class Lf extends G{constructor({count:t,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${t}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.RecursiveReadLimitExceededError"})}}function Mf(e,t,n={}){const{as:r="Array",checksumAddress:s=!1}=n,o=typeof t=="string"?ei(t):t,i=Of(o);if(Je(o)===0&&e.length>0)throw new Uf;if(Je(o)&&Je(o)<32)throw new Gf({data:typeof t=="string"?t:de(t),parameters:e,size:Je(o)});let c=0;const a=r==="Array"?[]:{};for(let u=0;u<e.length;++u){const f=e[u];i.setPosition(c);const[d,l]=tt(i,f,{checksumAddress:s,staticPosition:0});c+=l,r==="Array"?a.push(d):a[f.name??u]=d}return a}function Lr(e,t,n){const{checksumAddress:r=!1}={};if(e.length!==t.length)throw new Ai({expectedLength:e.length,givenLength:t.length});const s=$f({checksumAddress:r,parameters:e,values:t}),o=Or(s);return o.length===0?"0x":o}function Yn(e,t){if(e.length!==t.length)throw new Ai({expectedLength:e.length,givenLength:t.length});const n=[];for(let r=0;r<e.length;r++){const s=e[r],o=t[r];n.push(Yn.encode(s,o))}return fe(...n)}(function(e){function t(n,r,s=!1){if(n==="address"){const a=r;return dn(a),je(a.toLowerCase(),s?32:0)}if(n==="string")return Ar(r);if(n==="bytes")return r;if(n==="bool")return je(ni(r),s?32:1);const o=n.match(Ei);if(o){const[a,u,f="256"]=o,d=Number.parseInt(f,10)/8;return K(r,{size:s?32:d,signed:u==="int"})}const i=n.match(wf);if(i){const[a,u]=i;if(Number.parseInt(u,10)!==(r.length-2)/2)throw new Ii({expectedSize:Number.parseInt(u,10),value:r});return De(r,s?32:0)}const c=n.match(gf);if(c&&Array.isArray(r)){const[a,u]=c,f=[];for(let d=0;d<r.length;d++)f.push(t(u,r[d],!0));return f.length===0?"0x":fe(...f)}throw new Mr(n)}e.encode=t})(Yn||(Yn={}));function Bi(e){return Array.isArray(e)&&typeof e[0]=="string"||typeof e=="string"?fs(e):e}class Gf extends G{constructor({data:t,parameters:n,size:r}){super(`Data size of ${r} bytes is too small for given parameters.`,{metaMessages:[`Params: (${Pa(n)})`,`Data:   ${t} (${r} bytes)`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.DataSizeTooSmallError"})}}class Uf extends G{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.'),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ZeroDataError"})}}class Hf extends G{constructor({expectedLength:t,givenLength:n,type:r}){super(`Array length mismatch for type \`${r}\`. Expected: \`${t}\`. Given: \`${n}\`.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ArrayLengthMismatchError"})}}class Ii extends G{constructor({expectedSize:t,value:n}){super(`Size of bytes "${n}" (bytes${ne(n)}) does not match expected size (bytes${t}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}}class Ai extends G{constructor({expectedLength:t,givenLength:n}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${t}`,`Given length (values): ${n}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}}class jf extends G{constructor(t){super(`Value \`${t}\` is not a valid array.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidArrayError"})}}class Mr extends G{constructor(t){super(`Type \`${t}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}}class $i extends Ys{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,Ea(t);const r=Js(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,o=new Uint8Array(s);o.set(r.length>s?t.create().update(r).digest():r);for(let i=0;i<o.length;i++)o[i]^=54;this.iHash.update(o),this.oHash=t.create();for(let i=0;i<o.length;i++)o[i]^=106;this.oHash.update(o),Lt(o)}update(t){return _t(this),this.iHash.update(t),this}digestInto(t){_t(this),Xs(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:o,blockLen:i,outputLen:c}=this;return t=t,t.finished=s,t.destroyed=o,t.blockLen=i,t.outputLen=c,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Si=(e,t,n)=>new $i(e,t).update(n).digest();Si.create=(e,t)=>new $i(e,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const X=BigInt(0),Y=BigInt(1),Le=BigInt(2),Df=BigInt(3),Ti=BigInt(4),Ni=BigInt(5),ki=BigInt(8);function J(e,t){const n=e%t;return n>=X?n:t+n}function re(e,t,n){let r=e;for(;t-- >X;)r*=r,r%=n;return r}function Jn(e,t){if(e===X)throw new Error("invert: expected non-zero number");if(t<=X)throw new Error("invert: expected positive modulus, got "+t);let n=J(e,t),r=t,s=X,o=Y;for(;n!==X;){const c=r/n,a=r%n,u=s-o*c;r=n,n=a,s=o,o=u}if(r!==Y)throw new Error("invert: does not exist");return J(s,t)}function Fi(e,t){const n=(e.ORDER+Y)/Ti,r=e.pow(t,n);if(!e.eql(e.sqr(r),t))throw new Error("Cannot find square root");return r}function Vf(e,t){const n=(e.ORDER-Ni)/ki,r=e.mul(t,Le),s=e.pow(r,n),o=e.mul(t,s),i=e.mul(e.mul(o,Le),s),c=e.mul(o,e.sub(i,e.ONE));if(!e.eql(e.sqr(c),t))throw new Error("Cannot find square root");return c}function qf(e){if(e<BigInt(3))throw new Error("sqrt is not defined for small field");let t=e-Y,n=0;for(;t%Le===X;)t/=Le,n++;let r=Le;const s=Gr(e);for(;Rs(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return Fi;let o=s.pow(r,t);const i=(t+Y)/Le;return function(a,u){if(a.is0(u))return u;if(Rs(a,u)!==1)throw new Error("Cannot find square root");let f=n,d=a.mul(a.ONE,o),l=a.pow(u,t),b=a.pow(u,i);for(;!a.eql(l,a.ONE);){if(a.is0(l))return a.ZERO;let p=1,h=a.sqr(l);for(;!a.eql(h,a.ONE);)if(p++,h=a.sqr(h),p===f)throw new Error("Cannot find square root");const y=Y<<BigInt(f-p-1),v=a.pow(d,y);f=p,d=a.sqr(v),l=a.mul(l,d),b=a.mul(b,v)}return b}}function Zf(e){return e%Ti===Df?Fi:e%ki===Ni?Vf:qf(e)}const Wf=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Kf(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=Wf.reduce((r,s)=>(r[s]="function",r),t);return nn(e,n)}function Yf(e,t,n){if(n<X)throw new Error("invalid exponent, negatives unsupported");if(n===X)return e.ONE;if(n===Y)return t;let r=e.ONE,s=t;for(;n>X;)n&Y&&(r=e.mul(r,s)),s=e.sqr(s),n>>=Y;return r}function Ci(e,t,n=!1){const r=new Array(t.length).fill(n?e.ZERO:void 0),s=t.reduce((i,c,a)=>e.is0(c)?i:(r[a]=i,e.mul(i,c)),e.ONE),o=e.inv(s);return t.reduceRight((i,c,a)=>e.is0(c)?i:(r[a]=e.mul(i,r[a]),e.mul(i,c)),o),r}function Rs(e,t){const n=(e.ORDER-Y)/Le,r=e.pow(t,n),s=e.eql(r,e.ONE),o=e.eql(r,e.ZERO),i=e.eql(r,e.neg(e.ONE));if(!s&&!o&&!i)throw new Error("invalid Legendre symbol result");return s?1:o?0:-1}function zi(e,t){t!==void 0&&Ba(t);const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Gr(e,t,n=!1,r={}){if(e<=X)throw new Error("invalid field: expected ORDER > 0, got "+e);const{nBitLength:s,nByteLength:o}=zi(e,t);if(o>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let i;const c=Object.freeze({ORDER:e,isLE:n,BITS:s,BYTES:o,MASK:tn(s),ZERO:X,ONE:Y,create:a=>J(a,e),isValid:a=>{if(typeof a!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof a);return X<=a&&a<e},is0:a=>a===X,isOdd:a=>(a&Y)===Y,neg:a=>J(-a,e),eql:(a,u)=>a===u,sqr:a=>J(a*a,e),add:(a,u)=>J(a+u,e),sub:(a,u)=>J(a-u,e),mul:(a,u)=>J(a*u,e),pow:(a,u)=>Yf(c,a,u),div:(a,u)=>J(a*Jn(u,e),e),sqrN:a=>a*a,addN:(a,u)=>a+u,subN:(a,u)=>a-u,mulN:(a,u)=>a*u,inv:a=>Jn(a,e),sqrt:r.sqrt||(a=>(i||(i=Zf(e)),i(c,a))),toBytes:a=>n?Ko(a,o):Tt(a,o),fromBytes:a=>{if(a.length!==o)throw new Error("Field.fromBytes: expected "+o+" bytes, got "+a.length);return n?Wo(a):Me(a)},invertBatch:a=>Ci(c,a),cmov:(a,u,f)=>f?u:a});return Object.freeze(c)}function Ri(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function Oi(e){const t=Ri(e);return t+Math.ceil(t/2)}function Jf(e,t,n=!1){const r=e.length,s=Ri(t),o=Oi(t);if(r<16||r<o||r>1024)throw new Error("expected "+o+"-1024 bytes of input, got "+r);const i=n?Wo(e):Me(e),c=J(i,t-Y)+Y;return n?Ko(c,s):Tt(c,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Os=BigInt(0),Xn=BigInt(1);function Sn(e,t){const n=t.negate();return e?n:t}function _i(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function Tn(e,t){_i(e,t);const n=Math.ceil(t/e)+1,r=2**(e-1),s=2**e,o=tn(e),i=BigInt(e);return{windows:n,windowSize:r,mask:o,maxNumber:s,shiftBy:i}}function _s(e,t,n){const{windowSize:r,mask:s,maxNumber:o,shiftBy:i}=n;let c=Number(e&s),a=e>>i;c>r&&(c-=o,a+=Xn);const u=t*r,f=u+Math.abs(c)-1,d=c===0,l=c<0,b=t%2!==0;return{nextN:a,offset:f,isZero:d,isNeg:l,isNegF:b,offsetF:u}}function Xf(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((n,r)=>{if(!(n instanceof t))throw new Error("invalid point at index "+r)})}function Qf(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((n,r)=>{if(!t.isValid(n))throw new Error("invalid scalar at index "+r)})}const Nn=new WeakMap,Li=new WeakMap;function kn(e){return Li.get(e)||1}function ed(e,t){return{constTimeNegate:Sn,hasPrecomputes(n){return kn(n)!==1},unsafeLadder(n,r,s=e.ZERO){let o=n;for(;r>Os;)r&Xn&&(s=s.add(o)),o=o.double(),r>>=Xn;return s},precomputeWindow(n,r){const{windows:s,windowSize:o}=Tn(r,t),i=[];let c=n,a=c;for(let u=0;u<s;u++){a=c,i.push(a);for(let f=1;f<o;f++)a=a.add(c),i.push(a);c=a.double()}return i},wNAF(n,r,s){let o=e.ZERO,i=e.BASE;const c=Tn(n,t);for(let a=0;a<c.windows;a++){const{nextN:u,offset:f,isZero:d,isNeg:l,isNegF:b,offsetF:p}=_s(s,a,c);s=u,d?i=i.add(Sn(b,r[p])):o=o.add(Sn(l,r[f]))}return{p:o,f:i}},wNAFUnsafe(n,r,s,o=e.ZERO){const i=Tn(n,t);for(let c=0;c<i.windows&&s!==Os;c++){const{nextN:a,offset:u,isZero:f,isNeg:d}=_s(s,c,i);if(s=a,!f){const l=r[u];o=o.add(d?l.negate():l)}}return o},getPrecomputes(n,r,s){let o=Nn.get(r);return o||(o=this.precomputeWindow(r,n),n!==1&&Nn.set(r,s(o))),o},wNAFCached(n,r,s){const o=kn(n);return this.wNAF(o,this.getPrecomputes(o,n,s),r)},wNAFCachedUnsafe(n,r,s,o){const i=kn(n);return i===1?this.unsafeLadder(n,r,o):this.wNAFUnsafe(i,this.getPrecomputes(i,n,s),r,o)},setWindowSize(n,r){_i(r,t),Li.set(n,r),Nn.delete(n)}}}function td(e,t,n,r){Xf(n,e),Qf(r,t);const s=n.length,o=r.length;if(s!==o)throw new Error("arrays of points and scalars must have equal length");const i=e.ZERO,c=Ec(BigInt(s));let a=1;c>12?a=c-3:c>4?a=c-2:c>0&&(a=2);const u=tn(a),f=new Array(Number(u)+1).fill(i),d=Math.floor((t.BITS-1)/a)*a;let l=i;for(let b=d;b>=0;b-=a){f.fill(i);for(let h=0;h<o;h++){const y=r[h],v=Number(y>>BigInt(b)&u);f[v]=f[v].add(n[h])}let p=i;for(let h=f.length-1,y=i;h>0;h--)y=y.add(f[h]),p=p.add(y);if(l=l.add(p),b!==0)for(let h=0;h<a;h++)l=l.double()}return l}function Mi(e){return Kf(e.Fp),nn(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...zi(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Ls(e){e.lowS!==void 0&&gt("lowS",e.lowS),e.prehash!==void 0&&gt("prehash",e.prehash)}function nd(e){const t=Mi(e);nn(t,{a:"field",b:"field"},{allowInfinityPoint:"boolean",allowedPrivateKeyLengths:"array",clearCofactor:"function",fromBytes:"function",isTorsionFree:"function",toBytes:"function",wrapPrivateKey:"boolean"});const{endo:n,Fp:r,a:s}=t;if(n){if(!r.eql(s,r.ZERO))throw new Error("invalid endo: CURVE.a must be 0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function')}return Object.freeze({...t})}class rd extends Error{constructor(t=""){super(t)}}const Pe={Err:rd,_tlv:{encode:(e,t)=>{const{Err:n}=Pe;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length&1)throw new n("tlv.encode: unpadded data");const r=t.length/2,s=zt(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const o=r>127?zt(s.length/2|128):"";return zt(e)+o+s+t},decode(e,t){const{Err:n}=Pe;let r=0;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length<2||t[r++]!==e)throw new n("tlv.decode: wrong tlv");const s=t[r++],o=!!(s&128);let i=0;if(!o)i=s;else{const a=s&127;if(!a)throw new n("tlv.decode(long): indefinite length not supported");if(a>4)throw new n("tlv.decode(long): byte length is too big");const u=t.subarray(r,r+a);if(u.length!==a)throw new n("tlv.decode: length bytes not complete");if(u[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const f of u)i=i<<8|f;if(r+=a,i<128)throw new n("tlv.decode(long): not minimal encoding")}const c=t.subarray(r,r+i);if(c.length!==i)throw new n("tlv.decode: wrong value length");return{v:c,l:t.subarray(r+i)}}},_int:{encode(e){const{Err:t}=Pe;if(e<Ee)throw new t("integer: negative integers are not allowed");let n=zt(e);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return n},decode(e){const{Err:t}=Pe;if(e[0]&128)throw new t("invalid signature integer: negative");if(e[0]===0&&!(e[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return Me(e)}},toSig(e){const{Err:t,_int:n,_tlv:r}=Pe,s=se("signature",e),{v:o,l:i}=r.decode(48,s);if(i.length)throw new t("invalid signature: left bytes after parsing");const{v:c,l:a}=r.decode(2,o),{v:u,l:f}=r.decode(2,a);if(f.length)throw new t("invalid signature: left bytes after parsing");return{r:n.decode(c),s:n.decode(u)}},hexFromSig(e){const{_tlv:t,_int:n}=Pe,r=t.encode(2,n.encode(e.r)),s=t.encode(2,n.encode(e.s)),o=r+s;return t.encode(48,o)}};function Fn(e,t){return wt(Tt(e,t))}const Ee=BigInt(0),D=BigInt(1);BigInt(2);const Cn=BigInt(3),sd=BigInt(4);function od(e){const t=nd(e),{Fp:n}=t,r=Gr(t.n,t.nBitLength),s=t.toBytes||((g,m,w)=>{const E=m.toAffine();return Ht(Uint8Array.from([4]),n.toBytes(E.x),n.toBytes(E.y))}),o=t.fromBytes||(g=>{const m=g.subarray(1),w=n.fromBytes(m.subarray(0,n.BYTES)),E=n.fromBytes(m.subarray(n.BYTES,2*n.BYTES));return{x:w,y:E}});function i(g){const{a:m,b:w}=t,E=n.sqr(g),P=n.mul(E,g);return n.add(n.add(P,n.mul(g,m)),w)}function c(g,m){const w=n.sqr(m),E=i(g);return n.eql(w,E)}if(!c(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const a=n.mul(n.pow(t.a,Cn),sd),u=n.mul(n.sqr(t.b),BigInt(27));if(n.is0(n.add(a,u)))throw new Error("bad curve params: a or b");function f(g){return Ir(g,D,t.n)}function d(g){const{allowedPrivateKeyLengths:m,nByteLength:w,wrapPrivateKey:E,n:P}=t;if(m&&typeof g!="bigint"){if(St(g)&&(g=wt(g)),typeof g!="string"||!m.includes(g.length))throw new Error("invalid private key");g=g.padStart(w*2,"0")}let A;try{A=typeof g=="bigint"?g:Me(se("private key",g,w))}catch{throw new Error("invalid private key, expected hex or "+w+" bytes, got "+typeof g)}return E&&(A=J(A,P)),et("private key",A,D,P),A}function l(g){if(!(g instanceof h))throw new Error("ProjectivePoint expected")}const b=Bs((g,m)=>{const{px:w,py:E,pz:P}=g;if(n.eql(P,n.ONE))return{x:w,y:E};const A=g.is0();m==null&&(m=A?n.ONE:n.inv(P));const k=n.mul(w,m),z=n.mul(E,m),S=n.mul(P,m);if(A)return{x:n.ZERO,y:n.ZERO};if(!n.eql(S,n.ONE))throw new Error("invZ was invalid");return{x:k,y:z}}),p=Bs(g=>{if(g.is0()){if(t.allowInfinityPoint&&!n.is0(g.py))return;throw new Error("bad point: ZERO")}const{x:m,y:w}=g.toAffine();if(!n.isValid(m)||!n.isValid(w))throw new Error("bad point: x or y not FE");if(!c(m,w))throw new Error("bad point: equation left != right");if(!g.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class h{constructor(m,w,E){if(m==null||!n.isValid(m))throw new Error("x required");if(w==null||!n.isValid(w)||n.is0(w))throw new Error("y required");if(E==null||!n.isValid(E))throw new Error("z required");this.px=m,this.py=w,this.pz=E,Object.freeze(this)}static fromAffine(m){const{x:w,y:E}=m||{};if(!m||!n.isValid(w)||!n.isValid(E))throw new Error("invalid affine point");if(m instanceof h)throw new Error("projective point not allowed");const P=A=>n.eql(A,n.ZERO);return P(w)&&P(E)?h.ZERO:new h(w,E,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(m){const w=Ci(n,m.map(E=>E.pz));return m.map((E,P)=>E.toAffine(w[P])).map(h.fromAffine)}static fromHex(m){const w=h.fromAffine(o(se("pointHex",m)));return w.assertValidity(),w}static fromPrivateKey(m){return h.BASE.multiply(d(m))}static msm(m,w){return td(h,r,m,w)}_setWindowSize(m){B.setWindowSize(this,m)}assertValidity(){p(this)}hasEvenY(){const{y:m}=this.toAffine();if(n.isOdd)return!n.isOdd(m);throw new Error("Field doesn't support isOdd")}equals(m){l(m);const{px:w,py:E,pz:P}=this,{px:A,py:k,pz:z}=m,S=n.eql(n.mul(w,z),n.mul(A,P)),F=n.eql(n.mul(E,z),n.mul(k,P));return S&&F}negate(){return new h(this.px,n.neg(this.py),this.pz)}double(){const{a:m,b:w}=t,E=n.mul(w,Cn),{px:P,py:A,pz:k}=this;let z=n.ZERO,S=n.ZERO,F=n.ZERO,N=n.mul(P,P),U=n.mul(A,A),x=n.mul(k,k),$=n.mul(P,A);return $=n.add($,$),F=n.mul(P,k),F=n.add(F,F),z=n.mul(m,F),S=n.mul(E,x),S=n.add(z,S),z=n.sub(U,S),S=n.add(U,S),S=n.mul(z,S),z=n.mul($,z),F=n.mul(E,F),x=n.mul(m,x),$=n.sub(N,x),$=n.mul(m,$),$=n.add($,F),F=n.add(N,N),N=n.add(F,N),N=n.add(N,x),N=n.mul(N,$),S=n.add(S,N),x=n.mul(A,k),x=n.add(x,x),N=n.mul(x,$),z=n.sub(z,N),F=n.mul(x,U),F=n.add(F,F),F=n.add(F,F),new h(z,S,F)}add(m){l(m);const{px:w,py:E,pz:P}=this,{px:A,py:k,pz:z}=m;let S=n.ZERO,F=n.ZERO,N=n.ZERO;const U=t.a,x=n.mul(t.b,Cn);let $=n.mul(w,A),R=n.mul(E,k),I=n.mul(P,z),C=n.add(w,E),O=n.add(A,k);C=n.mul(C,O),O=n.add($,R),C=n.sub(C,O),O=n.add(w,P);let M=n.add(A,z);return O=n.mul(O,M),M=n.add($,I),O=n.sub(O,M),M=n.add(E,P),S=n.add(k,z),M=n.mul(M,S),S=n.add(R,I),M=n.sub(M,S),N=n.mul(U,O),S=n.mul(x,I),N=n.add(S,N),S=n.sub(R,N),N=n.add(R,N),F=n.mul(S,N),R=n.add($,$),R=n.add(R,$),I=n.mul(U,I),O=n.mul(x,O),R=n.add(R,I),I=n.sub($,I),I=n.mul(U,I),O=n.add(O,I),$=n.mul(R,O),F=n.add(F,$),$=n.mul(M,O),S=n.mul(C,S),S=n.sub(S,$),$=n.mul(C,R),N=n.mul(M,N),N=n.add(N,$),new h(S,F,N)}subtract(m){return this.add(m.negate())}is0(){return this.equals(h.ZERO)}wNAF(m){return B.wNAFCached(this,m,h.normalizeZ)}multiplyUnsafe(m){const{endo:w,n:E}=t;et("scalar",m,Ee,E);const P=h.ZERO;if(m===Ee)return P;if(this.is0()||m===D)return this;if(!w||B.hasPrecomputes(this))return B.wNAFCachedUnsafe(this,m,h.normalizeZ);let{k1neg:A,k1:k,k2neg:z,k2:S}=w.splitScalar(m),F=P,N=P,U=this;for(;k>Ee||S>Ee;)k&D&&(F=F.add(U)),S&D&&(N=N.add(U)),U=U.double(),k>>=D,S>>=D;return A&&(F=F.negate()),z&&(N=N.negate()),N=new h(n.mul(N.px,w.beta),N.py,N.pz),F.add(N)}multiply(m){const{endo:w,n:E}=t;et("scalar",m,D,E);let P,A;if(w){const{k1neg:k,k1:z,k2neg:S,k2:F}=w.splitScalar(m);let{p:N,f:U}=this.wNAF(z),{p:x,f:$}=this.wNAF(F);N=B.constTimeNegate(k,N),x=B.constTimeNegate(S,x),x=new h(n.mul(x.px,w.beta),x.py,x.pz),P=N.add(x),A=U.add($)}else{const{p:k,f:z}=this.wNAF(m);P=k,A=z}return h.normalizeZ([P,A])[0]}multiplyAndAddUnsafe(m,w,E){const P=h.BASE,A=(z,S)=>S===Ee||S===D||!z.equals(P)?z.multiplyUnsafe(S):z.multiply(S),k=A(this,w).add(A(m,E));return k.is0()?void 0:k}toAffine(m){return b(this,m)}isTorsionFree(){const{h:m,isTorsionFree:w}=t;if(m===D)return!0;if(w)return w(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:m,clearCofactor:w}=t;return m===D?this:w?w(h,this):this.multiplyUnsafe(t.h)}toRawBytes(m=!0){return gt("isCompressed",m),this.assertValidity(),s(h,this,m)}toHex(m=!0){return gt("isCompressed",m),wt(this.toRawBytes(m))}}h.BASE=new h(t.Gx,t.Gy,n.ONE),h.ZERO=new h(n.ZERO,n.ONE,n.ZERO);const{endo:y,nBitLength:v}=t,B=ed(h,y?Math.ceil(v/2):v);return{CURVE:t,ProjectivePoint:h,normPrivateKeyToScalar:d,weierstrassEquation:i,isWithinCurveOrder:f}}function id(e){const t=Mi(e);return nn(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function ad(e){const t=id(e),{Fp:n,n:r,nByteLength:s,nBitLength:o}=t,i=n.BYTES+1,c=2*n.BYTES+1;function a(x){return J(x,r)}function u(x){return Jn(x,r)}const{ProjectivePoint:f,normPrivateKeyToScalar:d,weierstrassEquation:l,isWithinCurveOrder:b}=od({...t,toBytes(x,$,R){const I=$.toAffine(),C=n.toBytes(I.x),O=Ht;return gt("isCompressed",R),R?O(Uint8Array.from([$.hasEvenY()?2:3]),C):O(Uint8Array.from([4]),C,n.toBytes(I.y))},fromBytes(x){const $=x.length,R=x[0],I=x.subarray(1);if($===i&&(R===2||R===3)){const C=Me(I);if(!Ir(C,D,n.ORDER))throw new Error("Point is not on curve");const O=l(C);let M;try{M=n.sqrt(O)}catch(Z){const j=Z instanceof Error?": "+Z.message:"";throw new Error("Point is not on curve"+j)}const H=(M&D)===D;return(R&1)===1!==H&&(M=n.neg(M)),{x:C,y:M}}else if($===c&&R===4){const C=n.fromBytes(I.subarray(0,n.BYTES)),O=n.fromBytes(I.subarray(n.BYTES,2*n.BYTES));return{x:C,y:O}}else{const C=i,O=c;throw new Error("invalid Point, expected length of "+C+", or uncompressed "+O+", got "+$)}}});function p(x){const $=r>>D;return x>$}function h(x){return p(x)?a(-x):x}const y=(x,$,R)=>Me(x.slice($,R));class v{constructor($,R,I){et("r",$,D,r),et("s",R,D,r),this.r=$,this.s=R,I!=null&&(this.recovery=I),Object.freeze(this)}static fromCompact($){const R=s;return $=se("compactSignature",$,R*2),new v(y($,0,R),y($,R,2*R))}static fromDER($){const{r:R,s:I}=Pe.toSig(se("DER",$));return new v(R,I)}assertValidity(){}addRecoveryBit($){return new v(this.r,this.s,$)}recoverPublicKey($){const{r:R,s:I,recovery:C}=this,O=P(se("msgHash",$));if(C==null||![0,1,2,3].includes(C))throw new Error("recovery id invalid");const M=C===2||C===3?R+t.n:R;if(M>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const H=C&1?"03":"02",V=f.fromHex(H+Fn(M,n.BYTES)),Z=u(M),j=a(-O*Z),W=a(I*Z),ke=f.BASE.multiplyAndAddUnsafe(V,j,W);if(!ke)throw new Error("point at infinify");return ke.assertValidity(),ke}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new v(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Ut(this.toDERHex())}toDERHex(){return Pe.hexFromSig(this)}toCompactRawBytes(){return Ut(this.toCompactHex())}toCompactHex(){const $=s;return Fn(this.r,$)+Fn(this.s,$)}}const B={isValidPrivateKey(x){try{return d(x),!0}catch{return!1}},normPrivateKeyToScalar:d,randomPrivateKey:()=>{const x=Oi(t.n);return Jf(t.randomBytes(x),t.n)},precompute(x=8,$=f.BASE){return $._setWindowSize(x),$.multiply(BigInt(3)),$}};function g(x,$=!0){return f.fromPrivateKey(x).toRawBytes($)}function m(x){if(typeof x=="bigint")return!1;if(x instanceof f)return!0;const R=se("key",x).length,I=n.BYTES,C=I+1,O=2*I+1;if(!(t.allowedPrivateKeyLengths||s===C))return R===C||R===O}function w(x,$,R=!0){if(m(x)===!0)throw new Error("first arg must be private key");if(m($)===!1)throw new Error("second arg must be public key");return f.fromHex($).multiply(d(x)).toRawBytes(R)}const E=t.bits2int||function(x){if(x.length>8192)throw new Error("input is too large");const $=Me(x),R=x.length*8-o;return R>0?$>>BigInt(R):$},P=t.bits2int_modN||function(x){return a(E(x))},A=tn(o);function k(x){return et("num < 2^"+o,x,Ee,A),Tt(x,s)}function z(x,$,R=S){if(["recovered","canonical"].some(Oe=>Oe in R))throw new Error("sign() legacy options not supported");const{hash:I,randomBytes:C}=t;let{lowS:O,prehash:M,extraEntropy:H}=R;O==null&&(O=!0),x=se("msgHash",x),Ls(R),M&&(x=se("prehashed msgHash",I(x)));const V=P(x),Z=d($),j=[k(Z),k(V)];if(H!=null&&H!==!1){const Oe=H===!0?C(n.BYTES):H;j.push(se("extraEntropy",Oe))}const W=Ht(...j),ke=V;function hn(Oe){const We=E(Oe);if(!b(We))return;const pn=u(We),ut=f.BASE.multiply(We).toAffine(),_e=a(ut.x);if(_e===Ee)return;const ft=a(pn*a(ke+_e*Z));if(ft===Ee)return;let dt=(ut.x===_e?0:2)|Number(ut.y&D),Ke=ft;return O&&p(ft)&&(Ke=h(ft),dt^=1),new v(_e,Ke,dt)}return{seed:W,k2sig:hn}}const S={lowS:t.lowS,prehash:!1},F={lowS:t.lowS,prehash:!1};function N(x,$,R=S){const{seed:I,k2sig:C}=z(x,$,R),O=t;return Bc(O.hash.outputLen,O.nByteLength,O.hmac)(I,C)}f.BASE._setWindowSize(8);function U(x,$,R,I=F){var dt;const C=x;$=se("msgHash",$),R=se("publicKey",R);const{lowS:O,prehash:M,format:H}=I;if(Ls(I),"strict"in I)throw new Error("options.strict was renamed to lowS");if(H!==void 0&&H!=="compact"&&H!=="der")throw new Error("format must be compact or der");const V=typeof C=="string"||St(C),Z=!V&&!H&&typeof C=="object"&&C!==null&&typeof C.r=="bigint"&&typeof C.s=="bigint";if(!V&&!Z)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let j,W;try{if(Z&&(j=new v(C.r,C.s)),V){try{H!=="compact"&&(j=v.fromDER(C))}catch(Ke){if(!(Ke instanceof Pe.Err))throw Ke}!j&&H!=="der"&&(j=v.fromCompact(C))}W=f.fromHex(R)}catch{return!1}if(!j||O&&j.hasHighS())return!1;M&&($=t.hash($));const{r:ke,s:hn}=j,Oe=P($),We=u(hn),pn=a(Oe*We),ut=a(ke*We),_e=(dt=f.BASE.multiplyAndAddUnsafe(W,pn,ut))==null?void 0:dt.toAffine();return _e?a(_e.x)===ke:!1}return{CURVE:t,getPublicKey:g,getSharedSecret:w,sign:N,verify:U,ProjectivePoint:f,Signature:v,utils:B}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function cd(e){return{hash:e,hmac:(t,...n)=>Si(e,t,Aa(...n)),randomBytes:Ia}}function ud(e,t){const n=r=>ad({...e,...cd(r)});return{...n(t),create:n}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Gi=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Ms=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),fd=BigInt(0),dd=BigInt(1),Qn=BigInt(2),Gs=(e,t)=>(e+t/Qn)/t;function ld(e){const t=Gi,n=BigInt(3),r=BigInt(6),s=BigInt(11),o=BigInt(22),i=BigInt(23),c=BigInt(44),a=BigInt(88),u=e*e*e%t,f=u*u*e%t,d=re(f,n,t)*f%t,l=re(d,n,t)*f%t,b=re(l,Qn,t)*u%t,p=re(b,s,t)*b%t,h=re(p,o,t)*p%t,y=re(h,c,t)*h%t,v=re(y,a,t)*y%t,B=re(v,c,t)*h%t,g=re(B,n,t)*f%t,m=re(g,i,t)*p%t,w=re(m,r,t)*u%t,E=re(w,Qn,t);if(!er.eql(er.sqr(E),e))throw new Error("Cannot find square root");return E}const er=Gr(Gi,void 0,void 0,{sqrt:ld}),Ur=ud({a:fd,b:BigInt(7),Fp:er,n:Ms,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=Ms,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-dd*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=n,i=BigInt("0x100000000000000000000000000000000"),c=Gs(o*e,t),a=Gs(-r*e,t);let u=J(e-c*n-a*s,t),f=J(-c*r-a*o,t);const d=u>i,l=f>i;if(d&&(u=t-u),l&&(f=t-f),u>i||f>i)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:d,k1:u,k2neg:l,k2:f}}}},Ro),bd=Object.freeze(Object.defineProperty({__proto__:null,secp256k1:Ur},Symbol.toStringTag,{value:"Module"}));function Ui(e,t={}){const{recovered:n}=t;if(typeof e.r>"u")throw new zn({signature:e});if(typeof e.s>"u")throw new zn({signature:e});if(n&&typeof e.yParity>"u")throw new zn({signature:e});if(e.r<0n||e.r>Fs)throw new xd({value:e.r});if(e.s<0n||e.s>Fs)throw new vd({value:e.s});if(typeof e.yParity=="number"&&e.yParity!==0&&e.yParity!==1)throw new jr({value:e.yParity})}function hd(e){return Hi(de(e))}function Hi(e){if(e.length!==130&&e.length!==132)throw new wd({signature:e});const t=BigInt(ge(e,0,32)),n=BigInt(ge(e,32,64)),r=(()=>{const s=+`0x${e.slice(130)}`;if(!Number.isNaN(s))try{return Hr(s)}catch{throw new jr({value:s})}})();return typeof r>"u"?{r:t,s:n}:{r:t,s:n,yParity:r}}function pd(e){if(!(typeof e.r>"u")&&!(typeof e.s>"u"))return md(e)}function md(e){const t=typeof e=="string"?Hi(e):e instanceof Uint8Array?hd(e):typeof e.r=="string"?gd(e):e.v?yd(e):{r:e.r,s:e.s,...typeof e.yParity<"u"?{yParity:e.yParity}:{}};return Ui(t),t}function yd(e){return{r:e.r,s:e.s,yParity:Hr(e.v)}}function gd(e){const t=(()=>{const n=e.v?Number(e.v):void 0;let r=e.yParity?Number(e.yParity):void 0;if(typeof n=="number"&&typeof r!="number"&&(r=Hr(n)),typeof r!="number")throw new jr({value:e.yParity});return r})();return{r:BigInt(e.r),s:BigInt(e.s),yParity:t}}function Hr(e){if(e===0||e===27)return 0;if(e===1||e===28)return 1;if(e>=35)return e%2===0?1:0;throw new Pd({value:e})}class wd extends G{constructor({signature:t}){super(`Value \`${t}\` is an invalid signature size.`,{metaMessages:["Expected: 64 bytes or 65 bytes.",`Received ${ne(Kc(t))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSerializedSizeError"})}}class zn extends G{constructor({signature:t}){super(`Signature \`${Qo(t)}\` is missing either an \`r\`, \`s\`, or \`yParity\` property.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.MissingPropertiesError"})}}class xd extends G{constructor({value:t}){super(`Value \`${t}\` is an invalid r value. r must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidRError"})}}class vd extends G{constructor({value:t}){super(`Value \`${t}\` is an invalid s value. s must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSError"})}}class jr extends G{constructor({value:t}){super(`Value \`${t}\` is an invalid y-parity value. Y-parity must be 0 or 1.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidYParityError"})}}class Pd extends G{constructor({value:t}){super(`Value \`${t}\` is an invalid v value. v must be 27, 28 or >=35.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidVError"})}}function Ed(e,t={}){return typeof e.chainId=="string"?Bd(e):{...e,...t.signature}}function Bd(e){const{address:t,chainId:n,nonce:r}=e,s=pd(e);return{address:t,chainId:Number(n),nonce:BigInt(r),...s}}const Id="0x8010801080108010801080108010801080108010801080108010801080108010",Ad=Bi("(uint256 chainId, address delegation, uint256 nonce, uint8 yParity, uint256 r, uint256 s), address to, bytes data");function ji(e){if(typeof e=="string"){if(ge(e,-32)!==Id)throw new Td(e)}else Ui(e.authorization)}function $d(e){ji(e);const t=si(ge(e,-64,-32)),n=ge(e,-t-64,-64),r=ge(e,0,-t-64),[s,o,i]=Mf(Ad,n);return{authorization:Ed({address:s.delegation,chainId:Number(s.chainId),nonce:s.nonce,yParity:s.yParity,r:s.r,s:s.s}),signature:r,...i&&i!=="0x"?{data:i,to:o}:{}}}function Sd(e){try{return ji(e),!0}catch{return!1}}let Td=class extends G{constructor(t){super(`Value \`${t}\` is an invalid ERC-8010 wrapped signature.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SignatureErc8010.InvalidWrappedSignatureError"})}};function $l(e){const{address:t,data:n,signature:r,to:s="hex"}=e,o=be([vt([{type:"address"},{type:"bytes"},{type:"bytes"}],[t,n,r]),lf]);return s==="hex"?o:$e(o)}function Nd(e){return e.map(t=>({...t,value:BigInt(t.value)}))}function kd(e){return{...e,balance:e.balance?BigInt(e.balance):void 0,nonce:e.nonce?oe(e.nonce):void 0,storageProof:e.storageProof?Nd(e.storageProof):void 0}}async function Fd(e,{address:t,blockNumber:n,blockTag:r,storageKeys:s}){const o=r??"latest",i=n!==void 0?T(n):void 0,c=await e.request({method:"eth_getProof",params:[t,s,i||o]});return kd(c)}async function Cd(e,{address:t,blockNumber:n,blockTag:r="latest",slot:s}){const o=n!==void 0?T(n):void 0;return await e.request({method:"eth_getStorageAt",params:[t,s,o||r]})}async function Dr(e,{blockHash:t,blockNumber:n,blockTag:r,hash:s,index:o,sender:i,nonce:c}){var l,b,p;const a=r||"latest",u=n!==void 0?T(n):void 0;let f=null;if(s?f=await e.request({method:"eth_getTransactionByHash",params:[s]},{dedupe:!0}):t?f=await e.request({method:"eth_getTransactionByBlockHashAndIndex",params:[t,T(o)]},{dedupe:!0}):typeof o=="number"?f=await e.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[u||a,T(o)]},{dedupe:!!u}):i&&typeof c=="number"&&(f=await e.request({method:"eth_getTransactionBySenderAndNonce",params:[i,T(c)]},{dedupe:!0})),!f)throw new Po({blockHash:t,blockNumber:n,blockTag:a,hash:s,index:o});return(((p=(b=(l=e.chain)==null?void 0:l.formatters)==null?void 0:b.transaction)==null?void 0:p.format)||Qt)(f,"getTransaction")}async function zd(e,{hash:t,transactionReceipt:n}){const[r,s]=await Promise.all([_(e,kt,"getBlockNumber")({}),t?_(e,Dr,"getTransaction")({hash:t}):void 0]),o=(n==null?void 0:n.blockNumber)||(s==null?void 0:s.blockNumber);return o?r-o+1n:0n}async function Rt(e,{hash:t}){var s,o,i;const n=await e.request({method:"eth_getTransactionReceipt",params:[t]},{dedupe:!0});if(!n)throw new Eo({hash:t});return(((i=(o=(s=e.chain)==null?void 0:s.formatters)==null?void 0:o.transactionReceipt)==null?void 0:i.format)||Tr)(n,"getTransactionReceipt")}async function Rd(e,t){var B;const{account:n,authorizationList:r,allowFailure:s=!0,blockNumber:o,blockOverrides:i,blockTag:c,stateOverride:a}=t,u=t.contracts,{batchSize:f=t.batchSize??1024,deployless:d=t.deployless??!1}=typeof((B=e.batch)==null?void 0:B.multicall)=="object"?e.batch.multicall:{},l=(()=>{if(t.multicallAddress)return t.multicallAddress;if(d)return null;if(e.chain)return at({blockNumber:o,chain:e.chain,contract:"multicall3"});throw new Error("client chain not configured. multicallAddress is required.")})(),b=[[]];let p=0,h=0;for(let g=0;g<u.length;g++){const{abi:m,address:w,args:E,functionName:P}=u[g];try{const A=he({abi:m,args:E,functionName:P});h+=(A.length-2)/2,f>0&&h>f&&b[p].length>0&&(p++,h=(A.length-2)/2,b[p]=[]),b[p]=[...b[p],{allowFailure:!0,callData:A,target:w}]}catch(A){const k=rt(A,{abi:m,address:w,args:E,docsPath:"/docs/contract/multicall",functionName:P,sender:n});if(!s)throw k;b[p]=[...b[p],{allowFailure:!0,callData:"0x",target:w}]}}const y=await Promise.allSettled(b.map(g=>_(e,le,"readContract")({...l===null?{code:$r}:{address:l},abi:Gt,account:n,args:[g],authorizationList:r,blockNumber:o,blockOverrides:i,blockTag:c,functionName:"aggregate3",stateOverride:a}))),v=[];for(let g=0;g<y.length;g++){const m=y[g];if(m.status==="rejected"){if(!s)throw m.reason;for(let E=0;E<b[g].length;E++)v.push({status:"failure",error:m.reason,result:void 0});continue}const w=m.value;for(let E=0;E<w.length;E++){const{returnData:P,success:A}=w[E],{callData:k}=b[g][E],{abi:z,address:S,functionName:F,args:N}=u[v.length];try{if(k==="0x")throw new Pt;if(!A)throw new Kt({data:P});const U=Ze({abi:z,args:N,data:P,functionName:F});v.push(s?{result:U,status:"success"}:U)}catch(U){const x=rt(U,{abi:z,address:S,args:N,docsPath:"/docs/contract/multicall",functionName:F});if(!s)throw x;v.push({error:x,result:void 0,status:"failure"})}}}if(v.length!==u.length)throw new L("multicall results mismatch");return v}async function tr(e,t){const{blockNumber:n,blockTag:r=e.experimental_blockTag??"latest",blocks:s,returnFullTransactions:o,traceTransfers:i,validation:c}=t;try{const a=[];for(const l of s){const b=l.blockOverrides?ai(l.blockOverrides):void 0,p=l.calls.map(y=>{const v=y,B=v.account?te(v.account):void 0,g=v.abi?he(v):v.data,m={...v,account:B,data:v.dataSuffix?ro([g||"0x",v.dataSuffix]):g,from:v.from??(B==null?void 0:B.address)};return it(m),$t(m)}),h=l.stateOverrides?dr(l.stateOverrides):void 0;a.push({blockOverrides:b,calls:p,stateOverrides:h})}const f=(typeof n=="bigint"?T(n):void 0)||r;return(await e.request({method:"eth_simulateV1",params:[{blockStateCalls:a,returnFullTransactions:o,traceTransfers:i,validation:c},f]})).map((l,b)=>({...br(l),calls:l.calls.map((p,h)=>{var z,S;const{abi:y,args:v,functionName:B,to:g}=s[b].calls[h],m=((z=p.error)==null?void 0:z.data)??p.returnData,w=BigInt(p.gasUsed),E=(S=p.logs)==null?void 0:S.map(F=>Te(F)),P=p.status==="0x1"?"success":"failure",A=y&&P==="success"&&m!=="0x"?Ze({abi:y,data:m,functionName:B}):null,k=(()=>{var N;if(P==="success")return;let F;if(((N=p.error)==null?void 0:N.data)==="0x"?F=new Pt:p.error&&(F=new Kt(p.error)),!!F)return rt(F,{abi:y??[],address:g??"0x",args:v,functionName:B??"<unknown>"})})();return{data:m,gasUsed:w,logs:E,status:P,...P==="success"?{result:A}:{error:k}}})}))}catch(a){const u=a,f=Yt(u,{});throw f instanceof Et?u:f}}function nr(e){let t=!0,n="",r=0,s="",o=!1;for(let i=0;i<e.length;i++){const c=e[i];if(["(",")",","].includes(c)&&(t=!0),c==="("&&r++,c===")"&&r--,!!t){if(r===0){if(c===" "&&["event","function","error",""].includes(s))s="";else if(s+=c,c===")"){o=!0;break}continue}if(c===" "){e[i-1]!==","&&n!==","&&n!==",("&&(n="",t=!1);continue}s+=c,n+=c}}if(!o)throw new G("Unable to normalize signature.");return s}function rr(e,t){const n=typeof e,r=t.type;switch(r){case"address":return Wn(e,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in t?Object.values(t.components).every((s,o)=>rr(Object.values(e)[o],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||e instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(e)&&e.every(s=>rr(s,{...t,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function Di(e,t,n){for(const r in e){const s=e[r],o=t[r];if(s.type==="tuple"&&o.type==="tuple"&&"components"in s&&"components"in o)return Di(s.components,o.components,n[r]);const i=[s.type,o.type];if(i.includes("address")&&i.includes("bytes20")?!0:i.includes("address")&&i.includes("string")?Wn(n[r],{strict:!1}):i.includes("address")&&i.includes("bytes")?Wn(n[r],{strict:!1}):!1)return i}}function Vi(e,t={}){const{prepare:n=!0}=t,r=Array.isArray(e)||typeof e=="string"?us(e):e;return{...r,...n?{hash:Xe(r)}:{}}}function ln(e,t,n){const{args:r=[],prepare:s=!0}=n??{},o=Yc(t,{strict:!1}),i=e.filter(u=>o?u.type==="function"||u.type==="error"?qi(u)===ge(t,0,4):u.type==="event"?Xe(u)===t:!1:"name"in u&&u.name===t);if(i.length===0)throw new jt({name:t});if(i.length===1)return{...i[0],...s?{hash:Xe(i[0])}:{}};let c;for(const u of i){if(!("inputs"in u))continue;if(!r||r.length===0){if(!u.inputs||u.inputs.length===0)return{...u,...s?{hash:Xe(u)}:{}};continue}if(!u.inputs||u.inputs.length===0||u.inputs.length!==r.length)continue;if(r.every((d,l)=>{const b="inputs"in u&&u.inputs[l];return b?rr(d,b):!1})){if(c&&"inputs"in c&&c.inputs){const d=Di(u.inputs,c.inputs,r);if(d)throw new _d({abiItem:u,type:d[0]},{abiItem:c,type:d[1]})}c=u}}const a=(()=>{if(c)return c;const[u,...f]=i;return{...u,overloads:f}})();if(!a)throw new jt({name:t});return{...a,...s?{hash:Xe(a)}:{}}}function qi(...e){const t=(()=>{if(Array.isArray(e[0])){const[n,r]=e;return ln(n,r)}return e[0]})();return ge(Xe(t),0,4)}function Od(...e){const t=(()=>{if(Array.isArray(e[0])){const[r,s]=e;return ln(r,s)}return e[0]})(),n=typeof t=="string"?t:_n(t);return nr(n)}function Xe(...e){const t=(()=>{if(Array.isArray(e[0])){const[n,r]=e;return ln(n,r)}return e[0]})();return typeof t!="string"&&"hash"in t&&t.hash?t.hash:vi(Ar(Od(t)))}class _d extends G{constructor(t,n){super("Found ambiguous types in overloaded ABI Items.",{metaMessages:[`\`${t.type}\` in \`${nr(_n(t.abiItem))}\`, and`,`\`${n.type}\` in \`${nr(_n(n.abiItem))}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.AmbiguityError"})}}class jt extends G{constructor({name:t,data:n,type:r="item"}){const s=t?` with name "${t}"`:n?` with data "${n}"`:"";super(`ABI ${r}${s} not found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.NotFoundError"})}}function Ld(...e){var o;const[t,n]=(()=>{if(Array.isArray(e[0])){const[i,c]=e;return[Gd(i),c]}return e})(),{bytecode:r,args:s}=n;return fe(r,(o=t.inputs)!=null&&o.length&&(s!=null&&s.length)?Lr(t.inputs,s):"0x")}function Md(e){return Vi(e)}function Gd(e){const t=e.find(n=>n.type==="constructor");if(!t)throw new jt({name:"constructor"});return t}function Ud(...e){const[t,n=[]]=(()=>{if(Array.isArray(e[0])){const[u,f,d]=e;return[Us(u,f,{args:d}),d]}const[c,a]=e;return[c,a]})(),{overloads:r}=t,s=r?Us([t,...r],t.name,{args:n}):t,o=Hd(s),i=n.length>0?Lr(s.inputs,n):void 0;return i?fe(o,i):o}function Ye(e,t={}){return Vi(e,t)}function Us(e,t,n){const r=ln(e,t,n);if(r.type!=="function")throw new jt({name:t,type:"function"});return r}function Hd(e){return qi(e)}const jd="0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",me="0x0000000000000000000000000000000000000000",Dd="0x6080604052348015600e575f80fd5b5061016d8061001c5f395ff3fe608060405234801561000f575f80fd5b5060043610610029575f3560e01c8063f8b2cb4f1461002d575b5f80fd5b610047600480360381019061004291906100db565b61005d565b604051610054919061011e565b60405180910390f35b5f8173ffffffffffffffffffffffffffffffffffffffff16319050919050565b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6100aa82610081565b9050919050565b6100ba816100a0565b81146100c4575f80fd5b50565b5f813590506100d5816100b1565b92915050565b5f602082840312156100f0576100ef61007d565b5b5f6100fd848285016100c7565b91505092915050565b5f819050919050565b61011881610106565b82525050565b5f6020820190506101315f83018461010f565b9291505056fea26469706673582212203b9fe929fe995c7cf9887f0bdba8a36dd78e8b73f149b17d2d9ad7cd09d2dc6264736f6c634300081a0033";async function Vd(e,t){const{blockNumber:n,blockTag:r,calls:s,stateOverrides:o,traceAssetChanges:i,traceTransfers:c,validation:a}=t,u=t.account?te(t.account):void 0;if(i&&!u)throw new L("`account` is required when `traceAssetChanges` is true");const f=u?Ld(Md("constructor(bytes, bytes)"),{bytecode:ci,args:[Dd,Ud(Ye("function getBalance(address)"),[u.address])]}):void 0,d=i?await Promise.all(t.calls.map(async I=>{if(!I.data&&!I.abi)return;const{accessList:C}=await yi(e,{account:u.address,...I,data:I.abi?he(I):I.data});return C.map(({address:O,storageKeys:M})=>M.length>0?O:null)})).then(I=>I.flat().filter(Boolean)):[],l=await tr(e,{blockNumber:n,blockTag:r,blocks:[...i?[{calls:[{data:f}],stateOverrides:o},{calls:d.map((I,C)=>({abi:[Ye("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[u.address],to:I,from:me,nonce:C})),stateOverrides:[{address:me,nonce:0}]}]:[],{calls:[...s,{}].map(I=>({...I,from:u==null?void 0:u.address})),stateOverrides:o},...i?[{calls:[{data:f}]},{calls:d.map((I,C)=>({abi:[Ye("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[u.address],to:I,from:me,nonce:C})),stateOverrides:[{address:me,nonce:0}]},{calls:d.map((I,C)=>({to:I,abi:[Ye("function decimals() returns (uint256)")],functionName:"decimals",from:me,nonce:C})),stateOverrides:[{address:me,nonce:0}]},{calls:d.map((I,C)=>({to:I,abi:[Ye("function tokenURI(uint256) returns (string)")],functionName:"tokenURI",args:[0n],from:me,nonce:C})),stateOverrides:[{address:me,nonce:0}]},{calls:d.map((I,C)=>({to:I,abi:[Ye("function symbol() returns (string)")],functionName:"symbol",from:me,nonce:C})),stateOverrides:[{address:me,nonce:0}]}]:[]],traceTransfers:c,validation:a}),b=i?l[2]:l[0],[p,h,,y,v,B,g,m]=i?l:[],{calls:w,...E}=b,P=w.slice(0,-1)??[],A=(p==null?void 0:p.calls)??[],k=(h==null?void 0:h.calls)??[],z=[...A,...k].map(I=>I.status==="success"?ce(I.data):null),S=(y==null?void 0:y.calls)??[],F=(v==null?void 0:v.calls)??[],N=[...S,...F].map(I=>I.status==="success"?ce(I.data):null),U=((B==null?void 0:B.calls)??[]).map(I=>I.status==="success"?I.result:null),x=((m==null?void 0:m.calls)??[]).map(I=>I.status==="success"?I.result:null),$=((g==null?void 0:g.calls)??[]).map(I=>I.status==="success"?I.result:null),R=[];for(const[I,C]of N.entries()){const O=z[I];if(typeof C!="bigint"||typeof O!="bigint")continue;const M=U[I-1],H=x[I-1],V=$[I-1],Z=I===0?{address:jd,decimals:18,symbol:"ETH"}:{address:d[I-1],decimals:V||M?Number(M??1):void 0,symbol:H??void 0};R.some(j=>j.token.address===Z.address)||R.push({token:Z,value:{pre:O,post:C,diff:C-O}})}return{assetChanges:R,block:E,results:P}}const Zi="0x6492649264926492649264926492649264926492649264926492649264926492";function qd(e){if(ge(e,-32)!==Zi)throw new Kd(e)}function Zd(e){const{data:t,signature:n,to:r}=e;return fe(Lr(Bi("address, bytes, bytes"),[r,t,n]),Zi)}function Wd(e){try{return qd(e),!0}catch{return!1}}class Kd extends G{constructor(t){super(`Value \`${t}\` is an invalid ERC-6492 wrapped signature.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SignatureErc6492.InvalidWrappedSignatureError"})}}function Yd({r:e,s:t,to:n="hex",v:r,yParity:s}){const o=(()=>{if(s===0||s===1)return s;if(r&&(r===27n||r===28n||r>=35n))return r%2n===0n?1:0;throw new Error("Invalid `v` or `yParity` value")})(),i=`0x${new Ur.Signature(ce(e),ce(t)).toCompactHex()}${o===0?"1b":"1c"}`;return n==="hex"?i:$e(i)}async function bn(e,t){var c,a,u,f,d,l;const{address:n,hash:r,erc6492VerifierAddress:s=t.universalSignatureVerifierAddress??((u=(a=(c=e.chain)==null?void 0:c.contracts)==null?void 0:a.erc6492Verifier)==null?void 0:u.address),multicallAddress:o=t.multicallAddress??((l=(d=(f=e.chain)==null?void 0:f.contracts)==null?void 0:d.multicall3)==null?void 0:l.address)}=t,i=(()=>{const b=t.signature;return pt(b)?b:typeof b=="object"&&"r"in b&&"s"in b?Yd(b):q(b)})();try{return Sd(i)?await Jd(e,{...t,multicallAddress:o,signature:i}):await Xd(e,{...t,verifierAddress:s,signature:i})}catch(b){try{if(en(oo(n),await Ao({hash:r,signature:i})))return!0}catch{}if(b instanceof Ve)return!1;throw b}}async function Jd(e,t){var y;const{address:n,blockNumber:r,blockTag:s,hash:o,multicallAddress:i}=t,{authorization:c,data:a,signature:u,to:f}=$d(t.signature);if(await Zn(e,{address:n,blockNumber:r,blockTag:s})===be(["0xef0100",c.address]))return await Qd(e,{address:n,blockNumber:r,blockTag:s,hash:o,signature:u});const l={address:c.address,chainId:Number(c.chainId),nonce:Number(c.nonce),r:T(c.r,{size:32}),s:T(c.s,{size:32}),yParity:c.yParity};if(!await df({address:n,authorization:l}))throw new Ve;const p=await _(e,le,"readContract")({...i?{address:i}:{code:$r},authorizationList:[l],abi:Gt,blockNumber:r,blockTag:"pending",functionName:"aggregate3",args:[[...a?[{allowFailure:!0,target:f??n,callData:a}]:[],{allowFailure:!0,target:n,callData:he({abi:io,functionName:"isValidSignature",args:[o,u]})}]]}),h=(y=p[p.length-1])==null?void 0:y.returnData;if(h!=null&&h.startsWith("0x1626ba7e"))return!0;throw new Ve}async function Xd(e,t){const{address:n,factory:r,factoryData:s,hash:o,signature:i,verifierAddress:c,...a}=t,u=await(async()=>!r&&!s||Wd(i)?i:Zd({data:s,signature:i,to:r}))(),f=c?{to:c,data:he({abi:as,functionName:"isValidSig",args:[n,o,u]}),...a}:{data:Sr({abi:as,args:[n,o,u],bytecode:nu}),...a},{data:d}=await _(e,on,"call")(f).catch(l=>{throw l instanceof Bo?new Ve:l});if($a(d??"0x0"))return!0;throw new Ve}async function Qd(e,t){const{address:n,blockNumber:r,blockTag:s,hash:o,signature:i}=t;if((await _(e,le,"readContract")({address:n,abi:io,args:[o,i],blockNumber:r,blockTag:s,functionName:"isValidSignature"}).catch(a=>{throw a instanceof Io?new Ve:a})).startsWith("0x1626ba7e"))return!0;throw new Ve}class Ve extends Error{}async function el(e,{address:t,message:n,factory:r,factoryData:s,signature:o,...i}){const c=ao(n);return _(e,bn,"verifyHash")({address:t,factory:r,factoryData:s,hash:c,signature:o,...i})}async function tl(e,t){const{address:n,factory:r,factoryData:s,signature:o,message:i,primaryType:c,types:a,domain:u,...f}=t,d=Sa({message:i,primaryType:c,types:a,domain:u});return _(e,bn,"verifyHash")({address:n,factory:r,factoryData:s,hash:d,signature:o,...f})}function Wi(e,{emitOnBegin:t=!1,emitMissed:n=!1,onBlockNumber:r,onError:s,poll:o,pollingInterval:i=e.pollingInterval}){const c=typeof o<"u"?o:!(e.transport.type==="webSocket"||e.transport.type==="ipc"||e.transport.type==="fallback"&&(e.transport.transports[0].config.type==="webSocket"||e.transport.transports[0].config.type==="ipc"));let a;return c?(()=>{const d=we(["watchBlockNumber",e.uid,t,n,i]);return Ne(d,{onBlockNumber:r,onError:s},l=>ct(async()=>{var b;try{const p=await _(e,kt,"getBlockNumber")({cacheTime:0});if(a!==void 0){if(p===a)return;if(p-a>1&&n)for(let h=a+1n;h<p;h++)l.onBlockNumber(h,a),a=h}(a===void 0||p>a)&&(l.onBlockNumber(p,a),a=p)}catch(p){(b=l.onError)==null||b.call(l,p)}},{emitOnBegin:t,interval:i}))})():(()=>{const d=we(["watchBlockNumber",e.uid,t,n]);return Ne(d,{onBlockNumber:r,onError:s},l=>{let b=!0,p=()=>b=!1;return(async()=>{try{const h=(()=>{if(e.transport.type==="fallback"){const v=e.transport.transports.find(B=>B.config.type==="webSocket"||B.config.type==="ipc");return v?v.value:e.transport}return e.transport})(),{unsubscribe:y}=await h.subscribe({params:["newHeads"],onData(v){var g;if(!b)return;const B=ce((g=v.result)==null?void 0:g.number);l.onBlockNumber(B,a),a=B},onError(v){var B;(B=l.onError)==null||B.call(l,v)}});p=y,b||p()}catch(h){s==null||s(h)}})(),()=>p()})})()}async function nl(e,t){const{checkReplacement:n=!0,confirmations:r=1,hash:s,onReplaced:o,retryCount:i=6,retryDelay:c=({count:w})=>~~(1<<w)*200,timeout:a=18e4}=t,u=we(["waitForTransactionReceipt",e.uid,s]),f=(()=>{var w;return t.pollingInterval?t.pollingInterval:(w=e.chain)!=null&&w.experimental_preconfirmationTime?e.chain.experimental_preconfirmationTime:e.pollingInterval})();let d,l,b,p=!1,h,y;const{promise:v,resolve:B,reject:g}=no(),m=a?setTimeout(()=>{y==null||y(),h==null||h(),g(new G0({hash:s}))},a):void 0;return h=Ne(u,{onReplaced:o,resolve:B,reject:g},async w=>{if(b=await _(e,Rt,"getTransactionReceipt")({hash:s}).catch(()=>{}),b&&r<=1){clearTimeout(m),w.resolve(b),h==null||h();return}y=_(e,Wi,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:f,async onBlockNumber(E){const P=k=>{clearTimeout(m),y==null||y(),k(),h==null||h()};let A=E;if(!p)try{if(b){if(r>1&&(!b.blockNumber||A-b.blockNumber+1n<r))return;P(()=>w.resolve(b));return}if(n&&!d&&(p=!0,await Rn(async()=>{d=await _(e,Dr,"getTransaction")({hash:s}),d.blockNumber&&(A=d.blockNumber)},{delay:c,retryCount:i}),p=!1),b=await _(e,Rt,"getTransactionReceipt")({hash:s}),r>1&&(!b.blockNumber||A-b.blockNumber+1n<r))return;P(()=>w.resolve(b))}catch(k){if(k instanceof Po||k instanceof Eo){if(!d){p=!1;return}try{l=d,p=!0;const z=await Rn(()=>_(e,ae,"getBlock")({blockNumber:A,includeTransactions:!0}),{delay:c,retryCount:i,shouldRetry:({error:N})=>N instanceof ko});p=!1;const S=z.transactions.find(({from:N,nonce:U})=>N===l.from&&U===l.nonce);if(!S||(b=await _(e,Rt,"getTransactionReceipt")({hash:S.hash}),r>1&&(!b.blockNumber||A-b.blockNumber+1n<r)))return;let F="replaced";S.to===l.to&&S.value===l.value&&S.input===l.input?F="repriced":S.from===S.to&&S.value===0n&&(F="cancelled"),P(()=>{var N;(N=w.onReplaced)==null||N.call(w,{reason:F,replacedTransaction:l,transaction:S,transactionReceipt:b}),w.resolve(b)})}catch(z){P(()=>w.reject(z))}}else P(()=>w.reject(k))}}})}),v}function rl(e,{blockTag:t=e.experimental_blockTag??"latest",emitMissed:n=!1,emitOnBegin:r=!1,onBlock:s,onError:o,includeTransactions:i,poll:c,pollingInterval:a=e.pollingInterval}){const u=typeof c<"u"?c:!(e.transport.type==="webSocket"||e.transport.type==="ipc"||e.transport.type==="fallback"&&(e.transport.transports[0].config.type==="webSocket"||e.transport.transports[0].config.type==="ipc")),f=i??!1;let d;return u?(()=>{const p=we(["watchBlocks",e.uid,t,n,r,f,a]);return Ne(p,{onBlock:s,onError:o},h=>ct(async()=>{var y;try{const v=await _(e,ae,"getBlock")({blockTag:t,includeTransactions:f});if(v.number!==null&&(d==null?void 0:d.number)!=null){if(v.number===d.number)return;if(v.number-d.number>1&&n)for(let B=(d==null?void 0:d.number)+1n;B<v.number;B++){const g=await _(e,ae,"getBlock")({blockNumber:B,includeTransactions:f});h.onBlock(g,d),d=g}}((d==null?void 0:d.number)==null||t==="pending"&&(v==null?void 0:v.number)==null||v.number!==null&&v.number>d.number)&&(h.onBlock(v,d),d=v)}catch(v){(y=h.onError)==null||y.call(h,v)}},{emitOnBegin:r,interval:a}))})():(()=>{let p=!0,h=!0,y=()=>p=!1;return(async()=>{try{r&&_(e,ae,"getBlock")({blockTag:t,includeTransactions:f}).then(g=>{p&&h&&(s(g,void 0),h=!1)}).catch(o);const v=(()=>{if(e.transport.type==="fallback"){const g=e.transport.transports.find(m=>m.config.type==="webSocket"||m.config.type==="ipc");return g?g.value:e.transport}return e.transport})(),{unsubscribe:B}=await v.subscribe({params:["newHeads"],async onData(g){var w;if(!p)return;const m=await _(e,ae,"getBlock")({blockNumber:(w=g.result)==null?void 0:w.number,includeTransactions:f}).catch(()=>{});p&&(s(m,d),h=!1,d=m)},onError(g){o==null||o(g)}});y=B,p||y()}catch(v){o==null||o(v)}})(),()=>y()})()}function sl(e,{address:t,args:n,batch:r=!0,event:s,events:o,fromBlock:i,onError:c,onLogs:a,poll:u,pollingInterval:f=e.pollingInterval,strict:d}){const l=typeof u<"u"?u:typeof i=="bigint"?!0:!(e.transport.type==="webSocket"||e.transport.type==="ipc"||e.transport.type==="fallback"&&(e.transport.transports[0].config.type==="webSocket"||e.transport.transports[0].config.type==="ipc")),b=d??!1;return l?(()=>{const y=we(["watchEvent",t,n,r,e.uid,s,f,i]);return Ne(y,{onLogs:a,onError:c},v=>{let B;i!==void 0&&(B=i-1n);let g,m=!1;const w=ct(async()=>{var E;if(!m){try{g=await _(e,gi,"createEventFilter")({address:t,args:n,event:s,events:o,strict:b,fromBlock:i})}catch{}m=!0;return}try{let P;if(g)P=await _(e,an,"getFilterChanges")({filter:g});else{const A=await _(e,kt,"getBlockNumber")({});B&&B!==A?P=await _(e,Pr,"getLogs")({address:t,args:n,event:s,events:o,fromBlock:B+1n,toBlock:A}):P=[],B=A}if(P.length===0)return;if(r)v.onLogs(P);else for(const A of P)v.onLogs([A])}catch(P){g&&P instanceof ir&&(m=!1),(E=v.onError)==null||E.call(v,P)}},{emitOnBegin:!0,interval:f});return async()=>{g&&await _(e,cn,"uninstallFilter")({filter:g}),w()}})})():(()=>{let y=!0,v=()=>y=!1;return(async()=>{try{const B=(()=>{if(e.transport.type==="fallback"){const E=e.transport.transports.find(P=>P.config.type==="webSocket"||P.config.type==="ipc");return E?E.value:e.transport}return e.transport})(),g=o??(s?[s]:void 0);let m=[];g&&(m=[g.flatMap(P=>Bt({abi:[P],eventName:P.name,args:n}))],s&&(m=m[0]));const{unsubscribe:w}=await B.subscribe({params:["logs",{address:t,topics:m}],onData(E){var A;if(!y)return;const P=E.result;try{const{eventName:k,args:z}=xr({abi:g??[],data:P.data,topics:P.topics,strict:b}),S=Te(P,{args:z,eventName:k});a([S])}catch(k){let z,S;if(k instanceof mt||k instanceof qt){if(d)return;z=k.abiItem.name,S=(A=k.abiItem.inputs)==null?void 0:A.some(N=>!("name"in N&&N.name))}const F=Te(P,{args:S?[]:{},eventName:z});a([F])}},onError(E){c==null||c(E)}});v=w,y||v()}catch(B){c==null||c(B)}})(),()=>v()})()}function ol(e,{batch:t=!0,onError:n,onTransactions:r,poll:s,pollingInterval:o=e.pollingInterval}){return(typeof s<"u"?s:e.transport.type!=="webSocket"&&e.transport.type!=="ipc")?(()=>{const u=we(["watchPendingTransactions",e.uid,t,o]);return Ne(u,{onTransactions:r,onError:n},f=>{let d;const l=ct(async()=>{var b;try{if(!d)try{d=await _(e,wi,"createPendingTransactionFilter")({});return}catch(h){throw l(),h}const p=await _(e,an,"getFilterChanges")({filter:d});if(p.length===0)return;if(t)f.onTransactions(p);else for(const h of p)f.onTransactions([h])}catch(p){(b=f.onError)==null||b.call(f,p)}},{emitOnBegin:!0,interval:o});return async()=>{d&&await _(e,cn,"uninstallFilter")({filter:d}),l()}})})():(()=>{let u=!0,f=()=>u=!1;return(async()=>{try{const{unsubscribe:d}=await e.transport.subscribe({params:["newPendingTransactions"],onData(l){if(!u)return;const b=l.result;r([b])},onError(l){n==null||n(l)}});f=d,u||f()}catch(d){n==null||n(d)}})(),()=>f()})()}function il(e){var d,l,b;const{scheme:t,statement:n,...r}=((d=e.match(al))==null?void 0:d.groups)??{},{chainId:s,expirationTime:o,issuedAt:i,notBefore:c,requestId:a,...u}=((l=e.match(cl))==null?void 0:l.groups)??{},f=(b=e.split("Resources:")[1])==null?void 0:b.split(`
- `).slice(1);return{...r,...u,...s?{chainId:Number(s)}:{},...o?{expirationTime:new Date(o)}:{},...i?{issuedAt:new Date(i)}:{},...c?{notBefore:new Date(c)}:{},...a?{requestId:a}:{},...f?{resources:f}:{},...t?{scheme:t}:{},...n?{statement:n}:{}}}const al=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,cl=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;function ul(e){const{address:t,domain:n,message:r,nonce:s,scheme:o,time:i=new Date}=e;if(n&&r.domain!==n||s&&r.nonce!==s||o&&r.scheme!==o||r.expirationTime&&i>=r.expirationTime||r.notBefore&&i<r.notBefore)return!1;try{if(!r.address||!ie(r.address,{strict:!1})||t&&!en(r.address,t))return!1}catch{return!1}return!0}async function fl(e,t){const{address:n,domain:r,message:s,nonce:o,scheme:i,signature:c,time:a=new Date,...u}=t,f=il(s);if(!f.address||!ul({address:n,domain:r,message:f,nonce:o,scheme:i,time:a}))return!1;const l=ao(s);return bn(e,{address:f.address,hash:l,signature:c,...u})}async function dl(e,{serializedTransaction:t,throwOnReceiptRevert:n,timeout:r}){var c,a,u;const s=await e.request({method:"eth_sendRawTransactionSync",params:r?[t,T(r)]:[t]},{retryCount:0}),i=(((u=(a=(c=e.chain)==null?void 0:c.formatters)==null?void 0:a.transactionReceipt)==null?void 0:u.format)||Tr)(s);if(i.status==="reverted"&&n)throw new M0({receipt:i});return i}function ll(e){return{call:t=>on(e,t),createAccessList:t=>yi(e,t),createBlockFilter:()=>Du(e),createContractEventFilter:t=>go(e,t),createEventFilter:t=>gi(e,t),createPendingTransactionFilter:()=>wi(e),estimateContractGas:t=>wc(e,t),estimateGas:t=>wr(e,t),getBalance:t=>Vu(e,t),getBlobBaseFee:()=>qu(e),getBlock:t=>ae(e,t),getBlockNumber:t=>kt(e,t),getBlockTransactionCount:t=>Zu(e,t),getBytecode:t=>Zn(e,t),getChainId:()=>gr(e),getCode:t=>Zn(e,t),getContractEvents:t=>Vo(e,t),getEip712Domain:t=>Ku(e,t),getEnsAddress:t=>Su(e,t),getEnsAvatar:t=>Uu(e,t),getEnsName:t=>Hu(e,t),getEnsResolver:t=>ju(e,t),getEnsText:t=>mi(e,t),getFeeHistory:t=>Xu(e,t),estimateFeesPerGas:t=>rc(e,t),getFilterChanges:t=>an(e,t),getFilterLogs:t=>Qu(e,t),getGasPrice:()=>hr(e),getLogs:t=>Pr(e,t),getProof:t=>Fd(e,t),estimateMaxPriorityFeePerGas:t=>nc(e,t),fillTransaction:t=>jo(e,t),getStorageAt:t=>Cd(e,t),getTransaction:t=>Dr(e,t),getTransactionConfirmations:t=>zd(e,t),getTransactionCount:t=>zo(e,t),getTransactionReceipt:t=>Rt(e,t),multicall:t=>Rd(e,t),prepareTransactionRequest:t=>Do(e,t),readContract:t=>le(e,t),sendRawTransaction:t=>pu(e,t),sendRawTransactionSync:t=>dl(e,t),simulate:t=>tr(e,t),simulateBlocks:t=>tr(e,t),simulateCalls:t=>Vd(e,t),simulateContract:t=>au(e,t),verifyHash:t=>bn(e,t),verifyMessage:t=>el(e,t),verifySiweMessage:t=>fl(e,t),verifyTypedData:t=>tl(e,t),uninstallFilter:t=>cn(e,t),waitForTransactionReceipt:t=>nl(e,t),watchBlocks:t=>rl(e,t),watchBlockNumber:t=>Wi(e,t),watchContractEvent:t=>hu(e,t),watchEvent:t=>sl(e,t),watchPendingTransactions:t=>ol(e,t)}}function Sl(e){const{key:t="public",name:n="Public Client"}=e;return vu({...e,key:t,name:n,type:"publicClient"}).extend(ll)}function Tl(e){const{r:t,s:n}=Ur.Signature.fromCompact(e.slice(2,130)),r=+`0x${e.slice(130)}`,[s,o]=(()=>{if(r===0||r===1)return[void 0,r];if(r===27)return[BigInt(r),0];if(r===28)return[BigInt(r),1];throw new Error("Invalid yParityOrV value")})();return typeof s<"u"?{r:T(t,{size:32}),s:T(n,{size:32}),v:s,yParity:o}:{r:T(t,{size:32}),s:T(n,{size:32}),yParity:o}}export{ll as $,vu as A,Sl as B,U0 as C,Pl as D,Pu as E,Tl as F,El as G,It as H,un as I,Bu as J,on as K,t0 as L,Da as M,Za as N,Xa as O,Ja as P,Ya as Q,Wa as R,n0 as S,ot as T,e0 as U,us as V,fs as W,Ka as X,Qa as Y,Va as Z,xu as _,gr as a,nf as a$,jd as a0,me as a1,ci as a2,tu as a3,nu as a4,Xt as a5,ko as a6,mu as a7,Vn as a8,ui as a9,Eu as aA,vr as aB,pr as aC,mr as aD,Oo as aE,lc as aF,Uo as aG,mc as aH,at as aI,v0 as aJ,P0 as aK,Be as aL,E0 as aM,$u as aN,qn as aO,rt as aP,br as aQ,Fo as aR,$t as aS,J0 as aT,dc as aU,lu as aV,Ao as aW,V0 as aX,Yd as aY,it as aZ,zr as a_,sn as aa,Bo as ab,H0 as ac,Kt as ad,lt as ae,Nu as af,Fr as ag,K0 as ah,No as ai,lr as aj,ec as ak,m0 as al,F0 as am,C0 as an,R0 as ao,O0 as ap,_0 as aq,L0 as ar,Po as as,Eo as at,G0 as au,xr as av,Ze as aw,Sr as ax,Ts as ay,Bt as az,zo as b,rf as b0,Ho as b1,fn as b2,ur as b3,yl as c,vl as d,gl as e,Qt as f,_ as g,Il as h,en as i,$l as j,Zn as k,yo as l,At as m,k0 as n,Hn as o,te as p,Io as q,le as r,Bl as s,He as t,rc as u,dr as v,Te as w,Tr as x,Ne as y,ct as z};
